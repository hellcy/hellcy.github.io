<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>AWS SAA Review | Hellcy&#39;s Blog</title>
  <meta name="description" content="I PASSED!  View My Certificate  Getting Started  AWS Regions  AWS has regions all aroung the world Names can be us-east-1, eu-west-3… A region is a cluster of data centers Most AWS services are regoi">
<meta property="og:type" content="article">
<meta property="og:title" content="AWS SAA Review">
<meta property="og:url" content="http://hellcy.github.io/2021/08/09/AWS-SAA-Review/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="I PASSED!  View My Certificate  Getting Started  AWS Regions  AWS has regions all aroung the world Names can be us-east-1, eu-west-3… A region is a cluster of data centers Most AWS services are regoi">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/AWSCertifiedSolutionsArchitectAssociateCertificate.png">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/1.png">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/2.png">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/3.png">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/4.png">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/5.png">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/6.png">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/7.png">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/8.png">
<meta property="og:image" content="http://hellcy.github.io/images/AWS-SAA-Review/9.png">
<meta property="article:published_time" content="2021-08-09T06:32:59.000Z">
<meta property="article:modified_time" content="2022-02-10T14:39:24.300Z">
<meta property="article:author" content="Yuan Cheng">
<meta property="article:tag" content="AWS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://hellcy.github.io/images/AWS-SAA-Review/AWSCertifiedSolutionsArchitectAssociateCertificate.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://hellcy.github.io/2021/08/09/AWS-SAA-Review/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
    <link href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.css" rel="stylesheet">
  
  
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css">
  
<meta name="generator" content="Hexo 5.3.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/hellcy" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Yuan Cheng</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Software Engineer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Sydney, Australia</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">Categories</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">Tags</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">Repository</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">About</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/hellcy" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>Welcome to my blog!</p>
            </div>
        </div>
    </div>
</div>

    
      

    
      
  <div class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/NET/" rel="tag">.NET</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/" rel="tag">API</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ASP-NET-Core/" rel="tag">ASP.NET Core</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/" rel="tag">AWS</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-Studio/" rel="tag">Android Studio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Azure/" rel="tag">Azure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C#</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data/" rel="tag">Data</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structures/" rel="tag">Data Structures</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Virtualization/" rel="tag">Data Virtualization</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dependency-Injection/" rel="tag">Dependency Injection</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Patterns/" rel="tag">Design Patterns</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dynamic-Programming/" rel="tag">Dynamic Programming</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elastic-Search/" rel="tag">Elastic Search</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Entity-Framework/" rel="tag">Entity Framework</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Functional-Tests/" rel="tag">Functional Tests</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GraphQL/" rel="tag">GraphQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IIS/" rel="tag">IIS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kotlin/" rel="tag">Kotlin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LINQ/" rel="tag">LINQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Load-Testing/" rel="tag">Load Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mifare/" rel="tag">Mifare</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSO/" rel="tag">SSO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrum/" rel="tag">Scrum</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Selenium/" rel="tag">Selenium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/" rel="tag">Swift</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unit-Tests/" rel="tag">Unit Tests</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web-Development/" rel="tag">Web Development</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Wishlist/" rel="tag">Wishlist</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/" rel="tag">iOS</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/NET/" style="font-size: 13.25px;">.NET</a> <a href="/tags/API/" style="font-size: 13.5px;">API</a> <a href="/tags/ASP-NET-Core/" style="font-size: 13.25px;">ASP.NET Core</a> <a href="/tags/AWS/" style="font-size: 13.75px;">AWS</a> <a href="/tags/Android-Studio/" style="font-size: 13px;">Android Studio</a> <a href="/tags/Azure/" style="font-size: 13px;">Azure</a> <a href="/tags/C/" style="font-size: 13.25px;">C#</a> <a href="/tags/Data/" style="font-size: 13.25px;">Data</a> <a href="/tags/Data-Structures/" style="font-size: 13.25px;">Data Structures</a> <a href="/tags/Data-Virtualization/" style="font-size: 13.25px;">Data Virtualization</a> <a href="/tags/Dependency-Injection/" style="font-size: 13px;">Dependency Injection</a> <a href="/tags/Design-Patterns/" style="font-size: 14px;">Design Patterns</a> <a href="/tags/Dynamic-Programming/" style="font-size: 13px;">Dynamic Programming</a> <a href="/tags/Elastic-Search/" style="font-size: 13px;">Elastic Search</a> <a href="/tags/Entity-Framework/" style="font-size: 13px;">Entity Framework</a> <a href="/tags/Functional-Tests/" style="font-size: 13px;">Functional Tests</a> <a href="/tags/GraphQL/" style="font-size: 13px;">GraphQL</a> <a href="/tags/IIS/" style="font-size: 13px;">IIS</a> <a href="/tags/Java/" style="font-size: 13.5px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 13px;">JavaScript</a> <a href="/tags/Kotlin/" style="font-size: 13px;">Kotlin</a> <a href="/tags/LINQ/" style="font-size: 13px;">LINQ</a> <a href="/tags/Load-Testing/" style="font-size: 13px;">Load Testing</a> <a href="/tags/Mifare/" style="font-size: 13px;">Mifare</a> <a href="/tags/Python/" style="font-size: 13px;">Python</a> <a href="/tags/React/" style="font-size: 13.25px;">React</a> <a href="/tags/SQL/" style="font-size: 13.25px;">SQL</a> <a href="/tags/SSO/" style="font-size: 13px;">SSO</a> <a href="/tags/Scrum/" style="font-size: 13px;">Scrum</a> <a href="/tags/Selenium/" style="font-size: 13px;">Selenium</a> <a href="/tags/Spring/" style="font-size: 13px;">Spring</a> <a href="/tags/Swift/" style="font-size: 13.25px;">Swift</a> <a href="/tags/TCP-IP/" style="font-size: 13px;">TCP/IP</a> <a href="/tags/Unit-Tests/" style="font-size: 13px;">Unit Tests</a> <a href="/tags/Web-Development/" style="font-size: 13px;">Web Development</a> <a href="/tags/Wishlist/" style="font-size: 13.25px;">Wishlist</a> <a href="/tags/git/" style="font-size: 13.25px;">git</a> <a href="/tags/iOS/" style="font-size: 13px;">iOS</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">Archive</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021</a><span class="archive-list-count">39</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled ">
        
          <li>
            
            <div class="item-thumb">
              <a href="/2022/02/10/Polymorphism-in-Java/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2022/02/10/Polymorphism-in-Java/" class="title">Polymorphism in Java</a>
              </p>
              <p class="item-date">
                <time datetime="2022-02-10T05:16:18.000Z" itemprop="datePublished">10-02-2022</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2022/02/09/Design-Pattern-Singleton-in-Java/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2022/02/09/Design-Pattern-Singleton-in-Java/" class="title">Design Pattern - Singleton in Java</a>
              </p>
              <p class="item-date">
                <time datetime="2022-02-09T06:26:19.000Z" itemprop="datePublished">09-02-2022</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2022/01/02/Elastic-Search/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2022/01/02/Elastic-Search/" class="title">Elastic Search</a>
              </p>
              <p class="item-date">
                <time datetime="2022-01-02T06:41:13.000Z" itemprop="datePublished">02-01-2022</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/12/09/Dot-net-React/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2021/12/09/Dot-net-React/" class="title">Dot net + React</a>
              </p>
              <p class="item-date">
                <time datetime="2021-12-09T12:17:52.000Z" itemprop="datePublished">09-12-2021</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/11/05/Spring-Framework/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2021/11/05/Spring-Framework/" class="title">Spring Framework</a>
              </p>
              <p class="item-date">
                <time datetime="2021-11-04T13:06:37.000Z" itemprop="datePublished">05-11-2021</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">Catalogue</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#i-passed"><span class="toc-number">1.</span> <span class="toc-text"> I PASSED!</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#getting-started"><span class="toc-number">2.</span> <span class="toc-text"> Getting Started</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-regions"><span class="toc-number">2.1.</span> <span class="toc-text"> AWS Regions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#how-to-choose-an-aws-region"><span class="toc-number">2.2.</span> <span class="toc-text"> How to choose an AWS Region?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-availability-zones"><span class="toc-number">2.3.</span> <span class="toc-text"> AWS Availability Zones</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-points-of-presence-edge-locations"><span class="toc-number">2.4.</span> <span class="toc-text"> AWS Points of Presence (Edge locations)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#iam-and-aws-cli"><span class="toc-number">3.</span> <span class="toc-text"> IAM and AWS CLI</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#iam"><span class="toc-number">3.1.</span> <span class="toc-text"> IAM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#iam-permissions"><span class="toc-number">3.1.1.</span> <span class="toc-text"> IAM Permissions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iam-policies-structure"><span class="toc-number">3.1.2.</span> <span class="toc-text"> IAM Policies Structure</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#how-can-users-access-aws"><span class="toc-number">3.1.3.</span> <span class="toc-text"> How can users access AWS?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iam-roles-for-services"><span class="toc-number">3.1.4.</span> <span class="toc-text"> IAM Roles for services</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iam-security-tools"><span class="toc-number">3.1.5.</span> <span class="toc-text"> IAM Security Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iam-guidelines-and-best-practices"><span class="toc-number">3.1.6.</span> <span class="toc-text"> IAM Guidelines and Best practices</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ec2"><span class="toc-number">4.</span> <span class="toc-text"> EC2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-instance-types-overview"><span class="toc-number">4.1.</span> <span class="toc-text"> EC2 Instance Types - Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#general-purpose"><span class="toc-number">4.1.1.</span> <span class="toc-text"> General Purpose</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compute-optimized"><span class="toc-number">4.1.2.</span> <span class="toc-text"> Compute Optimized</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#memory-optimized"><span class="toc-number">4.1.3.</span> <span class="toc-text"> Memory Optimized</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#storage-optimized"><span class="toc-number">4.1.4.</span> <span class="toc-text"> Storage Optimized</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#security-groups"><span class="toc-number">4.2.</span> <span class="toc-text"> Security Groups</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#good-to-know"><span class="toc-number">4.2.1.</span> <span class="toc-text"> Good to know</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#classic-ports-to-know"><span class="toc-number">4.3.</span> <span class="toc-text"> Classic Ports to know</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-instances-purchasing-options"><span class="toc-number">4.4.</span> <span class="toc-text"> EC2 Instances purchasing options</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ec2-on-demand"><span class="toc-number">4.4.1.</span> <span class="toc-text"> EC2 on demand</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ec2-reserved-instances"><span class="toc-number">4.4.2.</span> <span class="toc-text"> EC2 reserved instances</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#convertible-reserved-instance"><span class="toc-number">4.4.2.1.</span> <span class="toc-text"> Convertible reserved instance</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#scheduled-reserved-instances"><span class="toc-number">4.4.2.2.</span> <span class="toc-text"> scheduled reserved instances</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ec2-spot-instance"><span class="toc-number">4.4.3.</span> <span class="toc-text"> EC2 Spot instance</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#spot-instance-requests"><span class="toc-number">4.4.3.1.</span> <span class="toc-text"> Spot instance requests</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#spot-fleets"><span class="toc-number">4.4.3.2.</span> <span class="toc-text"> Spot fleets</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ec2-dedicated-hosts"><span class="toc-number">4.4.4.</span> <span class="toc-text"> EC2 dedicated hosts</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elastic-ip"><span class="toc-number">4.5.</span> <span class="toc-text"> Elastic IP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#placement-groups"><span class="toc-number">4.6.</span> <span class="toc-text"> Placement Groups</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elastic-network-interfaces-eni"><span class="toc-number">4.7.</span> <span class="toc-text"> Elastic Network Interfaces (ENI)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-hibernate"><span class="toc-number">4.8.</span> <span class="toc-text"> EC2 Hibernate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-nitro"><span class="toc-number">4.9.</span> <span class="toc-text"> EC2 Nitro</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-vcpu"><span class="toc-number">4.10.</span> <span class="toc-text"> EC2 vCPU</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-capacity-reservations"><span class="toc-number">4.11.</span> <span class="toc-text"> EC2 capacity reservations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-ebs"><span class="toc-number">4.12.</span> <span class="toc-text"> EC2 EBS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ebs-volume"><span class="toc-number">4.12.1.</span> <span class="toc-text"> EBS volume</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ebs-volume-types"><span class="toc-number">4.12.2.</span> <span class="toc-text"> EBS volume types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ebs-multi-attach-io1io2-family"><span class="toc-number">4.12.3.</span> <span class="toc-text"> EBS multi-attach - io1&#x2F;io2 family</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ebs-encryption"><span class="toc-number">4.12.4.</span> <span class="toc-text"> EBS encryption</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ebs-raid"><span class="toc-number">4.12.5.</span> <span class="toc-text"> EBS RAID</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#raid-0"><span class="toc-number">4.12.5.1.</span> <span class="toc-text"> RAID 0</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#raid-1"><span class="toc-number">4.12.5.2.</span> <span class="toc-text"> RAID 1</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ebs-delete-on-termination"><span class="toc-number">4.12.6.</span> <span class="toc-text"> EBS delete on termination</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ebs-snapshots"><span class="toc-number">4.13.</span> <span class="toc-text"> EBS Snapshots</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#efs-elastic-file-system"><span class="toc-number">4.14.</span> <span class="toc-text"> EFS - Elastic File System</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#performance-and-storage-class"><span class="toc-number">4.14.1.</span> <span class="toc-text"> Performance and Storage Class</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ami-overview"><span class="toc-number">4.15.</span> <span class="toc-text"> AMI Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-instance-store"><span class="toc-number">4.16.</span> <span class="toc-text"> EC2 instance store</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-metadata"><span class="toc-number">4.17.</span> <span class="toc-text"> EC2 Metadata</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#elastic-load-balancer"><span class="toc-number">5.</span> <span class="toc-text"> Elastic Load Balancer</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#what-is-load-balancing"><span class="toc-number">5.1.</span> <span class="toc-text"> What is load balancing?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#why-use-a-load-balancer"><span class="toc-number">5.2.</span> <span class="toc-text"> Why use a load balancer?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#health-checks"><span class="toc-number">5.3.</span> <span class="toc-text"> Health Checks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#classic-load-balanceers-v1"><span class="toc-number">5.4.</span> <span class="toc-text"> Classic Load Balanceers (v1)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#application-load-balancer-v2"><span class="toc-number">5.5.</span> <span class="toc-text"> Application Load Balancer (v2)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#target-groups"><span class="toc-number">5.5.1.</span> <span class="toc-text"> Target Groups</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#network-load-balancer-v2"><span class="toc-number">5.6.</span> <span class="toc-text"> Network Load Balancer (v2)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sticky-sessions-session-affinity"><span class="toc-number">5.7.</span> <span class="toc-text"> Sticky Sessions (Session Affinity)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cross-zone-load-balancing"><span class="toc-number">5.8.</span> <span class="toc-text"> Cross Zone Load Balancing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssltls"><span class="toc-number">5.9.</span> <span class="toc-text"> SSL&#x2F;TLS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ssl-server-name-indication"><span class="toc-number">5.9.1.</span> <span class="toc-text"> SSL - Server Name Indication</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elb-connection-draining"><span class="toc-number">5.10.</span> <span class="toc-text"> ELB Connection Draining</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#auto-scaling-group"><span class="toc-number">6.</span> <span class="toc-text"> Auto Scaling Group</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#asg-attributes"><span class="toc-number">6.1.</span> <span class="toc-text"> ASG attributes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#auto-scaling-alarms"><span class="toc-number">6.2.</span> <span class="toc-text"> Auto Scaling Alarms</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#auto-scaling-new-rules"><span class="toc-number">6.3.</span> <span class="toc-text"> Auto Scaling New Rules</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#auto-scaling-custom-metric"><span class="toc-number">6.4.</span> <span class="toc-text"> Auto Scaling Custom Metric</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#good-to-know-2"><span class="toc-number">6.5.</span> <span class="toc-text"> Good to know</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#auto-scaling-groups-dynamic-scaling-policies"><span class="toc-number">6.6.</span> <span class="toc-text"> Auto Scaling Groups - Dynamic Scaling Policies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#good-metrics-to-scale-on"><span class="toc-number">6.7.</span> <span class="toc-text"> Good metrics to scale on</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scaling-cooldowns"><span class="toc-number">6.8.</span> <span class="toc-text"> Scaling Cooldowns</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#asg-default-termination-policy"><span class="toc-number">6.9.</span> <span class="toc-text"> ASG default termination policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#asg-lifecycle-hooks"><span class="toc-number">6.10.</span> <span class="toc-text"> ASG lifecycle hooks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#asg-launch-template-vs-launch-configuration"><span class="toc-number">6.11.</span> <span class="toc-text"> ASG launch template vs Launch configuration</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rds"><span class="toc-number">7.</span> <span class="toc-text"> RDS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#rds-backups"><span class="toc-number">7.1.</span> <span class="toc-text"> RDS backups</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rds-storage-auto-scaling"><span class="toc-number">7.2.</span> <span class="toc-text"> RDS storage auto scaling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#read-replicas-for-read-scalability"><span class="toc-number">7.3.</span> <span class="toc-text"> Read Replicas for read scalability</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#read-replicas-use-case"><span class="toc-number">7.3.1.</span> <span class="toc-text"> Read replicas - use case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#network-cost"><span class="toc-number">7.3.2.</span> <span class="toc-text"> Network cost</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multi-az-disaster-recovery"><span class="toc-number">7.3.3.</span> <span class="toc-text"> Multi AZ disaster recovery</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rds-from-single-az-to-multi-az"><span class="toc-number">7.4.</span> <span class="toc-text"> RDS - from single AZ to multi AZ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rds-security-encryption"><span class="toc-number">7.5.</span> <span class="toc-text"> RDS security - encryption</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#encryption-operations"><span class="toc-number">7.5.1.</span> <span class="toc-text"> Encryption operations</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rds-security-network-and-iam"><span class="toc-number">7.6.</span> <span class="toc-text"> RDS security - network and IAM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#rds-iam-authentication"><span class="toc-number">7.6.1.</span> <span class="toc-text"> RDS - IAM authentication</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#amazon-aurora"><span class="toc-number">8.</span> <span class="toc-text"> Amazon Aurora</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#aurora-high-availability-and-read-scaling"><span class="toc-number">8.1.</span> <span class="toc-text"> Aurora High Availability and Read Scaling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aurora-custom-endpoints"><span class="toc-number">8.2.</span> <span class="toc-text"> Aurora - Custom Endpoints</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aurora-serverless"><span class="toc-number">8.3.</span> <span class="toc-text"> Aurora serverless</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aurora-multi-master"><span class="toc-number">8.4.</span> <span class="toc-text"> Aurora Multi-Master</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#amazon-elasticache"><span class="toc-number">9.</span> <span class="toc-text"> Amazon ElastiCache</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#db-cache"><span class="toc-number">9.1.</span> <span class="toc-text"> DB Cache</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#user-session-store"><span class="toc-number">9.2.</span> <span class="toc-text"> User session store</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis"><span class="toc-number">9.3.</span> <span class="toc-text"> Redis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#memcached"><span class="toc-number">9.4.</span> <span class="toc-text"> Memcached</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#patterns-for-elasticache"><span class="toc-number">9.5.</span> <span class="toc-text"> Patterns for ElastiCache</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reids-use-case"><span class="toc-number">9.6.</span> <span class="toc-text"> Reids use case</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#route-53"><span class="toc-number">10.</span> <span class="toc-text"> Route 53</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#overview"><span class="toc-number">10.1.</span> <span class="toc-text"> Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cname-vs-alias"><span class="toc-number">10.2.</span> <span class="toc-text"> CNAME vs Alias</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#simple-routing-policy"><span class="toc-number">10.3.</span> <span class="toc-text"> Simple Routing policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#weighted-routing-policy"><span class="toc-number">10.4.</span> <span class="toc-text"> Weighted routing policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#latency-routing-policy"><span class="toc-number">10.5.</span> <span class="toc-text"> Latency routing policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#route-53-health-checks"><span class="toc-number">10.6.</span> <span class="toc-text"> Route 53 health checks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#geolocation-routing-policy"><span class="toc-number">10.7.</span> <span class="toc-text"> GeoLocation routing policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#geoproximity-routing-policy"><span class="toc-number">10.8.</span> <span class="toc-text"> Geoproximity routing policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#multi-value-routing-policy"><span class="toc-number">10.9.</span> <span class="toc-text"> Multi value routing policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#route-53-as-a-registrar"><span class="toc-number">10.10.</span> <span class="toc-text"> Route 53 as a Registrar</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#classic-solutions-architecture"><span class="toc-number">11.</span> <span class="toc-text"> Classic Solutions Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#stateful-app-with-shopping-cart"><span class="toc-number">11.1.</span> <span class="toc-text"> Stateful App with shopping cart</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#instantiating-applications-quickly"><span class="toc-number">11.2.</span> <span class="toc-text"> Instantiating Applications Quickly</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#beanstalk"><span class="toc-number">12.</span> <span class="toc-text"> Beanstalk</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#developer-problems-on-aws"><span class="toc-number">12.1.</span> <span class="toc-text"> Developer problems on AWS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elastic-beanstalk-overview"><span class="toc-number">12.2.</span> <span class="toc-text"> Elastic Beanstalk - overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elastic-beanstalk-components"><span class="toc-number">12.3.</span> <span class="toc-text"> Elastic Beanstalk - components</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#s3"><span class="toc-number">13.</span> <span class="toc-text"> S3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#buckets"><span class="toc-number">13.1.</span> <span class="toc-text"> Buckets</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#objects"><span class="toc-number">13.2.</span> <span class="toc-text"> Objects</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#versioning"><span class="toc-number">13.3.</span> <span class="toc-text"> Versioning</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#encryption-for-objects"><span class="toc-number">13.4.</span> <span class="toc-text"> Encryption for objects</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#s3-default-encryption"><span class="toc-number">13.4.1.</span> <span class="toc-text"> S3 Default Encryption</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sse-c"><span class="toc-number">13.4.2.</span> <span class="toc-text"> SSE-C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#client-side-encryption"><span class="toc-number">13.4.3.</span> <span class="toc-text"> Client side encryption</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#encryption-in-transit-ssltls"><span class="toc-number">13.4.4.</span> <span class="toc-text"> Encryption in transit (SSL&#x2F;TLS)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#security"><span class="toc-number">13.5.</span> <span class="toc-text"> Security</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cors"><span class="toc-number">13.6.</span> <span class="toc-text"> CORS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-access-logs"><span class="toc-number">13.7.</span> <span class="toc-text"> S3 Access logs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-replication-cross-region-or-same-region"><span class="toc-number">13.8.</span> <span class="toc-text"> S3 Replication (Cross-Region or Same Region)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-pre-signed-url"><span class="toc-number">13.9.</span> <span class="toc-text"> S3 Pre-signed URL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-storage-class"><span class="toc-number">13.10.</span> <span class="toc-text"> S3 Storage Class</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#standard-general-purpose"><span class="toc-number">13.10.1.</span> <span class="toc-text"> Standard - General Purpose</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#standard-ia"><span class="toc-number">13.10.2.</span> <span class="toc-text"> Standard - IA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#one-zone-ia"><span class="toc-number">13.10.3.</span> <span class="toc-text"> One Zone - IA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#intelligent-tiering"><span class="toc-number">13.10.4.</span> <span class="toc-text"> Intelligent Tiering</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#amazon-glacier"><span class="toc-number">13.10.5.</span> <span class="toc-text"> Amazon Glacier</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#amazon-glacier-and-glacier-deep-archive"><span class="toc-number">13.10.6.</span> <span class="toc-text"> Amazon Glacier and Glacier Deep Archive</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-lifecycle-rules"><span class="toc-number">13.11.</span> <span class="toc-text"> S3 Lifecycle Rules</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#s3-analytics-storage-class-analysis"><span class="toc-number">13.11.1.</span> <span class="toc-text"> S3 Analytics - Storage Class Analysis</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-select-and-glacier-select"><span class="toc-number">13.12.</span> <span class="toc-text"> S3 Select and Glacier Select</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-event-notifications"><span class="toc-number">13.13.</span> <span class="toc-text"> S3 Event notifications</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-requester-pays"><span class="toc-number">13.14.</span> <span class="toc-text"> S3 Requester Pays</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#glacier-vault-lock"><span class="toc-number">13.15.</span> <span class="toc-text"> Glacier Vault Lock</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-object-lock-versioning-must-be-enabled"><span class="toc-number">13.16.</span> <span class="toc-text"> S3 Object Lock (versioning must be enabled)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-athena"><span class="toc-number">14.</span> <span class="toc-text"> AWS Athena</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-cloudfront"><span class="toc-number">15.</span> <span class="toc-text"> AWS CloudFront</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#origins"><span class="toc-number">15.1.</span> <span class="toc-text"> Origins</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cloudfront-vs-s3-cross-region-replication"><span class="toc-number">15.1.1.</span> <span class="toc-text"> CloudFront vs S3 Cross Region Replication</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudfront-signed-url-signed-cookies"><span class="toc-number">15.2.</span> <span class="toc-text"> CloudFront Signed URL &#x2F; Signed Cookies</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#process"><span class="toc-number">15.2.1.</span> <span class="toc-text"> Process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cloudfront-signed-url-vs-s3-pre-signed-url"><span class="toc-number">15.2.2.</span> <span class="toc-text"> CloudFront Signed URL vs S3 Pre-signed URL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudfront-price-class"><span class="toc-number">15.3.</span> <span class="toc-text"> CloudFront - Price Class</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudfront-multiple-origins"><span class="toc-number">15.4.</span> <span class="toc-text"> CloudFront - Multiple Origins</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#based-on-the-path-pattern"><span class="toc-number">15.4.1.</span> <span class="toc-text"> Based on the path pattern</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudfront-origin-groups"><span class="toc-number">15.5.</span> <span class="toc-text"> CloudFront - Origin Groups</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudfront-field-level-encryption"><span class="toc-number">15.6.</span> <span class="toc-text"> CloudFront - Field Level Encryption</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-global-accelerator"><span class="toc-number">16.</span> <span class="toc-text"> AWS Global Accelerator</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#global-users-for-our-application"><span class="toc-number">16.1.</span> <span class="toc-text"> Global users for our application</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#unicast-ip-vs-anycast-ip"><span class="toc-number">16.2.</span> <span class="toc-text"> Unicast IP vs Anycast IP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-global-accelerator-2"><span class="toc-number">16.3.</span> <span class="toc-text"> AWS Global Accelerator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#global-accelerator-vs-cloudfront"><span class="toc-number">16.4.</span> <span class="toc-text"> Global Accelerator vs CloudFront</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-snow-family"><span class="toc-number">17.</span> <span class="toc-text"> AWS Snow Family</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#snowball-edge-for-data-transfers"><span class="toc-number">17.1.</span> <span class="toc-text"> Snowball Edge (for data transfers)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#snowcore"><span class="toc-number">17.2.</span> <span class="toc-text"> Snowcore</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#snowmobile"><span class="toc-number">17.3.</span> <span class="toc-text"> Snowmobile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#edge-computing"><span class="toc-number">17.4.</span> <span class="toc-text"> Edge computing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-opshub"><span class="toc-number">17.5.</span> <span class="toc-text"> AWS OpsHub</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#snowball-into-glacier"><span class="toc-number">17.5.1.</span> <span class="toc-text"> Snowball into Glacier</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-storage-gateway"><span class="toc-number">18.</span> <span class="toc-text"> AWS Storage Gateway</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#file-gateway"><span class="toc-number">18.1.</span> <span class="toc-text"> File Gateway</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#volume-gateway"><span class="toc-number">18.2.</span> <span class="toc-text"> Volume Gateway</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tape-gateway"><span class="toc-number">18.3.</span> <span class="toc-text"> Tape Gateway</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#storage-gateway-hardware-appliance"><span class="toc-number">18.4.</span> <span class="toc-text"> Storage Gateway - Hardware appliance</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-fsx"><span class="toc-number">19.</span> <span class="toc-text"> AWS FSx</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-fsx-for-windows"><span class="toc-number">19.1.</span> <span class="toc-text"> AWS FSx for Windows</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#amazon-fsx-for-lustre"><span class="toc-number">19.2.</span> <span class="toc-text"> Amazon FSx for Lustre</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#fsx-file-system-deployment-options"><span class="toc-number">19.2.1.</span> <span class="toc-text"> FSx File System Deployment Options</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-transfer-family"><span class="toc-number">20.</span> <span class="toc-text"> AWS Transfer Family</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-storage-comparison"><span class="toc-number">21.</span> <span class="toc-text"> AWS Storage Comparison</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#amazon-sqs-simple-queuing-service"><span class="toc-number">22.</span> <span class="toc-text"> Amazon SQS (Simple Queuing Service)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#producing-messages"><span class="toc-number">22.1.</span> <span class="toc-text"> Producing Messages</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#consuming-messages"><span class="toc-number">22.2.</span> <span class="toc-text"> Consuming Messages</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#multiple-ec2-instances-consumers"><span class="toc-number">22.3.</span> <span class="toc-text"> Multiple EC2 instances consumers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqs-with-auto-scaling-group"><span class="toc-number">22.4.</span> <span class="toc-text"> SQS with Auto Scaling Group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqs-security"><span class="toc-number">22.5.</span> <span class="toc-text"> SQS Security</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqs-queue-access-policy"><span class="toc-number">22.6.</span> <span class="toc-text"> SQS Queue Access Policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqs-message-visibility-timeout"><span class="toc-number">22.7.</span> <span class="toc-text"> SQS - Message Visibility Timeout</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqs-dead-letter-queue"><span class="toc-number">22.8.</span> <span class="toc-text"> SQS - Dead Letter Queue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqs-request-response-systems"><span class="toc-number">22.9.</span> <span class="toc-text"> SQS - Request - Response Systems</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqs-delay-queue"><span class="toc-number">22.10.</span> <span class="toc-text"> SQS - Delay Queue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqs-fifo-queue"><span class="toc-number">22.11.</span> <span class="toc-text"> SQS - FIFO queue</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#amazon-sns"><span class="toc-number">23.</span> <span class="toc-text"> Amazon SNS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#sns-integrates-with-a-lot-of-aws-services"><span class="toc-number">23.1.</span> <span class="toc-text"> SNS integrates with a lot of AWS services</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#how-to-publish"><span class="toc-number">23.2.</span> <span class="toc-text"> How to publish</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#security-2"><span class="toc-number">23.3.</span> <span class="toc-text"> Security</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sns-sqs-fan-out"><span class="toc-number">23.4.</span> <span class="toc-text"> SNS + SQS: Fan Out</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#eg-s3-events-to-multiple-queues-or-lambda-functions"><span class="toc-number">23.4.1.</span> <span class="toc-text"> e.g. S3 Events to multiple queues or lambda functions</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sns-fifo-topic"><span class="toc-number">23.5.</span> <span class="toc-text"> SNS FIFO topic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#message-filtering"><span class="toc-number">23.6.</span> <span class="toc-text"> Message Filtering</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-kinesis"><span class="toc-number">24.</span> <span class="toc-text"> AWS Kinesis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#kinesis-data-streams"><span class="toc-number">24.1.</span> <span class="toc-text"> Kinesis Data Streams</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kinesis-firehose"><span class="toc-number">24.2.</span> <span class="toc-text"> Kinesis Firehose</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kinesis-data-analytics-sql-application"><span class="toc-number">24.3.</span> <span class="toc-text"> Kinesis Data Analytics (SQL application)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kinesis-vs-sqs-ordering"><span class="toc-number">24.4.</span> <span class="toc-text"> Kinesis vs SQS ordering</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#amazon-mq"><span class="toc-number">24.5.</span> <span class="toc-text"> Amazon MQ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#container"><span class="toc-number">25.</span> <span class="toc-text"> Container</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#docker"><span class="toc-number">25.1.</span> <span class="toc-text"> Docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#where-are-docker-images-stored"><span class="toc-number">25.2.</span> <span class="toc-text"> Where are Docker images stored</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-containers-management"><span class="toc-number">25.3.</span> <span class="toc-text"> Docker Containers Management</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ecs-elastic-container-service"><span class="toc-number">25.4.</span> <span class="toc-text"> ECS (Elastic Container Service)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fargate"><span class="toc-number">25.5.</span> <span class="toc-text"> Fargate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#iam-roles-for-ecs-tasks"><span class="toc-number">25.6.</span> <span class="toc-text"> IAM roles for ECS tasks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ecs-data-volumes-efs-file-systems"><span class="toc-number">25.7.</span> <span class="toc-text"> ECS data volumes - EFS file systems</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#load-balancing-for-ec2-launch-type"><span class="toc-number">25.8.</span> <span class="toc-text"> Load Balancing for EC2 Launch type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#load-balancing-for-fargate"><span class="toc-number">25.9.</span> <span class="toc-text"> Load Balancing for Fargate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#event-bridge"><span class="toc-number">25.10.</span> <span class="toc-text"> Event Bridge</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ecs-rolling-updates"><span class="toc-number">25.11.</span> <span class="toc-text"> ECS Rolling updates</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ecr-elastic-container-registry"><span class="toc-number">25.12.</span> <span class="toc-text"> ECR (Elastic Container Registry)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#eks-elastic-kubernetes-service"><span class="toc-number">25.13.</span> <span class="toc-text"> EKS (Elastic Kubernetes Service)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#serverless"><span class="toc-number">26.</span> <span class="toc-text"> Serverless</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#lambda"><span class="toc-number">26.1.</span> <span class="toc-text"> Lambda</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#lambda-limits"><span class="toc-number">26.1.1.</span> <span class="toc-text"> Lambda Limits</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lambdaedge"><span class="toc-number">26.1.2.</span> <span class="toc-text"> Lambda@Edge</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dynamodb"><span class="toc-number">26.2.</span> <span class="toc-text"> DynamoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamodb-basics"><span class="toc-number">26.2.1.</span> <span class="toc-text"> DynamoDB - basics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#provisioned-throughput"><span class="toc-number">26.2.2.</span> <span class="toc-text"> Provisioned Throughput</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamodb-dax"><span class="toc-number">26.2.3.</span> <span class="toc-text"> DynamoDB - DAX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamodb-streams"><span class="toc-number">26.2.4.</span> <span class="toc-text"> DynamoDB Streams</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#transactions-new-from-nov-2018"><span class="toc-number">26.2.5.</span> <span class="toc-text"> Transactions (new from Nov 2018)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#on-demand-new-from-nov-2018"><span class="toc-number">26.2.6.</span> <span class="toc-text"> On Demand (new from Nov 2018)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamodb-security-and-other-features"><span class="toc-number">26.2.7.</span> <span class="toc-text"> DynamoDB - Security and other features</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#api-gateway"><span class="toc-number">26.3.</span> <span class="toc-text"> API Gateway</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#api-gateway-endpoint-types"><span class="toc-number">26.3.1.</span> <span class="toc-text"> API Gateway - Endpoint Types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#security-3"><span class="toc-number">26.3.2.</span> <span class="toc-text"> Security</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#iam-permissions-2"><span class="toc-number">26.3.2.1.</span> <span class="toc-text"> IAM Permissions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lambda-authorizer"><span class="toc-number">26.3.2.2.</span> <span class="toc-text"> Lambda authorizer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cognito-user-pools"><span class="toc-number">26.3.2.3.</span> <span class="toc-text"> Cognito User Pools</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-cognito"><span class="toc-number">26.4.</span> <span class="toc-text"> AWS Cognito</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-cognito-user-pools"><span class="toc-number">26.4.1.</span> <span class="toc-text"> AWS Cognito User Pools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-cognito-federated-identity-pools"><span class="toc-number">26.4.2.</span> <span class="toc-text"> AWS Cognito - Federated Identity Pools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-cognito-sync"><span class="toc-number">26.4.3.</span> <span class="toc-text"> AWS Cognito Sync</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-sam-serverless-application-model"><span class="toc-number">26.5.</span> <span class="toc-text"> AWS SAM - Serverless Application Model</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#databases-comparison"><span class="toc-number">27.</span> <span class="toc-text"> Databases Comparison</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#rds-2"><span class="toc-number">27.1.</span> <span class="toc-text"> RDS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aurora"><span class="toc-number">27.2.</span> <span class="toc-text"> Aurora</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elasticcache"><span class="toc-number">27.3.</span> <span class="toc-text"> ElasticCache</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dynamodb-2"><span class="toc-number">27.4.</span> <span class="toc-text"> DynamoDB</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s3-2"><span class="toc-number">27.5.</span> <span class="toc-text"> S3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#athena"><span class="toc-number">27.6.</span> <span class="toc-text"> Athena</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redshift"><span class="toc-number">27.7.</span> <span class="toc-text"> RedShift</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#snapshots-dr"><span class="toc-number">27.7.1.</span> <span class="toc-text"> Snapshots &#x2F; DR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redshift-specturm"><span class="toc-number">27.7.2.</span> <span class="toc-text"> Redshift Specturm</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-glue"><span class="toc-number">27.8.</span> <span class="toc-text"> AWS Glue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#glue-data-catalog"><span class="toc-number">27.8.1.</span> <span class="toc-text"> Glue Data Catalog</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#neptune"><span class="toc-number">27.9.</span> <span class="toc-text"> Neptune</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elasticsearch"><span class="toc-number">27.10.</span> <span class="toc-text"> ElasticSearch</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-cloudwatch"><span class="toc-number">28.</span> <span class="toc-text"> AWS CloudWatch</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudwatch-metrics"><span class="toc-number">28.1.</span> <span class="toc-text"> CloudWatch Metrics</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-detailed-monitoring"><span class="toc-number">28.2.</span> <span class="toc-text"> EC2 Detailed monitoring</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudwatch-custom-metrics"><span class="toc-number">28.3.</span> <span class="toc-text"> CloudWatch Custom Metrics</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudwatch-dashboards"><span class="toc-number">28.4.</span> <span class="toc-text"> CloudWatch Dashboards</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudwatch-logs"><span class="toc-number">28.5.</span> <span class="toc-text"> CloudWatch Logs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudwatch-logs-for-ec2"><span class="toc-number">28.6.</span> <span class="toc-text"> CloudWatch Logs for EC2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cloudwatch-logs-agent-vs-unified-agent"><span class="toc-number">28.6.1.</span> <span class="toc-text"> CloudWatch Logs Agent vs Unified Agent</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudwatch-alarms"><span class="toc-number">28.7.</span> <span class="toc-text"> CloudWatch Alarms</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#alarm-targets"><span class="toc-number">28.7.1.</span> <span class="toc-text"> Alarm Targets</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ec2-instance-recovery"><span class="toc-number">28.7.2.</span> <span class="toc-text"> EC2 instance recovery</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cloudwatch-alarm-good-to-know"><span class="toc-number">28.7.3.</span> <span class="toc-text"> CloudWatch Alarm: good to know</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudwatch-events"><span class="toc-number">28.8.</span> <span class="toc-text"> CloudWatch Events</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#amazon-eventbridge"><span class="toc-number">28.9.</span> <span class="toc-text"> Amazon EventBridge</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-cloudtrail"><span class="toc-number">28.10.</span> <span class="toc-text"> AWS CloudTrail</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudtrail-insights"><span class="toc-number">28.11.</span> <span class="toc-text"> CloudTrail Insights</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cloudtrail-events-retention"><span class="toc-number">28.11.1.</span> <span class="toc-text"> CloudTrail Events retention</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-config"><span class="toc-number">29.</span> <span class="toc-text"> AWS Config</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#config-rules-remediations"><span class="toc-number">29.1.</span> <span class="toc-text"> Config Rules - remediations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#config-rules-notifications"><span class="toc-number">29.2.</span> <span class="toc-text"> Config Rules - notifications</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudwatch-vs-cloudtrail-vs-config"><span class="toc-number">29.3.</span> <span class="toc-text"> CloudWatch vs CloudTrail vs Config</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#example-for-an-elastic-load-balancer"><span class="toc-number">29.3.1.</span> <span class="toc-text"> Example for an Elastic Load Balancer</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-sts-security-token-service"><span class="toc-number">30.</span> <span class="toc-text"> AWS STS (Security Token Service)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#identity-federation-in-aws"><span class="toc-number">30.1.</span> <span class="toc-text"> Identity Federation in AWS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#saml-20-federation"><span class="toc-number">30.2.</span> <span class="toc-text"> SAML 2.0 Federation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-directory-services"><span class="toc-number">30.3.</span> <span class="toc-text"> AWS Directory Services</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-organizations"><span class="toc-number">30.4.</span> <span class="toc-text"> AWS Organizations</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#multi-account-strategies"><span class="toc-number">30.4.1.</span> <span class="toc-text"> Multi account strategies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#service-control-policies-scp"><span class="toc-number">30.4.2.</span> <span class="toc-text"> Service Control Policies (SCP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-organization-moving-accounts"><span class="toc-number">30.4.3.</span> <span class="toc-text"> AWS Organization - moving accounts</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#iam-advanced"><span class="toc-number">31.</span> <span class="toc-text"> IAM Advanced</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#iam-for-s3"><span class="toc-number">31.1.</span> <span class="toc-text"> IAM for S3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#iam-roles-vs-resource-based-policies"><span class="toc-number">31.2.</span> <span class="toc-text"> IAM Roles vs Resource Based Policies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#iam-permission-boundaries"><span class="toc-number">31.3.</span> <span class="toc-text"> IAM permission boundaries</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-resource-access-manager-ram"><span class="toc-number">31.4.</span> <span class="toc-text"> AWS Resource Access Manager (RAM)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-sso"><span class="toc-number">31.5.</span> <span class="toc-text"> AWS SSO</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-security"><span class="toc-number">32.</span> <span class="toc-text"> AWS Security</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#encryption-in-flight-ssl"><span class="toc-number">32.1.</span> <span class="toc-text"> Encryption in flight (SSL)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#server-side-encryption-at-rest"><span class="toc-number">32.2.</span> <span class="toc-text"> Server side encryption at rest</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#client-side-encryption-2"><span class="toc-number">32.3.</span> <span class="toc-text"> Client side encryption</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-kms-key-management-service"><span class="toc-number">32.4.</span> <span class="toc-text"> AWS KMS (key management service)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#kms-customer-master-key-cmk-types"><span class="toc-number">32.4.1.</span> <span class="toc-text"> KMS - Customer Master Key (CMK) Types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pricing"><span class="toc-number">32.4.2.</span> <span class="toc-text"> Pricing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#kms-101"><span class="toc-number">32.4.3.</span> <span class="toc-text"> KMS 101</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#kms-key-policies"><span class="toc-number">32.4.4.</span> <span class="toc-text"> KMS key policies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#kms-automatic-key-rotation"><span class="toc-number">32.4.5.</span> <span class="toc-text"> KMS Automatic Key Rotation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssm-parameter-store"><span class="toc-number">32.5.</span> <span class="toc-text"> SSM Parameter Store</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-secrets-manager"><span class="toc-number">32.6.</span> <span class="toc-text"> AWS Secrets Manager</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudhsm"><span class="toc-number">32.7.</span> <span class="toc-text"> CloudHSM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-shield"><span class="toc-number">32.8.</span> <span class="toc-text"> AWS Shield</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-waf-web-application-firewall"><span class="toc-number">32.9.</span> <span class="toc-text"> AWS WAF (Web Application Firewall)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-guardduty"><span class="toc-number">32.10.</span> <span class="toc-text"> AWS GuardDuty</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-inspector"><span class="toc-number">32.11.</span> <span class="toc-text"> AWS Inspector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-macie"><span class="toc-number">32.12.</span> <span class="toc-text"> AWS Macie</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#aws-vpc"><span class="toc-number">33.</span> <span class="toc-text"> AWS VPC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#understanding-cidr-classless-inter-domain-routing-ipv4"><span class="toc-number">33.1.</span> <span class="toc-text"> Understanding CIDR (Classless Inter-Domain Routing) - IPv4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#private-vs-public-ip-allowed-ranges"><span class="toc-number">33.2.</span> <span class="toc-text"> Private vs public IP allowed ranges</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#default-vpc-walkthrough"><span class="toc-number">33.3.</span> <span class="toc-text"> Default VPC walkthrough</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vpc-in-aws-ipv4"><span class="toc-number">33.4.</span> <span class="toc-text"> VPC in AWS - IPv4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#subnets-ipv4"><span class="toc-number">33.5.</span> <span class="toc-text"> Subnets - IPv4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#internet-gateways"><span class="toc-number">33.6.</span> <span class="toc-text"> Internet Gateways</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nat-instances-network-address-translation"><span class="toc-number">33.7.</span> <span class="toc-text"> NAT instances - network address translation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nat-gateway"><span class="toc-number">33.8.</span> <span class="toc-text"> NAT Gateway</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nat-gateway-with-ha"><span class="toc-number">33.8.1.</span> <span class="toc-text"> NAT Gateway with HA</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dns-resolution-in-vpc"><span class="toc-number">33.9.</span> <span class="toc-text"> DNS Resolution in VPC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#network-acls-and-security-group"><span class="toc-number">33.10.</span> <span class="toc-text"> Network ACLs and Security Group</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#rules-allow-or-deny"><span class="toc-number">33.10.1.</span> <span class="toc-text"> Rules: Allow or Deny</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vpc-peering"><span class="toc-number">33.11.</span> <span class="toc-text"> VPC Peering</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vpc-peering-good-to-know"><span class="toc-number">33.11.1.</span> <span class="toc-text"> VPC Peering - good to know</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vpc-endpoint"><span class="toc-number">33.12.</span> <span class="toc-text"> VPC Endpoint</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flow-logs"><span class="toc-number">33.13.</span> <span class="toc-text"> Flow Logs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bastion-hosts"><span class="toc-number">33.14.</span> <span class="toc-text"> Bastion Hosts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#site-to-site-vpn"><span class="toc-number">33.15.</span> <span class="toc-text"> Site to Site VPN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#direct-connect-dx"><span class="toc-number">33.16.</span> <span class="toc-text"> Direct Connect (DX)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#direct-connect-gateway"><span class="toc-number">33.16.1.</span> <span class="toc-text"> Direct connect gateway</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#connection-types"><span class="toc-number">33.16.2.</span> <span class="toc-text"> Connection types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#encryption"><span class="toc-number">33.16.3.</span> <span class="toc-text"> Encryption</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resiliency"><span class="toc-number">33.16.4.</span> <span class="toc-text"> Resiliency</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#egress-outgoing-only-internet-gateway"><span class="toc-number">33.17.</span> <span class="toc-text"> Egress (outgoing) only internet gateway</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-private-link-vpc-endpoint-service"><span class="toc-number">33.18.</span> <span class="toc-text"> AWS Private Link - VPC Endpoint Service</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#how-to-expose-services-in-your-vpc-to-other-vpcs"><span class="toc-number">33.18.1.</span> <span class="toc-text"> How to expose services in your VPC to other VPCs?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aws-private-link"><span class="toc-number">33.18.2.</span> <span class="toc-text"> AWS Private Link</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ec2-classic-and-aws-classiclink-deprecated"><span class="toc-number">33.19.</span> <span class="toc-text"> EC2 Classic and AWS ClassicLink (deprecated)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-vpn-cloudhub"><span class="toc-number">33.20.</span> <span class="toc-text"> AWS VPN Cloudhub</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#transit-gateway"><span class="toc-number">33.21.</span> <span class="toc-text"> Transit Gateway</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#transit-gateway-site-to-site-vpc-ecmp"><span class="toc-number">33.21.1.</span> <span class="toc-text"> Transit Gateway: site-to-site VPC ECMP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vpc-summary"><span class="toc-number">33.22.</span> <span class="toc-text"> VPC Summary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#networking-cost-in-aws"><span class="toc-number">33.23.</span> <span class="toc-text"> Networking cost in AWS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ipv6-for-vpc"><span class="toc-number">33.24.</span> <span class="toc-text"> IPv6 for VPC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ipv6-troubleshooting"><span class="toc-number">33.24.1.</span> <span class="toc-text"> IPv6 Troubleshooting</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#disaster-recovery-overview"><span class="toc-number">34.</span> <span class="toc-text"> Disaster Recovery Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#backup-and-restore-high-rpo"><span class="toc-number">34.1.</span> <span class="toc-text"> Backup and restore (High RPO)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pilot-light"><span class="toc-number">34.2.</span> <span class="toc-text"> Pilot Light</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#warm-standby"><span class="toc-number">34.3.</span> <span class="toc-text"> Warm Standby</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#multi-site-hot-site-approach"><span class="toc-number">34.4.</span> <span class="toc-text"> Multi Site &#x2F; Hot Site Approach</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#disaster-recovery-tips"><span class="toc-number">34.5.</span> <span class="toc-text"> Disaster Recovery Tips</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dms-database-migration-service"><span class="toc-number">35.</span> <span class="toc-text"> DMS - Database Migration Service</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-schema-conversion-tool-sct"><span class="toc-number">35.1.</span> <span class="toc-text"> AWS Schema Conversion Tool (SCT)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#on-premises-strategy-with-aws"><span class="toc-number">35.2.</span> <span class="toc-text"> On Premises Strategy with AWS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-datasync"><span class="toc-number">35.3.</span> <span class="toc-text"> AWS DataSync</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-backup"><span class="toc-number">35.4.</span> <span class="toc-text"> AWS Backup</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#more-solution-architectures"><span class="toc-number">36.</span> <span class="toc-text"> More Solution Architectures</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#compute-and-networking"><span class="toc-number">36.1.</span> <span class="toc-text"> Compute and Networking</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cloudformation"><span class="toc-number">36.2.</span> <span class="toc-text"> CloudFormation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#deploying-cloudformation-templates"><span class="toc-number">36.2.1.</span> <span class="toc-text"> Deploying CloudFormation templates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cloudformation-stacksets"><span class="toc-number">36.2.2.</span> <span class="toc-text"> CloudFormation - stacksets</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-step-functions"><span class="toc-number">36.3.</span> <span class="toc-text"> AWS Step Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-swf-simple-workflow-service"><span class="toc-number">36.4.</span> <span class="toc-text"> AWS SWF - simple workflow service</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#amazon-emr"><span class="toc-number">36.5.</span> <span class="toc-text"> Amazon EMR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-opsworks"><span class="toc-number">36.6.</span> <span class="toc-text"> AWS Opsworks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-elastic-transcoder"><span class="toc-number">36.7.</span> <span class="toc-text"> AWS Elastic Transcoder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-workspaces"><span class="toc-number">36.8.</span> <span class="toc-text"> AWS WorkSpaces</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aws-appsync"><span class="toc-number">36.9.</span> <span class="toc-text"> AWS AppSync</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cost-explorer"><span class="toc-number">36.10.</span> <span class="toc-text"> Cost Explorer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cheatsheet"><span class="toc-number">36.11.</span> <span class="toc-text"> CheatSheet</span></a></li></ol></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-AWS-SAA-Review" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      AWS SAA Review
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/08/09/AWS-SAA-Review/" class="article-date">
	  <time datetime="2021-08-09T06:32:59.000Z" itemprop="datePublished">09-08-2021</time>
	</a>
</span>
        
        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/AWS/" rel="tag">AWS</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/08/09/AWS-SAA-Review/#comments" class="article-comment-link">Comments</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 22.5k(words)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count: 140(minutes)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="i-passed"><a class="markdownIt-Anchor" href="#i-passed"></a> I PASSED!</h1>
<p><img src="/../images/AWS-SAA-Review/AWSCertifiedSolutionsArchitectAssociateCertificate.png" alt="" /><br />
<a target="_blank" rel="noopener" href="https://www.credly.com/badges/58d1f023-d657-470e-a22e-fbe8ddf4124b?source=linked_in_profile">View My Certificate</a></p>
<h1 id="getting-started"><a class="markdownIt-Anchor" href="#getting-started"></a> Getting Started</h1>
<h2 id="aws-regions"><a class="markdownIt-Anchor" href="#aws-regions"></a> AWS Regions</h2>
<ul>
<li>AWS has regions all aroung the world</li>
<li>Names can be us-east-1, eu-west-3…</li>
<li>A region is a cluster of data centers</li>
<li>Most AWS services are regoin-scoped</li>
</ul>
<h2 id="how-to-choose-an-aws-region"><a class="markdownIt-Anchor" href="#how-to-choose-an-aws-region"></a> How to choose an AWS Region?</h2>
<ul>
<li>Compliance: with data governance and legal requirements, data never leaves a region without your explicit permission</li>
<li>Proximity to customers: reduced latency</li>
<li>Available services within a region: new services and new features aren’t available in every region</li>
<li>Pricing: pricing varies region to region and is transparent in the service pricing page</li>
</ul>
<h2 id="aws-availability-zones"><a class="markdownIt-Anchor" href="#aws-availability-zones"></a> AWS Availability Zones</h2>
<ul>
<li>Each region has many AZs example:
<ul>
<li>ap-southeast-2a</li>
<li>ap-southeast-2b</li>
<li>ap-southeast-2c</li>
</ul>
</li>
<li>Each AZ is one or more discrete data centers with redundant power, networking and connectivity</li>
<li>they are separate from each other, so that they are isolated from disasters</li>
<li>they are connected with high bandwidth, ultra low latency networking</li>
</ul>
<h2 id="aws-points-of-presence-edge-locations"><a class="markdownIt-Anchor" href="#aws-points-of-presence-edge-locations"></a> AWS Points of Presence (Edge locations)</h2>
<ul>
<li>Content is delivered to end users with lower latency</li>
</ul>
<h1 id="iam-and-aws-cli"><a class="markdownIt-Anchor" href="#iam-and-aws-cli"></a> IAM and AWS CLI</h1>
<h2 id="iam"><a class="markdownIt-Anchor" href="#iam"></a> IAM</h2>
<ul>
<li>Identity and Access Management, Global service</li>
<li>Root Account: created by default, shouldn’t be used or shared</li>
<li>Users are people within your organization, and can be grouped</li>
<li>Groups only contain users, not other groups</li>
<li>Users don’t have to belong to a group, and user can belong to multiple groups</li>
</ul>
<h3 id="iam-permissions"><a class="markdownIt-Anchor" href="#iam-permissions"></a> IAM Permissions</h3>
<ul>
<li>Users or Groups can be assigned JSON documents called policies</li>
<li>These policies define the permissions of the users</li>
<li>In AWS you apply the least privilege principle, don’t give more permissions than a user needs</li>
</ul>
<h3 id="iam-policies-structure"><a class="markdownIt-Anchor" href="#iam-policies-structure"></a> IAM Policies Structure</h3>
<ul>
<li>Consist of
<ul>
<li>Version: policy language version, always include ‘2012-10-17’</li>
<li>Id: an identifier for the policy (optional)</li>
<li>Statement: one or more individual statements (required)</li>
</ul>
</li>
<li>Statements consists of
<ul>
<li>Sid: an identifier for the statement (optional)</li>
<li>Effect: whether the statement allows or denies access (Allow, Deny)</li>
<li>Principal: account/user/role to which this policy applied to</li>
<li>Action: list of actions this policy allows or denies</li>
<li>Resource: list of resources to which the actions applied to</li>
<li>Condition: conditions for when this policy is in effect (optional)</li>
</ul>
</li>
</ul>
<h3 id="how-can-users-access-aws"><a class="markdownIt-Anchor" href="#how-can-users-access-aws"></a> How can users access AWS?</h3>
<ol>
<li>AWS Management Console: protected by password + MFA</li>
<li>AWS Command Line Interface: protected by access keys</li>
<li>AWS SDK: for code, protected by access keys</li>
</ol>
<ul>
<li>Access key ID = username</li>
<li>Secret access key = password</li>
</ul>
<h3 id="iam-roles-for-services"><a class="markdownIt-Anchor" href="#iam-roles-for-services"></a> IAM Roles for services</h3>
<ul>
<li>Some AWS service will need to perform actions on your behalf</li>
<li>we will assign permissions to AWS services with IAM Roles</li>
<li>Common roles:
<ul>
<li>EC2 instance roles</li>
<li>lambda function roles</li>
<li>roles for CloudFormation</li>
</ul>
</li>
</ul>
<h3 id="iam-security-tools"><a class="markdownIt-Anchor" href="#iam-security-tools"></a> IAM Security Tools</h3>
<ul>
<li>IAM credentials report (account-level)
<ul>
<li>a report that lists all your account’s users and the status of their various credentials</li>
</ul>
</li>
<li>IAM Access Advisor (user-level)
<ul>
<li>Access Advisor shows the service permissions granted to a user and when those services were last accessed</li>
<li>you can use this information to revise your policies</li>
</ul>
</li>
</ul>
<h3 id="iam-guidelines-and-best-practices"><a class="markdownIt-Anchor" href="#iam-guidelines-and-best-practices"></a> IAM Guidelines and Best practices</h3>
<ul>
<li>Don’t user root account except for AWS account setup</li>
<li>One physical user = one AWS user</li>
<li>assign users to groups and assign permissions to groups</li>
<li>create a strong password policy</li>
<li>use and enforce the use of MFA</li>
<li>create and use roles for giving permissions to AWS services</li>
<li>use access keys for CLI and SDK</li>
<li>Audit permissions of your account with the IAM Credential Report</li>
<li>Never share IAM users and access keys</li>
</ul>
<h1 id="ec2"><a class="markdownIt-Anchor" href="#ec2"></a> EC2</h1>
<ul>
<li>EC2 is one of the most popular of AWS offering</li>
<li>EC2 = Elastic Compute Cloud = Infrastructure as a Service</li>
<li>It mainly consists in the capability of
<ul>
<li>Renting virtual machines (EC2)</li>
<li>Storing data on virtual drives (EBS)</li>
<li>Distributing load across machines (ELB)</li>
<li>Scaling the services using an auto-scaling group (ASG)</li>
</ul>
</li>
<li>Knowing EC2 is fundamental to understand how to Cloud works</li>
</ul>
<h2 id="ec2-instance-types-overview"><a class="markdownIt-Anchor" href="#ec2-instance-types-overview"></a> EC2 Instance Types - Overview</h2>
<ul>
<li>you can use different types of EC2 instances that are optimised for different use cases</li>
<li>e.g. m5.2xlarge
<ul>
<li>m: instance class</li>
<li>5: generation</li>
<li>2xlarge: size within the instance class</li>
</ul>
</li>
</ul>
<h3 id="general-purpose"><a class="markdownIt-Anchor" href="#general-purpose"></a> General Purpose</h3>
<ul>
<li>Great for a diversity of workloads such as web servers or code repositories</li>
<li>Balance between
<ul>
<li>Compute</li>
<li>Memory</li>
<li>Networking</li>
</ul>
</li>
</ul>
<h3 id="compute-optimized"><a class="markdownIt-Anchor" href="#compute-optimized"></a> Compute Optimized</h3>
<ul>
<li>Great for compute intensive tasks that require high performance processors
<ul>
<li>Batch processing workloads</li>
<li>media transcoding</li>
<li>high performance web servers</li>
<li>high performance computing</li>
<li>scientific modeling and machine learning</li>
<li>dedicated gaming servers</li>
</ul>
</li>
</ul>
<h3 id="memory-optimized"><a class="markdownIt-Anchor" href="#memory-optimized"></a> Memory Optimized</h3>
<ul>
<li>Fast performance for workloads that process large data sets in memory</li>
<li>high performance, relational/non-relational databases</li>
<li>distributed web scale cache stores</li>
<li>in memory databases optimized for BI</li>
<li>applications performing real time processing of big unstructured data</li>
</ul>
<h3 id="storage-optimized"><a class="markdownIt-Anchor" href="#storage-optimized"></a> Storage Optimized</h3>
<ul>
<li>great for storage intensive tasks that require high, sequential read and write access to large data sets on local storage</li>
<li>high frequency online transaction processing systems</li>
<li>relational and NoSQL databases</li>
<li>cache for in memory databases</li>
<li>data warehousing applications</li>
<li>distributed file systems</li>
</ul>
<h2 id="security-groups"><a class="markdownIt-Anchor" href="#security-groups"></a> Security Groups</h2>
<ul>
<li>the fundamental of network security in AWS</li>
<li>they control how traffic is allowed into or out of our EC2 instance</li>
<li>security groups only contain allow rules</li>
<li>security groups rules can reference by IP or by security group (inbound/outbound rules)</li>
</ul>
<h3 id="good-to-know"><a class="markdownIt-Anchor" href="#good-to-know"></a> Good to know</h3>
<ul>
<li>security groups can be attached to multiple instances and one instance can have multiple security groups attach to it</li>
<li>security group are locked down to a region and VPC</li>
<li>security group live outside the EC2, if traffic is blocked, the EC2 instacne won’t see it (doesn’t know it tried to get in)</li>
<li>if your application is not accessible (time out), then its a security group issue</li>
<li>if your application gives a connection failed error, then its an application error or its not launched</li>
<li>all inbound traffic is blocked by default</li>
<li>all outbound traffic is authorized by default</li>
</ul>
<h2 id="classic-ports-to-know"><a class="markdownIt-Anchor" href="#classic-ports-to-know"></a> Classic Ports to know</h2>
<ul>
<li>22 = SSH (Secure Shell) - log into a Linux instance</li>
<li>21 = FTP (File Transfer Protocol) - upload files into a file share</li>
<li>22 = SFTP (Secure File Transfer Protocol) - upload files using SSH</li>
<li>80 = HTTP - access unsecured websites</li>
<li>443 = HTTPS - access secured websites</li>
<li>3389 = RDP (Remote Desktop Protocol) - log into a Windows instance</li>
</ul>
<h2 id="ec2-instances-purchasing-options"><a class="markdownIt-Anchor" href="#ec2-instances-purchasing-options"></a> EC2 Instances purchasing options</h2>
<ul>
<li>on-demand instance: short workload, predictable pricing</li>
<li>reserved, minimum 1 year:
<ul>
<li>reserved instances: long workloads</li>
<li>convertible reserved instances: long workloads with flexible instances</li>
<li>scheduled reserved instances: example - every Thursday between 3 and 6 pm</li>
</ul>
</li>
<li>Spot instance: short workloads, cheap and can lose instances (less reliable)</li>
<li>dedicated hosts: book an entire physical server, control instance placement</li>
</ul>
<h3 id="ec2-on-demand"><a class="markdownIt-Anchor" href="#ec2-on-demand"></a> EC2 on demand</h3>
<ul>
<li>
<p>pay for what you use</p>
<ul>
<li>linux - billing per second, after the first minute</li>
<li>all other os - billing per hour</li>
</ul>
</li>
<li>
<p>has the highest cost but no upfront payment</p>
</li>
<li>
<p>no long-term commitment</p>
</li>
<li>
<p>recommended for short term and un-interrupted workloads, where you can’t predict how the application will behave.</p>
</li>
</ul>
<h3 id="ec2-reserved-instances"><a class="markdownIt-Anchor" href="#ec2-reserved-instances"></a> EC2 reserved instances</h3>
<ul>
<li>up to 75% discount compared to on demand</li>
<li>reservation period: 1 year or 3 year2</li>
<li>purchasing options: no upfront / partial upfront / all upfront</li>
<li>reserve a specific instance type</li>
<li>recommended for steady state usage applications (think database)</li>
</ul>
<h4 id="convertible-reserved-instance"><a class="markdownIt-Anchor" href="#convertible-reserved-instance"></a> Convertible reserved instance</h4>
<ul>
<li>can change the EC2 instance type</li>
<li>up to 54% discount</li>
</ul>
<h4 id="scheduled-reserved-instances"><a class="markdownIt-Anchor" href="#scheduled-reserved-instances"></a> scheduled reserved instances</h4>
<ul>
<li>launch within time window you reserve</li>
<li>when you require a fraction of day / week / month</li>
<li>still commitment over 1 to 3 years</li>
</ul>
<h3 id="ec2-spot-instance"><a class="markdownIt-Anchor" href="#ec2-spot-instance"></a> EC2 Spot instance</h3>
<ul>
<li>
<p>can get a discount of up to 90% compared to on demand</p>
</li>
<li>
<p>instances that you can lose at any point of time if your max price is less than the current spot price</p>
</li>
<li>
<p>the MOST cost efficient instances in AWS</p>
</li>
<li>
<p>useful for workloads that are resilient to failure</p>
</li>
<li>
<p>not suitable for critical jobs or databases</p>
</li>
</ul>
<h4 id="spot-instance-requests"><a class="markdownIt-Anchor" href="#spot-instance-requests"></a> Spot instance requests</h4>
<ul>
<li>define max spot price and get the instance while current spot price &lt; max
<ul>
<li>the hourly spot price varies based on offer and capacity</li>
<li>if the current spot price &gt; your max price you can choose to stop or terminate your instance with a 2 minutes grace period</li>
</ul>
</li>
<li>other strategy: spot block
<ul>
<li>block spot instance during a specified time frame (1 to 6 hours) without interruptions</li>
<li>in rare situations, the instance may be reclaimed</li>
</ul>
</li>
<li>cancel the spot instance request before terminate the spot instances</li>
</ul>
<h4 id="spot-fleets"><a class="markdownIt-Anchor" href="#spot-fleets"></a> Spot fleets</h4>
<ul>
<li>spot fleets = set of spot instances + (optional) on demand instances</li>
<li>the spot fleet will try to meet the target capacity with price constraints
<ul>
<li>define possible launch pools: instance type, OS, AZ</li>
<li>can have multiple launch pools, so that the fleet can choose</li>
<li>spot fleet stops launching instnaces when reaching capacity or max cost</li>
</ul>
</li>
<li>strategies to allocate spot instances
<ul>
<li>lowest price: from the pool with the lowest price (cost optimization, short workload)</li>
<li>diversified: distributed across all pools (great for availability, long workloads)</li>
<li>capacity optimized: pool with the optimal capacity for the number of instances</li>
</ul>
</li>
<li>spot fleets allow us to automatically request spot instance with the lowest price</li>
</ul>
<h3 id="ec2-dedicated-hosts"><a class="markdownIt-Anchor" href="#ec2-dedicated-hosts"></a> EC2 dedicated hosts</h3>
<ul>
<li>
<p>an Amazon EC2 dedicated host is a physical server with EC2 instance capacity fully dedicated to your use, dedicated hosts can help you address compliance requirements and reduce costs by allowing you to use your existing server-bound software licenses</p>
</li>
<li>
<p>allocated for your account for a 3 year period reservation</p>
</li>
<li>
<p>more expensive</p>
</li>
<li>
<p>useful for software that have complicated licensing model (BYOL - bring your own license)</p>
</li>
<li>
<p>or for companies that have strong regulatory or compliance needs</p>
</li>
</ul>
<h2 id="elastic-ip"><a class="markdownIt-Anchor" href="#elastic-ip"></a> Elastic IP</h2>
<ul>
<li>
<p>when you stop and then start an EC2 instance, it can change its public IP</p>
</li>
<li>
<p>if you need to have a fixed public IP for your instance, you need an Elastic IP</p>
</li>
<li>
<p>an Elastic IP is a public IPv4 IP you own as long as you don’t delete it</p>
</li>
<li>
<p>you can attach it to one instance at a time</p>
</li>
<li>
<p>with an Elastic IP, you can mask the failure of an instance or software by rapidly remapping the address to another instance in your account (not common)</p>
</li>
<li>
<p>you can only have 5 Elastic IP in your account</p>
</li>
<li>
<p>Overall, try to avoid using Elastic IP</p>
<ul>
<li>they often reflect poor architectrual decisions</li>
<li>instead, use a random public IP and register a DNS name to it</li>
<li>use a load balancer and don’t use a public IP</li>
</ul>
</li>
</ul>
<h2 id="placement-groups"><a class="markdownIt-Anchor" href="#placement-groups"></a> Placement Groups</h2>
<ul>
<li>Sometimes you want control over the EC2 instance placement strategy</li>
<li>when you create a placement group, you specify one of the following strategies for the group
<ul>
<li>Cluster: clusters instances into a low latency group in a single AZ</li>
<li>Spread: spreads instances across underlying hardware (max 7 instances per group per AZ) - critical applications</li>
<li>partition: spreads instances across many different partitions (which rely on different sets of racks) within an AZ, Scales to 100 of EC2 instances per group (Hadoop, Cassandra, Kafka), the instances in a partition do not share racks with the instances in the other partitions, a partition failure can affect many EC2 but won’t affect other partitions</li>
</ul>
</li>
</ul>
<h2 id="elastic-network-interfaces-eni"><a class="markdownIt-Anchor" href="#elastic-network-interfaces-eni"></a> Elastic Network Interfaces (ENI)</h2>
<ul>
<li>logical component in a VPC that represents a virtual network card</li>
<li>the ENI can have the following attributes
<ul>
<li>Primary private IPv4, one or more secondary IPv4</li>
<li>One Elastic IP per private IPv4</li>
<li>one public IPv4</li>
<li>one or more security groups</li>
<li>a MAC address</li>
</ul>
</li>
<li>you can create ENI independently and attach them on the fly on EC2 instances for failover</li>
<li>bound to a specific AZ</li>
</ul>
<h2 id="ec2-hibernate"><a class="markdownIt-Anchor" href="#ec2-hibernate"></a> EC2 Hibernate</h2>
<ul>
<li>
<p>Stop: the data on disk (EBS) is kept intact in the next start</p>
</li>
<li>
<p>Terminate: any EBS volums (root) also setup to be destroyed is lost</p>
</li>
<li>
<p>First start: the OS boots and the EC2 user data script is run</p>
</li>
<li>
<p>Following starts: the OS boots up</p>
</li>
<li>
<p>the your application starts, caches get warmed up and that can take time</p>
</li>
<li>
<p>Introducing EC2 Hibernate</p>
<ul>
<li>RAM state is preserved</li>
<li>the instance boot is much faster (the OS is not stopped / restarted)</li>
<li>under the hood: the RAM state is written to a file in the root EBS volume</li>
<li>the root EBS volume must be encrypted</li>
</ul>
</li>
<li>
<p>Use cases</p>
<ul>
<li>long running process</li>
<li>saving the RAM state</li>
<li>servcies that take time to initialize</li>
</ul>
</li>
</ul>
<h2 id="ec2-nitro"><a class="markdownIt-Anchor" href="#ec2-nitro"></a> EC2 Nitro</h2>
<ul>
<li>underlying platform for the next generation of EC2 instances</li>
<li>new virtualization technology</li>
<li>allows for better performance
<ul>
<li>better networking options</li>
<li>Higher Speed EBS</li>
</ul>
</li>
<li>better underlying security</li>
</ul>
<h2 id="ec2-vcpu"><a class="markdownIt-Anchor" href="#ec2-vcpu"></a> EC2 vCPU</h2>
<ul>
<li>EC2 instance comes with a combination of RAM and vCPU</li>
<li>in some cases, you may want to change the vCPU options
<ul>
<li>change the number of CPU cores</li>
<li>chagne the number of vCPUs (threads) per core</li>
</ul>
</li>
<li>only specified during instance launch</li>
</ul>
<h2 id="ec2-capacity-reservations"><a class="markdownIt-Anchor" href="#ec2-capacity-reservations"></a> EC2 capacity reservations</h2>
<ul>
<li>ensure you have EC2 capacity when needed</li>
<li>manual or planned end date for the reservation</li>
<li>no need for 1 or 3 year commitment</li>
<li>capacity access is immediate, you get billed as soon as it starts</li>
<li>combine with reserved instances and savings plans to do cost saving</li>
</ul>
<h2 id="ec2-ebs"><a class="markdownIt-Anchor" href="#ec2-ebs"></a> EC2 EBS</h2>
<ul>
<li>an EBS volume is a network drive you can attach to your instances while they run</li>
<li>it allows your instances to persist data, even after their termination</li>
<li>they can only be mounted to one instance at a time (in some cases, some EBS can be attached to multiple EC2 instances at same time)</li>
<li>they are bound to a specific AZ</li>
<li>think of them as a network USB stick</li>
</ul>
<h3 id="ebs-volume"><a class="markdownIt-Anchor" href="#ebs-volume"></a> EBS volume</h3>
<ul>
<li>its a network drive
<ul>
<li>it uses the network to communicate the instance, which means there might be a bit of latency</li>
<li>it can be detached from an EC2 instance and attached to another one quickly</li>
</ul>
</li>
<li>its locked down to an AZ
<ul>
<li>an EBS volume in us-east-1a cannot be attached to an instance in us-east-1b</li>
<li>to move a volume across, you first need to snapshot it</li>
</ul>
</li>
<li>have a provisioned capacity
<ul>
<li>you get billed for all the provisioned capacity</li>
<li>you can increase the capacity of the drive over time</li>
</ul>
</li>
</ul>
<h3 id="ebs-volume-types"><a class="markdownIt-Anchor" href="#ebs-volume-types"></a> EBS volume types</h3>
<ul>
<li>gp2 / gp3: general purpose SSD
<ul>
<li>gp3: newer generation, IOPS and throughput are independet</li>
<li>gp2: IOPS and throughput are linked</li>
</ul>
</li>
<li>io1 / io2: highest performance SSD</li>
<li>st1: low cost HDD, for throughput intensive workloads</li>
<li>sc1: lowest cost HDD</li>
<li>EBS volumes are characterized in Size / Throughput / IOPS</li>
</ul>
<h3 id="ebs-multi-attach-io1io2-family"><a class="markdownIt-Anchor" href="#ebs-multi-attach-io1io2-family"></a> EBS multi-attach - io1/io2 family</h3>
<ul>
<li>attach the same EBS volume to multiple EC2 instances in the same AZ</li>
<li>each instance has full read and write permissions to the volume</li>
<li>applications must manage concurrent write operations</li>
<li>must use a file system thta’s cluster-aware</li>
</ul>
<h3 id="ebs-encryption"><a class="markdownIt-Anchor" href="#ebs-encryption"></a> EBS encryption</h3>
<ul>
<li>when you create an encrypted EBS volume, you get the following
<ul>
<li>data at rest is encrypted inside the volume</li>
<li>all the data in flight mobing between the instance and the volume is encrypted</li>
<li>all snapshots are encrypted</li>
<li>all volumes created from the snapshot are encryped</li>
</ul>
</li>
<li>encryption and decryption are handled transparently</li>
<li>encryption has a minimal impact on latency</li>
<li>EBS encryption leverages keys from KMS (AES-256)</li>
<li>copying an unencrypted snapshot allows encryption</li>
</ul>
<h3 id="ebs-raid"><a class="markdownIt-Anchor" href="#ebs-raid"></a> EBS RAID</h3>
<h4 id="raid-0"><a class="markdownIt-Anchor" href="#raid-0"></a> RAID 0</h4>
<ul>
<li>increase performance</li>
<li>combining 2 or more volumes and getting the total disk space and I/O</li>
<li>but if one disk fails, all the data is failed</li>
<li>using this, we can have a very big disk with a lot of IOPS</li>
</ul>
<h4 id="raid-1"><a class="markdownIt-Anchor" href="#raid-1"></a> RAID 1</h4>
<ul>
<li>increase fault tolerance</li>
<li>mirroring a volume to another</li>
<li>we have to send the data to two EBS volume at the same time (2 * network)</li>
</ul>
<h3 id="ebs-delete-on-termination"><a class="markdownIt-Anchor" href="#ebs-delete-on-termination"></a> EBS delete on termination</h3>
<ul>
<li>controls the EBS behaviour when an EC2 instance terminates
<ul>
<li>by default, the root EBS volume is delete (attribute enabled)</li>
<li>by default, any other attached EBS volume is not deleted (attribute disabled)</li>
</ul>
</li>
<li>this can be controlled by the AWS console / CLI</li>
<li>use case: preseve root volume when instance is terminated (disable the attribute)</li>
</ul>
<h2 id="ebs-snapshots"><a class="markdownIt-Anchor" href="#ebs-snapshots"></a> EBS Snapshots</h2>
<ul>
<li>make a backup (snapshot) of your EBS volume at a point of time</li>
<li>not necessary to detach volume to do snapshot, but recommended</li>
<li>can copy snapshots across AZ or Region</li>
<li>can create volume from snapshot</li>
</ul>
<h2 id="efs-elastic-file-system"><a class="markdownIt-Anchor" href="#efs-elastic-file-system"></a> EFS - Elastic File System</h2>
<ul>
<li>Managed NFS (network file system) that can be mounted on many EC2</li>
<li>EFS works with EC2 instances in multi-AZ</li>
<li>highly avialble, scalable, expensive, pay per use</li>
<li>uses security group to control access to EFS</li>
<li>compatible with Linux based AMI (not Windows)</li>
<li>encryption at rest using KMS</li>
<li>to mount EFS to EC2, you need to add EC2 security group as a inbound rule in EFS security group</li>
</ul>
<h3 id="performance-and-storage-class"><a class="markdownIt-Anchor" href="#performance-and-storage-class"></a> Performance and Storage Class</h3>
<ul>
<li>Performance mode
<ul>
<li>general purpose</li>
<li>MAX I/O</li>
</ul>
</li>
<li>Throughput mode
<ul>
<li>bursting</li>
<li>provisioned</li>
</ul>
</li>
<li>Storage tiers
<ul>
<li>standard</li>
<li>infrequent access, cost to retrieve files, lower price to store</li>
</ul>
</li>
</ul>
<h2 id="ami-overview"><a class="markdownIt-Anchor" href="#ami-overview"></a> AMI Overview</h2>
<ul>
<li>Amazon Machien Image</li>
<li>a customization of an EC2 instance
<ul>
<li>you add your own software, configuration, operating system etc…</li>
<li>faster boot / configuration time because all your software is pre-packaged</li>
</ul>
</li>
<li>AMI are built for a specific region and can be copied across regions</li>
<li>you can launch EC2 instance from
<ul>
<li>public AMI: provided by AWS</li>
<li>your own AMI: you make and maintain them yourself</li>
<li>AWS marketplace AMI: an AMI someone else made</li>
</ul>
</li>
</ul>
<h2 id="ec2-instance-store"><a class="markdownIt-Anchor" href="#ec2-instance-store"></a> EC2 instance store</h2>
<ul>
<li>EBS volumes are network drives with good but limited performance</li>
<li>if you need a high performance hardware disk, use EC2 instance store</li>
<li>better I/O performance</li>
<li>EC2 instance store lose their storage if they are stopped (ephemeral)</li>
<li>good for buffer / cache / scratch data / temporary content</li>
<li>risk of data loss if hardware fails</li>
<li>backups and replication are your responsibility</li>
</ul>
<h2 id="ec2-metadata"><a class="markdownIt-Anchor" href="#ec2-metadata"></a> EC2 Metadata</h2>
<ul>
<li>AWS EC2 instance metadata is powerful but one of the least known features to developers</li>
<li>it allows EC2 instance to learn about themselves without using an IAM role for that purpose</li>
<li>the URL is <code>http://169.254.169.254/latest/meta-data</code></li>
<li>you can retrieve the IAM role name from the metadata, but you CANNOT retrieve the IAM policy</li>
</ul>
<h1 id="elastic-load-balancer"><a class="markdownIt-Anchor" href="#elastic-load-balancer"></a> Elastic Load Balancer</h1>
<h2 id="what-is-load-balancing"><a class="markdownIt-Anchor" href="#what-is-load-balancing"></a> What is load balancing?</h2>
<ul>
<li>load balancers are servers that forward internet traffic to multiple servers (EC2 instances) downstream</li>
</ul>
<h2 id="why-use-a-load-balancer"><a class="markdownIt-Anchor" href="#why-use-a-load-balancer"></a> Why use a load balancer?</h2>
<ul>
<li>
<p>Spread load across multiple downstream instances</p>
</li>
<li>
<p>expose a single point of access (DNS) to your application</p>
</li>
<li>
<p>seamlessly handle failures of downstream instances</p>
</li>
<li>
<p>do regular health checks to your instances</p>
</li>
<li>
<p>provide SSL termination (HTTPS) for your websites</p>
</li>
<li>
<p>enforce stickness with cookies</p>
</li>
<li>
<p>high availability across zones</p>
</li>
<li>
<p>separate public traffic from private traffic</p>
</li>
<li>
<p>An ELB is a managed load balancer</p>
<ul>
<li>AWS guarantees that it will be working</li>
<li>AWS takes care of upgrades, maintenance, high availability</li>
<li>AWS provides only a few configuration knobs</li>
</ul>
</li>
<li>
<p>it costs less to setup your own load balancer but it will be a lot more effort on your end</p>
</li>
<li>
<p>it is integrated with many AWS offering / services</p>
</li>
</ul>
<h2 id="health-checks"><a class="markdownIt-Anchor" href="#health-checks"></a> Health Checks</h2>
<ul>
<li>Health Checks are crucial for load balancers</li>
<li>they enable the load balancer to know if instances it forwards traffic to are available to reply to requests</li>
<li>the health check is done on a port and a route (/health is common)</li>
<li>if the response is not 200, then the instance is unhealthy</li>
</ul>
<h2 id="classic-load-balanceers-v1"><a class="markdownIt-Anchor" href="#classic-load-balanceers-v1"></a> Classic Load Balanceers (v1)</h2>
<ul>
<li>supports TCP (layer 4), HTTP and HTTPS (layer 7)</li>
<li>health checks are TCP or HTTP based</li>
</ul>
<h2 id="application-load-balancer-v2"><a class="markdownIt-Anchor" href="#application-load-balancer-v2"></a> Application Load Balancer (v2)</h2>
<ul>
<li>Application load balancer is layer 7 (HTTP)</li>
<li>load balancing to multiple HTTP applications across machines (target groups)</li>
<li>load balancing to multiple applications on the same machine (containers)</li>
<li>support for HTTP/2 and WebSocket</li>
<li>Support redirects (from HTTP to HTTPS)</li>
<li>Routing tables to differnt target groups
<ul>
<li>routing based on path in URL (<a target="_blank" rel="noopener" href="http://example.com/users">example.com/users</a> &amp; <a target="_blank" rel="noopener" href="http://example.com/posts">example.com/posts</a>)</li>
<li>routing based on hostname in URL (<a target="_blank" rel="noopener" href="http://one.example.com">one.example.com</a> &amp; <a target="_blank" rel="noopener" href="http://other.example.com">other.example.com</a>)</li>
<li>routing based on query string, headers (<a target="_blank" rel="noopener" href="http://example.com/users?id=123&amp;other=false">example.com/users?id=123&amp;other=false</a>)</li>
</ul>
</li>
<li>ALB are a great fit for micro services and container based application (Docker and Amazon ECS)</li>
<li>Has a port mapping feature to redirect to a dynamic port in ECS</li>
<li>in comparison, we would need multiple CLB, one for each application</li>
</ul>
<h3 id="target-groups"><a class="markdownIt-Anchor" href="#target-groups"></a> Target Groups</h3>
<ul>
<li>EC2 instances can be managed by an Auto Scaling Group - HTTP</li>
<li>ECS tasks (managed by ECS itself) - HTTP</li>
<li>Lambda function - HTTP request is translated into a JSON event</li>
<li>IP addresses - must be private IPs</li>
<li>ALB can route to multiple target groups</li>
<li>health checks are at the target group level</li>
</ul>
<h2 id="network-load-balancer-v2"><a class="markdownIt-Anchor" href="#network-load-balancer-v2"></a> Network Load Balancer (v2)</h2>
<ul>
<li>network load balancer (layer 4)
<ul>
<li>forward TCP and UDP traffic to your instance</li>
<li>handle millions of request per second</li>
<li>less latency ~ 100 ms (vs 400 ms for ALB)</li>
</ul>
</li>
<li>NLB has one static IP per AZ, and supports assigning Elastic IP (helpful for whitelisting specific IP)</li>
<li>NLB are used for extreme performance, TCP or UDP traffic</li>
<li>Not included in AWS free tier</li>
</ul>
<h2 id="sticky-sessions-session-affinity"><a class="markdownIt-Anchor" href="#sticky-sessions-session-affinity"></a> Sticky Sessions (Session Affinity)</h2>
<ul>
<li>
<p>it is possible to implement stickness so that the same client is always redirected to the same instance behind a load balancer</p>
</li>
<li>
<p>this works for CLB and ALB</p>
</li>
<li>
<p>the cookie used for stickness has an expiration date you control</p>
</li>
<li>
<p>use case: make sure the user doesn’t lost his session data</p>
</li>
<li>
<p>enabling stickness may bring imbalance to the load over the backend EC2 instances</p>
</li>
<li>
<p>Application based cookies</p>
<ul>
<li>custom cookie
<ul>
<li>generated by the target</li>
<li>can include any custom attributes required by the application</li>
<li>cookie name must be specified individually for each target group</li>
<li>don’t use AWSALB, AWSALBAPP, AWSALBTG (reserved for use by the ELB)</li>
</ul>
</li>
<li>application cookie
<ul>
<li>generated by the load balancer</li>
<li>cookie name is AWSALBAPP</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Duration based cookie</p>
<ul>
<li>cookie generated by the load balancer</li>
<li>cookie name is AWSALB for ALB, AWSELB for CLB</li>
</ul>
</li>
</ul>
<h2 id="cross-zone-load-balancing"><a class="markdownIt-Anchor" href="#cross-zone-load-balancing"></a> Cross Zone Load Balancing</h2>
<ul>
<li>each load balancer instance distribute evenly across all registered instances in all AZ</li>
<li>ALB
<ul>
<li>always on (can’t be disabled)</li>
<li>no charges for inter AZ data</li>
</ul>
</li>
<li>NLB
<ul>
<li>disabled by default</li>
<li>you pay charges for inter AZ data if enabled</li>
</ul>
</li>
<li>CLB
<ul>
<li>Through console =&gt; enabled by default</li>
<li>through CLI / API =&gt; disabled by default</li>
<li>no charges</li>
</ul>
</li>
</ul>
<h2 id="ssltls"><a class="markdownIt-Anchor" href="#ssltls"></a> SSL/TLS</h2>
<ul>
<li>
<p>an SSL certificate allows traffic between your clients and your load balancer to be encrypted in transit</p>
</li>
<li>
<p>SSL refers to Secure Sockets Layer, used to encrypt connections</p>
</li>
<li>
<p>TLS refers to Transport Layer Security, which is a newer version</p>
</li>
<li>
<p>TLS certificate are mainly used, but people still refer as SSL</p>
</li>
<li>
<p>public SSL certificates are issued by Certificate Authorities (CA)</p>
</li>
<li>
<p>SSL certificates have an expiration date and must be renewed</p>
</li>
<li>
<p>the load balancer uses an X.509 certificate (SSL/TLS server certificate)</p>
</li>
<li>
<p>you can manage certificates using ACM (AWS Certificate Manager)</p>
</li>
<li>
<p>You can create upload your own certificate</p>
</li>
<li>
<p>HTTPS listner</p>
<ul>
<li>you must specify a default certificate</li>
<li>you can add an optional list of certs to support multiple domains</li>
<li>clients can use SNI (Server Name Indication) to specify the host name they reach</li>
<li>ability to specify a security policy to support older version of SSL/TLS</li>
</ul>
</li>
</ul>
<h3 id="ssl-server-name-indication"><a class="markdownIt-Anchor" href="#ssl-server-name-indication"></a> SSL - Server Name Indication</h3>
<ul>
<li>SNI solves the problem of loading multiple SSL certificate onto one web server (to serve multiple website)</li>
<li>its newer protocol, and requires the client to indicate the hostname of the target server in the initial SSL handshake</li>
<li>the server will then find the correct certificate, or return the default one</li>
<li>Only works for ALB and NLB, CloudFront</li>
<li>doesn’t work for CLB</li>
</ul>
<h2 id="elb-connection-draining"><a class="markdownIt-Anchor" href="#elb-connection-draining"></a> ELB Connection Draining</h2>
<ul>
<li>Time to complete in-flight requests while the instance is de-registering or unhealthy</li>
<li>stops sending new requests to the instance which is de-registering</li>
<li>between 1 to 3600 seconds, default is 300 seconds</li>
<li>can be disabled (set to zero)</li>
<li>set to a low value if your requests are short</li>
</ul>
<h1 id="auto-scaling-group"><a class="markdownIt-Anchor" href="#auto-scaling-group"></a> Auto Scaling Group</h1>
<ul>
<li>
<p>in real life, the load on your websites and application can change</p>
</li>
<li>
<p>in the cloud, you can create and get rid of servers very quickly</p>
</li>
<li>
<p>the goal of an Auto Scaling Group is to</p>
<ul>
<li>scale out to match an increased load</li>
<li>scale in to match an decreased load</li>
<li>ensure we have a minimum and maximum number of machines running</li>
<li>automatically register new instances to a load balancer</li>
</ul>
</li>
</ul>
<h2 id="asg-attributes"><a class="markdownIt-Anchor" href="#asg-attributes"></a> ASG attributes</h2>
<ul>
<li>A launch configuration
<ul>
<li>AMI + instance type</li>
<li>EC2 user data</li>
<li>EBS volumes</li>
<li>Security groups</li>
<li>SSH key pair</li>
</ul>
</li>
<li>min size / max size / initial capacity</li>
<li>network + subnets information</li>
<li>load balancer information</li>
<li>scaling policies</li>
</ul>
<h2 id="auto-scaling-alarms"><a class="markdownIt-Anchor" href="#auto-scaling-alarms"></a> Auto Scaling Alarms</h2>
<ul>
<li>it is possible to scale an ASG based on CloudWatch alarms</li>
<li>an alarm monitors a metric (such as average CPU)</li>
<li>metrics are computed for the overall ASG instances</li>
</ul>
<h2 id="auto-scaling-new-rules"><a class="markdownIt-Anchor" href="#auto-scaling-new-rules"></a> Auto Scaling New Rules</h2>
<ul>
<li>it is now possible to define better auto scaling rules that are directly managed by EC2
<ul>
<li>target average CPU usage</li>
<li>number of requests on the ELB per instance</li>
<li>average network in</li>
<li>average network out</li>
</ul>
</li>
<li>these rules are easier to setup and can make more sense</li>
</ul>
<h2 id="auto-scaling-custom-metric"><a class="markdownIt-Anchor" href="#auto-scaling-custom-metric"></a> Auto Scaling Custom Metric</h2>
<ol>
<li>send custom metric from application on EC2 to CloudWatch</li>
<li>Create CloudWatch alarm to react to low / high values</li>
<li>use the CloudWatch alarm as the scaling policy for ASG</li>
</ol>
<h2 id="good-to-know-2"><a class="markdownIt-Anchor" href="#good-to-know-2"></a> Good to know</h2>
<ul>
<li>scaling policies can be on CPU, network… and can even be on custom metrics or based on a schedule</li>
<li>ASGs use launch configurations or launch templates</li>
<li>to update an ASG, you must provide a new launch configuration / launch template</li>
<li>IAM roles attached to an ASG will get assigned to EC2 instances</li>
<li>ASG are free, you pay for the underlying resources being launched</li>
<li>having instances under an ASG means that if they get terminated for whatever reason, the ASG will automatically create a new one as a replacement.</li>
<li>ASG can terminate instances marked as unhealthy by an ELB (and then replace them)</li>
</ul>
<h2 id="auto-scaling-groups-dynamic-scaling-policies"><a class="markdownIt-Anchor" href="#auto-scaling-groups-dynamic-scaling-policies"></a> Auto Scaling Groups - Dynamic Scaling Policies</h2>
<ul>
<li>target tracking scaling
<ul>
<li>most simple and easy to setup</li>
<li>example: I want to average ASG CPU to stay at around 40%</li>
</ul>
</li>
<li>Simple / Step Scaling
<ul>
<li>When a CloudWatch alarm is triggered (example: CPU &gt; 70%), then add 2 units</li>
<li>when a CloudWatch alarm is triggered (example: CPU &lt; 30%), then remove 1 unit</li>
</ul>
</li>
<li>Scheduled Actions
<ul>
<li>anticipate a scaling based on known usage patterns</li>
<li>example: increase the min capacity to 10 at 5pm on Fridays</li>
</ul>
</li>
<li>predictive scaling
<ul>
<li>continuously forecast load and schedule scaling ahead</li>
</ul>
</li>
</ul>
<h2 id="good-metrics-to-scale-on"><a class="markdownIt-Anchor" href="#good-metrics-to-scale-on"></a> Good metrics to scale on</h2>
<ul>
<li>CPU Utilization
<ul>
<li>average CPU utilization across your instances</li>
</ul>
</li>
<li>Request Count Per Target
<ul>
<li>to make sure the number of requests per EC2 instances is stable</li>
</ul>
</li>
<li>Average network in / out
<ul>
<li>if your application is network bound (heavy downloads / uploads)</li>
</ul>
</li>
<li>Any custom metric that you push using CloudWatch</li>
</ul>
<h2 id="scaling-cooldowns"><a class="markdownIt-Anchor" href="#scaling-cooldowns"></a> Scaling Cooldowns</h2>
<ul>
<li>After a scaling activity happens, you are in the cooldown period (default 300 seconds)</li>
<li>during the cooldown period the ASG will not launch or terminate additional instances (to allow for metrics to stablize)</li>
<li>advice: use a ready to use AMI to reduce configuration time in order to be serving request faster and reduce the cooldown period</li>
</ul>
<h2 id="asg-default-termination-policy"><a class="markdownIt-Anchor" href="#asg-default-termination-policy"></a> ASG default termination policy</h2>
<ol>
<li>Find the AZ which has the most number of instances</li>
<li>if there are multiple instances in the AZ to choose from, delete the one with the oldest launch configuration</li>
</ol>
<ul>
<li>ASG tries to balance the number of instances across AZ by default</li>
</ul>
<h2 id="asg-lifecycle-hooks"><a class="markdownIt-Anchor" href="#asg-lifecycle-hooks"></a> ASG lifecycle hooks</h2>
<ul>
<li>by default as soon as an instance is launched in an ASG its inservice</li>
<li>you have the ability to perform extra steps before the instance goes in service (pending state)</li>
<li>you have the ability to perform extra actions before the instance is terminated (terminating state), like extract logs, tools etc…</li>
</ul>
<h2 id="asg-launch-template-vs-launch-configuration"><a class="markdownIt-Anchor" href="#asg-launch-template-vs-launch-configuration"></a> ASG launch template vs Launch configuration</h2>
<ul>
<li>both
<ul>
<li>ID of the AMI, the instance type, a key pair, security groups, and the other parameters that you use to launch EC2 instances</li>
</ul>
</li>
<li>Launch Configuration
<ul>
<li>must be re-created every time</li>
</ul>
</li>
<li>launch template
<ul>
<li>can have multiple versions</li>
<li>create parameters subsets (partial configuration for re-use and inheritance)</li>
<li>provision using both on demand and stop instances</li>
<li>can use T2 unlimited burst feature</li>
<li>recommended by AWS going forward</li>
</ul>
</li>
</ul>
<h1 id="rds"><a class="markdownIt-Anchor" href="#rds"></a> RDS</h1>
<ul>
<li>RDS stands for relational database service</li>
<li>its a managed DB service for DB use SQL as a query language</li>
<li>it allows you to create databases in the cloud that are managed by AWS
<ul>
<li>Postgres</li>
<li>MySQL</li>
<li>MariaDB</li>
<li>Oracle</li>
<li>Microsoft SQL Server</li>
<li>Aurora (AWS Proprietary database)</li>
</ul>
</li>
</ul>
<p>Advantage over using RDS vs deploying DB on EC2</p>
<ul>
<li>RDS is a managed service</li>
<li>automated provisioning, OS patching</li>
<li>continuous backups and restore to specific timestamp (point in time restore)</li>
<li>monitoring dashboards</li>
<li>read replicas for improved read performance</li>
<li>multi AZ setup for DR (Disaster Recovery)</li>
<li>maintenance windows for upgrades</li>
<li>scaling capability (vertical or horizontal)</li>
<li>storage backed by EBS</li>
<li>but you can’t SSH into your RDS instance (its managed by AWS)</li>
</ul>
<h2 id="rds-backups"><a class="markdownIt-Anchor" href="#rds-backups"></a> RDS backups</h2>
<ul>
<li>backups are automatically enabled in RDS</li>
<li>automatically backups
<ul>
<li>daily full backup of the database (during the maintenance windows)</li>
<li>transaction logs are backed up by RDS every 5 minutes</li>
<li>ability to restore to any point in time (from oldest backup to 5 minutes ago)</li>
<li>7 days retention (can be increased to 35 days)</li>
</ul>
</li>
<li>DB snapshots
<ul>
<li>manually triggered by the user</li>
<li>retention of backup for as long as you want</li>
</ul>
</li>
</ul>
<h2 id="rds-storage-auto-scaling"><a class="markdownIt-Anchor" href="#rds-storage-auto-scaling"></a> RDS storage auto scaling</h2>
<ul>
<li>helps you increase storage on your RDS DB instance dynamically</li>
<li>when RDS detects you are running out of free database storage, it scales automatically</li>
<li>avoid manually scaling your database storage</li>
<li>you have to set maximum storeage threshold (maximum limit for DB storage)</li>
<li>automatically modify storage if
<ul>
<li>free storage is less than 10% of allocated storage</li>
<li>low storage lasts at least 5 minuts</li>
<li>6 hours have passed since last modification</li>
</ul>
</li>
<li>useful for applications with unpredicatable workloads</li>
<li>supports all RDS database engines (MariaDB, MySQL, PostgreSQL, SQL server, Oracle)</li>
</ul>
<h2 id="read-replicas-for-read-scalability"><a class="markdownIt-Anchor" href="#read-replicas-for-read-scalability"></a> Read Replicas for read scalability</h2>
<ul>
<li>up to 5 read replicas
<ul>
<li>within AZ</li>
<li>cross AZ</li>
<li>cross region</li>
</ul>
</li>
<li>replication is ASYNC, so reads are eventually consisent, possible to read old data</li>
<li>replicas can be promoted to their own DB</li>
<li>applications must update the connection string to leverage read replicas</li>
</ul>
<h3 id="read-replicas-use-case"><a class="markdownIt-Anchor" href="#read-replicas-use-case"></a> Read replicas - use case</h3>
<ul>
<li>you have a production database that is taking on normal load</li>
<li>you want to run a reporting application to run some analytics</li>
<li>you create a read replica to run the new workload there</li>
<li>the production application is unaffected</li>
<li>read replicas are used for SELECT only kind of operations (not DELETE, INSERT, UPDATE)</li>
</ul>
<h3 id="network-cost"><a class="markdownIt-Anchor" href="#network-cost"></a> Network cost</h3>
<ul>
<li>in AWS there is a network cost when data goes from one AZ to another</li>
<li>for RDS read replicas within the same region, you don’t pay that fee</li>
<li>for read replicas across regions, you need to pay</li>
</ul>
<h3 id="multi-az-disaster-recovery"><a class="markdownIt-Anchor" href="#multi-az-disaster-recovery"></a> Multi AZ disaster recovery</h3>
<ul>
<li>SYNC replication</li>
<li>one DNS name - automatic app failaover to standby</li>
<li>increase availability</li>
<li>failover in case of loss of AZ, loss of network, instance or storage failure</li>
<li>no manual intervention in apps</li>
<li>not used for scaling (not handle traffic, only take over when master RDS fail)</li>
<li>NOTE: the read replicas can be setup as Multi AZ for disaster recovery</li>
</ul>
<h2 id="rds-from-single-az-to-multi-az"><a class="markdownIt-Anchor" href="#rds-from-single-az-to-multi-az"></a> RDS - from single AZ to multi AZ</h2>
<ul>
<li>zero downtime operation (no need to stop the DB)</li>
<li>just click on modify for the database</li>
<li>the following happens internally
<ul>
<li>a snapshot is taken</li>
<li>a new DB is restored from the snapshot in a new AZ</li>
<li>synchronization is established between the two databases</li>
</ul>
</li>
</ul>
<h2 id="rds-security-encryption"><a class="markdownIt-Anchor" href="#rds-security-encryption"></a> RDS security - encryption</h2>
<ul>
<li>at rest
<ul>
<li>possibility to encrypt the master and read replicas with AWS KMS - AES-256 encryption</li>
<li>encryption has to be defined at launch time</li>
<li>if the master is not encrypted, the read replica cannot be encrypted</li>
<li>Transparent Data Encryption (TDE) available for Oracle and SQL server</li>
</ul>
</li>
<li>in flight encryption
<ul>
<li>SSL certificate to encrypt data to RDS in flight</li>
<li>provide SSL options with trust certificate when connecting to database</li>
</ul>
</li>
</ul>
<h3 id="encryption-operations"><a class="markdownIt-Anchor" href="#encryption-operations"></a> Encryption operations</h3>
<ul>
<li>Encrypting RDS backups
<ul>
<li>snapshots of un-encrypted RDS databases are un-encrypted</li>
<li>snapshots of encrypted RDS database are encrypted</li>
<li>can copy a snapshot into an encrypted one</li>
</ul>
</li>
<li>to encrypt an un-encrypted RDS database
<ul>
<li>create a snapshot of the un-encrypted database</li>
<li>copy the snapshot and enable encryption for the snapshot</li>
<li>restore the database from the encrypted snapshot</li>
<li>migrate applications to the new database and delete the old database</li>
</ul>
</li>
</ul>
<h2 id="rds-security-network-and-iam"><a class="markdownIt-Anchor" href="#rds-security-network-and-iam"></a> RDS security - network and IAM</h2>
<ul>
<li>network security
<ul>
<li>RDS database are usually deployed within a private subnet, not in a public one</li>
<li>RDS security works by leveraging security groups (the same concept as for EC2 instances) - it controls which IP / security group can communicate with RDS</li>
</ul>
</li>
<li>access management
<ul>
<li>IAM policies help control who can manage AWS RDS (through the RDS API)</li>
<li>traditional username and password can be used to login into the database</li>
<li>IAM based authentication can be used to login into RDS for MySQL and PostgreSQL</li>
</ul>
</li>
</ul>
<h3 id="rds-iam-authentication"><a class="markdownIt-Anchor" href="#rds-iam-authentication"></a> RDS - IAM authentication</h3>
<ul>
<li>IAM database authentication works with MySQL and PostgreSQL</li>
<li>you don’t need a password, just an authentication token obtained through IAM and RDS API calls</li>
<li>auth token has a lifetime of 15 minutes</li>
<li>benefits
<ul>
<li>network in / out must be encrypted using SSL</li>
<li>IAM to centainly manage users instead of DB</li>
<li>can leverage IAM roles and EC2 instance profiles for easy integration</li>
</ul>
</li>
</ul>
<h1 id="amazon-aurora"><a class="markdownIt-Anchor" href="#amazon-aurora"></a> Amazon Aurora</h1>
<ul>
<li>Aurora is a proprietary technology from AWS (not open sourced)</li>
<li>Postgres and MySQL are both supported as Aurora DB (that means your drivers will work as if Aurora was a Postgres or MySQL database)</li>
<li>Aurora is AWS cloud optimized and claims 5x performance improvement over MySQL on RDS, over 3x performance of Postgres on RDS</li>
<li>Aurora storage automatically grows from 10 GB to 64 TB</li>
<li>Aurora can have 15 replicas while MySQL has up to 5, and the replication process is faster</li>
<li>failover in Aurora is instantaneous</li>
<li>Aurora costs more then RDS (20% more), but is more efficient</li>
</ul>
<h2 id="aurora-high-availability-and-read-scaling"><a class="markdownIt-Anchor" href="#aurora-high-availability-and-read-scaling"></a> Aurora High Availability and Read Scaling</h2>
<ul>
<li>6 copies of your data across 3 AZ
<ul>
<li>4 copies out of 6 needed for writes</li>
<li>3 copies out of 6 needed for reads</li>
<li>self healing with peer to peer replication</li>
<li>storage is striped across 100s of volumes</li>
</ul>
</li>
<li>one Aurora instance takes writes (master)</li>
<li>automated failover for master in less than 30 seconds</li>
<li>master + up to 15 Aurora read replicas serve reads</li>
<li>support for cross region replication</li>
</ul>
<h2 id="aurora-custom-endpoints"><a class="markdownIt-Anchor" href="#aurora-custom-endpoints"></a> Aurora - Custom Endpoints</h2>
<ul>
<li>define a subset of Aurora instances as a custom endpoint</li>
<li>example: run analytical queries on specific replicas</li>
<li>the reader endpoint is generally not used after defining custom endpoints</li>
</ul>
<h2 id="aurora-serverless"><a class="markdownIt-Anchor" href="#aurora-serverless"></a> Aurora serverless</h2>
<ul>
<li>automated database instantiation and auto scaling based on actual usage</li>
<li>good for infrequent intermittent or unpredictable workloads</li>
<li>no capacity planning needed</li>
<li>pay per second, can be more cost effective</li>
</ul>
<h2 id="aurora-multi-master"><a class="markdownIt-Anchor" href="#aurora-multi-master"></a> Aurora Multi-Master</h2>
<ul>
<li>in case you want immediate failover for write node (HA)</li>
<li>every node does Read and write - vs - promoting a read replica as the new master (faster failover)</li>
</ul>
<h1 id="amazon-elasticache"><a class="markdownIt-Anchor" href="#amazon-elasticache"></a> Amazon ElastiCache</h1>
<ul>
<li>the same way RDS is to get managed relational databases</li>
<li>elastiCache is to get managed Redis or Memcached</li>
<li>caches are in memory databases with really high performance, low latency</li>
<li>helps reduce load off databases for read intensive workloads</li>
<li>helps make your application stateless</li>
<li>AWS takes care of OS maintenance / patching, optimization, setup, configuration, monitoring, failure recovery and backups</li>
<li>using ElastiCache involves heavy application code changes</li>
</ul>
<h2 id="db-cache"><a class="markdownIt-Anchor" href="#db-cache"></a> DB Cache</h2>
<ul>
<li>applications queries ElastiCache, if not available, get from RDS and store in ElastiCache</li>
<li>htlps relieve load in RDS</li>
<li>Cache must have an invalidation strategy to make sure only the most current data is used in there (LRU, LFU)</li>
</ul>
<h2 id="user-session-store"><a class="markdownIt-Anchor" href="#user-session-store"></a> User session store</h2>
<ul>
<li>user logs into any of the application</li>
<li>the application wrties the session data into ElastiCache</li>
<li>the user hits another instance of our application</li>
<li>the instance retrieve the session data and the user is already logged in</li>
</ul>
<h2 id="redis"><a class="markdownIt-Anchor" href="#redis"></a> Redis</h2>
<ul>
<li>Multi AZ witi auto faliover</li>
<li>read replicas to scale reads and have High Availability</li>
<li>data durability using AOF persistence</li>
<li>backup and restore features</li>
</ul>
<h2 id="memcached"><a class="markdownIt-Anchor" href="#memcached"></a> Memcached</h2>
<ul>
<li>multi-node for partitioning of data (sharding)</li>
<li>no high availability (replication)</li>
<li>non persistent</li>
<li>no backup and restore</li>
<li>multi-threaded architecture</li>
</ul>
<h2 id="patterns-for-elasticache"><a class="markdownIt-Anchor" href="#patterns-for-elasticache"></a> Patterns for ElastiCache</h2>
<ul>
<li>Lazy loading
<ul>
<li>all the read data is cached, data can become stale in cache</li>
</ul>
</li>
<li>write through
<ul>
<li>adds or update data in the cache when written to a DB (no stale data)</li>
</ul>
</li>
<li>session store:
<ul>
<li>store temporary session data in a cache (using TTL features)</li>
</ul>
</li>
</ul>
<h2 id="reids-use-case"><a class="markdownIt-Anchor" href="#reids-use-case"></a> Reids use case</h2>
<ul>
<li>Gaming leaderboard</li>
<li>Redis Sorted sets guarantee both uniqueness and element ordering</li>
<li>each time a new element added, its ranked in real time, then added in correct order</li>
</ul>
<h1 id="route-53"><a class="markdownIt-Anchor" href="#route-53"></a> Route 53</h1>
<ul>
<li>route 53 is a managed DNS (domain name system)</li>
<li>DNS is a collection of rules and records which helps clients understand how to reach a server through its domain name</li>
<li>in AWS, the most common records are
<ul>
<li>A: hostname =&gt; IPv4</li>
<li>AAAA: hostname =&gt; IPv6</li>
<li>CNAME: hostname =&gt; hostname</li>
<li>Alias: hostname =&gt; AWS resource</li>
</ul>
</li>
</ul>
<h2 id="overview"><a class="markdownIt-Anchor" href="#overview"></a> Overview</h2>
<ul>
<li>route 53 can use
<ul>
<li>public domain names you own</li>
<li>private domain names that can be resolved by your instances in your VPCs</li>
</ul>
</li>
<li>Route 53 has advanced features such as
<ul>
<li>load balancing (through DNS, also called client load balancing)</li>
<li>health checks</li>
<li>routing policy: simple, failover, geolocation, latency, weighted…</li>
</ul>
</li>
<li>you pay $0.5 per month per hosted zone</li>
</ul>
<ol>
<li>user will first send DNS request (<a target="_blank" rel="noopener" href="http://myapp.mydomain.com">http://myapp.mydomain.com</a>) to route 53 asking for IP address</li>
<li>route 53 will response will the ip address of that DNS and a TTL</li>
<li>user browser will then send the HTTP request to the correct IP to reach the server</li>
<li>next time when the user send DNS request, if the last request is not expire (check the TTL), browser will directly go to the last saved IP address, save traffic for route 53</li>
</ol>
<h2 id="cname-vs-alias"><a class="markdownIt-Anchor" href="#cname-vs-alias"></a> CNAME vs Alias</h2>
<ul>
<li>AWS resource (load balancer, cloudfront…) expose an AWS hostname and you want <a target="_blank" rel="noopener" href="http://myapp.mydomain.com">myapp.mydomain.com</a></li>
<li>CNAME
<ul>
<li>points a hostname to any other hostname</li>
<li>only for non root domain (<a target="_blank" rel="noopener" href="http://something.mydomain.com">something.mydomain.com</a>)</li>
</ul>
</li>
<li>Alias
<ul>
<li>points a hostname to an AWS resource</li>
<li>works for root domain and non root domain (<a target="_blank" rel="noopener" href="http://mydomain.com">mydomain.com</a>)</li>
<li>free of charge</li>
<li>native health check</li>
</ul>
</li>
</ul>
<h2 id="simple-routing-policy"><a class="markdownIt-Anchor" href="#simple-routing-policy"></a> Simple Routing policy</h2>
<ul>
<li>use when you need to redirect to a single resource</li>
<li>you can’t attach health checks to simple routing policy</li>
<li>if multiple values (IP addresses) are returned, a random one is chosen by the client (client side load balancing)</li>
</ul>
<h2 id="weighted-routing-policy"><a class="markdownIt-Anchor" href="#weighted-routing-policy"></a> Weighted routing policy</h2>
<ul>
<li>control the percentage of the requests that go to specific endpoint</li>
<li>helpful to test percentage of traffic on new app version for example</li>
<li>helpful to split traffic between two regions</li>
<li>can be associated with health checks</li>
<li>but on the client side the browser is not aware that it has multiple weighted endpoints in the backend</li>
</ul>
<h2 id="latency-routing-policy"><a class="markdownIt-Anchor" href="#latency-routing-policy"></a> Latency routing policy</h2>
<ul>
<li>redirect to the server that has the least latency close to user</li>
<li>super helpful when latency of users is a priority</li>
<li>latency is evaluated in terms of user to designated AWS region</li>
<li>Germany may be redirected to the US (if that’s the lowest latency)</li>
</ul>
<h2 id="route-53-health-checks"><a class="markdownIt-Anchor" href="#route-53-health-checks"></a> Route 53 health checks</h2>
<ul>
<li>have X health checks failed =&gt; unhealthy (default 3)</li>
<li>have X health checks passed =&gt; healthy (default 3)</li>
<li>default health checks interval : 30 seconds (can set to 10 seconds with higher cost)</li>
<li>about 15 health checkers will the the endpoint health in the background (from different regions)
<ul>
<li>one request every 2 seconds on average (30 / 15)</li>
<li>can have HTTP, TCP, and HTTPS health checks (no SSL verification)</li>
<li>possible to integrate health check with CloudWatch</li>
</ul>
</li>
<li>health checks can be linked to route 53 DNS queries</li>
</ul>
<h2 id="geolocation-routing-policy"><a class="markdownIt-Anchor" href="#geolocation-routing-policy"></a> GeoLocation routing policy</h2>
<ul>
<li>different from latency based</li>
<li>this is routing based on user location</li>
<li>here we specify traffic from the UK should go to this specific IP</li>
<li>should create a default policy (in case there is no match on location)</li>
</ul>
<h2 id="geoproximity-routing-policy"><a class="markdownIt-Anchor" href="#geoproximity-routing-policy"></a> Geoproximity routing policy</h2>
<ul>
<li>route traffic to your resources based on the geographic location of users and resources</li>
<li>ability to shift more traffic to resources based on the defined bias</li>
<li>to change the size of the geographic region, specify bias values
<ul>
<li>to expand (1 to 99) - more traffic to the resources</li>
<li>to shrink (-1 to -99) - less traffic to the resources</li>
</ul>
</li>
<li>resources can be
<ul>
<li>AWS resources (specify AWS region)</li>
<li>non-AWS resources (specify latitude and longitude)</li>
</ul>
</li>
<li>you must use route 53 traffic flow (advanced) to use this feature</li>
</ul>
<h2 id="multi-value-routing-policy"><a class="markdownIt-Anchor" href="#multi-value-routing-policy"></a> Multi value routing policy</h2>
<ul>
<li>use when routing traffic to multiple resources</li>
<li>want to associate a route 53 health checks with records</li>
<li>up to 8 healthy records are returned for each multi value query</li>
<li>multi value is not a substitute for having an ELB</li>
<li>client browser will randomly choose a healthy record from returned records (client side fault tolerance)</li>
</ul>
<h2 id="route-53-as-a-registrar"><a class="markdownIt-Anchor" href="#route-53-as-a-registrar"></a> Route 53 as a Registrar</h2>
<ul>
<li>
<p>a domain name registrar is an organization that manages the reservation of internet domain names</p>
<ul>
<li>GoDaddy</li>
<li>Google Domains</li>
</ul>
</li>
<li>
<p>Domain registrar != DNS</p>
</li>
<li>
<p>if you buy your domain on 3rd party website, you can still use route 53</p>
</li>
</ul>
<ol>
<li>create a hosted zone in route 53</li>
<li>update NS records on 3rd party website to use route 53 name servers (all 4 of them)</li>
</ol>
<h1 id="classic-solutions-architecture"><a class="markdownIt-Anchor" href="#classic-solutions-architecture"></a> Classic Solutions Architecture</h1>
<h2 id="stateful-app-with-shopping-cart"><a class="markdownIt-Anchor" href="#stateful-app-with-shopping-cart"></a> Stateful App with shopping cart</h2>
<ul>
<li>ELB sticky sessions</li>
<li>web clients for storing cookies and making our web app stateless</li>
<li>ElastiCache
<ul>
<li>for storing sessions (alternative: DynamoDB)</li>
<li>for caching data from RDS</li>
<li>Multi AZ</li>
</ul>
</li>
<li>RDS
<ul>
<li>for storing user data</li>
<li>read replicas for scaling reads</li>
<li>multi AZ for disaster recovery</li>
</ul>
</li>
<li>tight security with security groups referencing each other</li>
</ul>
<h2 id="instantiating-applications-quickly"><a class="markdownIt-Anchor" href="#instantiating-applications-quickly"></a> Instantiating Applications Quickly</h2>
<ul>
<li>EC2 instances
<ul>
<li>use a golden AMI: install your applications, OS dependencies, beforehand and launch your EC2 instance from the golden AMI</li>
<li>bootstrap using user data: for dynamic configuration, use User Data scripts</li>
<li>Hybrid: mix golden AMI and User Data (Elastic Beanstalk)</li>
</ul>
</li>
<li>RDS databases
<ul>
<li>restore from a snapshot: the database will have schemas and data ready</li>
</ul>
</li>
<li>EBS volume:
<ul>
<li>restore from a snapshot, the disk will already be formatted and have data</li>
</ul>
</li>
</ul>
<h1 id="beanstalk"><a class="markdownIt-Anchor" href="#beanstalk"></a> Beanstalk</h1>
<h2 id="developer-problems-on-aws"><a class="markdownIt-Anchor" href="#developer-problems-on-aws"></a> Developer problems on AWS</h2>
<ul>
<li>
<p>managing infrastructure</p>
</li>
<li>
<p>deploying code</p>
</li>
<li>
<p>configuring all the databases, load balancers, etc…</p>
</li>
<li>
<p>scaling concerns</p>
</li>
<li>
<p>most web apps have the same architecture (ALB + ASG)</p>
</li>
<li>
<p>all the developers want is for their code to run</p>
</li>
<li>
<p>possibly, consistently across different applications and environments</p>
</li>
</ul>
<h2 id="elastic-beanstalk-overview"><a class="markdownIt-Anchor" href="#elastic-beanstalk-overview"></a> Elastic Beanstalk - overview</h2>
<ul>
<li>Elastic Beanstalk is a developer centric view of deploying an application on AWS</li>
<li>it uses all the component’s we have seen before: EC2, ASG, ELB, RDS…</li>
<li>managed service
<ul>
<li>automatically handles capacity provisioning, load balancing, scaling, application health monitoring, instance configuration…</li>
<li>just the application code is the responsiblity of the developer</li>
</ul>
</li>
<li>we still have full control over the configuration</li>
<li>Beanstalk is free but you pay for the underlying instances</li>
</ul>
<h2 id="elastic-beanstalk-components"><a class="markdownIt-Anchor" href="#elastic-beanstalk-components"></a> Elastic Beanstalk - components</h2>
<ul>
<li>application
<ul>
<li>collectioin of Elastic Beanstalk components (environments, versions, configurations…)</li>
</ul>
</li>
<li>application version
<ul>
<li>an iteration of your application code</li>
</ul>
</li>
<li>environment
<ul>
<li>collection of AWS resources running an application version (only one application version at a time)</li>
<li>Tiers
<ul>
<li>web server environment tier</li>
<li>worker environment tier</li>
</ul>
</li>
<li>you can create multiple environments (dev, test, prod…)</li>
</ul>
</li>
</ul>
<h1 id="s3"><a class="markdownIt-Anchor" href="#s3"></a> S3</h1>
<h2 id="buckets"><a class="markdownIt-Anchor" href="#buckets"></a> Buckets</h2>
<ul>
<li>Amazon S3 allows people to store objects in buckets</li>
<li>buckets must have a globally unique name</li>
<li>buckets are defined at the region level</li>
<li>naming convention
<ul>
<li>No uppercase</li>
<li>no underscore</li>
<li>3-63 characters long</li>
<li>not an ip</li>
<li>must start with lowercase letter or number</li>
</ul>
</li>
</ul>
<h2 id="objects"><a class="markdownIt-Anchor" href="#objects"></a> Objects</h2>
<ul>
<li>
<p>objects (files) have a key</p>
</li>
<li>
<p>the key is the FULL path</p>
<ul>
<li>s3:&quot;//my-bucket/my_folder/another_folder/my_file.txt</li>
<li>key is: my_folder/another_folder/my_file.txt</li>
<li>prefix is: my_folder/another_folder/</li>
<li>object name is: my_file.txt</li>
</ul>
</li>
<li>
<p>there is no conecpt of directories within buckets</p>
</li>
<li>
<p>just keys with very long names that contain slashes</p>
</li>
<li>
<p>object values are the content of the body</p>
<ul>
<li>max object size is 5TB</li>
<li>if uploading more than 5GB, must use multi-part upload</li>
</ul>
</li>
<li>
<p>metadata (list of text key / value pairs, system or user metadata)</p>
</li>
<li>
<p>Tags (Unicode key / value pair - up to 10) - useful for security / lifecycle</p>
</li>
<li>
<p>Version ID (if versioning is enabled)</p>
</li>
</ul>
<h2 id="versioning"><a class="markdownIt-Anchor" href="#versioning"></a> Versioning</h2>
<ul>
<li>you can version your files in Amazon S3</li>
<li>it is enabled at the bucket level</li>
<li>same key overwrite will increment the version</li>
<li>it is best pratice to version your buckets
<ul>
<li>protect against unintended deletes (ability to restore a version)</li>
<li>easy roll back to previous version</li>
</ul>
</li>
<li>notes
<ul>
<li>any file that is not versioned prior to enabling versioning will have version <code>null</code></li>
<li>suspending versioning does not delete the previous versions</li>
</ul>
</li>
</ul>
<h2 id="encryption-for-objects"><a class="markdownIt-Anchor" href="#encryption-for-objects"></a> Encryption for objects</h2>
<ol>
<li>SSE-S3: encrypts S3 object using keys handled and managed by AWS</li>
<li>SSE-KMS: leverage AWS KMS service to manage encryption keys</li>
<li>SSE-C: when you want to manage your own encryption keys</li>
<li>client side encryption</li>
</ol>
<ul>
<li>it is important to understand which ones are adapted to which situation for the exam</li>
</ul>
<h3 id="s3-default-encryption"><a class="markdownIt-Anchor" href="#s3-default-encryption"></a> S3 Default Encryption</h3>
<ul>
<li>one way to force encryption is to use a bucket policy and refuse any API call to PUT an S3 object without encryption headers</li>
<li>another way is to use the default encryption option in S3</li>
<li>note: bucket policies are evaluated before default encryption
<ul>
<li>e.g. if you have a bucket policy to reject all un-encrypted files from being upload to S3, then you can’t upload un-encrypted file even if you have the default encryption enabled.</li>
</ul>
</li>
</ul>
<h3 id="sse-c"><a class="markdownIt-Anchor" href="#sse-c"></a> SSE-C</h3>
<ul>
<li>Amazon S3 does not store the encryption key you provide</li>
<li>HTTPS must be used (because you need to send the key in the request)</li>
<li>Encryption key must provided in HTTP headers, for every request</li>
</ul>
<h3 id="client-side-encryption"><a class="markdownIt-Anchor" href="#client-side-encryption"></a> Client side encryption</h3>
<ul>
<li>client library such as the Amazon S3 Encryption client</li>
<li>clients must encrypt the data themselves before sending to S3</li>
<li>clients must decrypt the data themselves when retrieving the data from S3</li>
<li>customer fully manages the keys and encryption cycle</li>
</ul>
<h3 id="encryption-in-transit-ssltls"><a class="markdownIt-Anchor" href="#encryption-in-transit-ssltls"></a> Encryption in transit (SSL/TLS)</h3>
<ul>
<li>Amazon S3 exposes
<ul>
<li>HTTP endpoint, non encrypted</li>
<li>HTTPS endpoint, encryption in flight</li>
</ul>
</li>
<li>You are free to use the endpoint you want, but HTTPS is recommended</li>
<li>most clients would use the HTTPS endpoint by default</li>
<li>HTTPS is mandatory for SSE-C (because you need to send the key in the request)</li>
</ul>
<h2 id="security"><a class="markdownIt-Anchor" href="#security"></a> Security</h2>
<ul>
<li>
<p>User based</p>
<ul>
<li>IAM policies: which API calls should be allowed for a specific user from IAM console</li>
</ul>
</li>
<li>
<p>Resource based</p>
<ul>
<li>bucket policies: bucket wide rules from the S3 console - allows cross account</li>
<li>Object ACL: finer grain</li>
<li>Bucket ACL: less common</li>
</ul>
</li>
<li>
<p>Note: an IAM principal can access an S3 object if</p>
<ul>
<li>the user IAM permissions allow it OR the resource policy ALLOW it</li>
<li>AND there is no explicit DENY</li>
</ul>
</li>
<li>
<p>JSON based policies</p>
<ul>
<li>Resources: buckets and objects</li>
<li>Actions: Set of API to Allow or Deny</li>
<li>Effect: Allow / Deny</li>
<li>Principal: the account or user to apply the policy to</li>
</ul>
</li>
<li>
<p>use S3 bucket for policy to</p>
<ul>
<li>Grant public access to the bucket</li>
<li>Force objects to be encrypted at upload</li>
<li>Grant access to another account (cross account)</li>
</ul>
</li>
</ul>
<h2 id="cors"><a class="markdownIt-Anchor" href="#cors"></a> CORS</h2>
<ul>
<li>An origin is a scheme, host, and port</li>
<li>CORS means Cross-Origin Resource Sharing</li>
<li>Web browser based machanism to allow requests to other origins while visiting the main origin</li>
<li>the requests won’t be fulfilled unless the other origin allows for the requests, using CORS Headers (<code>Access-Control-Allow-Origin</code>)</li>
<li>if a client does a cross-origin request on our S3 bucket, we need to enable the correct CORS headers</li>
<li>you can allow for a specific origin or * for all origins</li>
</ul>
<h2 id="s3-access-logs"><a class="markdownIt-Anchor" href="#s3-access-logs"></a> S3 Access logs</h2>
<ul>
<li>for audit purpose, you may want to log all access to S3 buckets</li>
<li>any request made to S3, from any account, authorized or denied, will be logged into another S3 bucket</li>
<li>that data can be analyzed using data analysis tools later (Amazon Athena)</li>
</ul>
<h2 id="s3-replication-cross-region-or-same-region"><a class="markdownIt-Anchor" href="#s3-replication-cross-region-or-same-region"></a> S3 Replication (Cross-Region or Same Region)</h2>
<ul>
<li>
<p>Must enable versioning in source and destination</p>
</li>
<li>
<p>cross region replication</p>
</li>
<li>
<p>same region replication</p>
</li>
<li>
<p>buckets can be in different accounts</p>
</li>
<li>
<p>copying is asynchronous</p>
</li>
<li>
<p>must give proper IAM permissions to S3</p>
</li>
<li>
<p>After activating, only new objects are replicated (existing objects will not be replicated)</p>
</li>
<li>
<p>For DELETE operations</p>
<ul>
<li>can replicate delete markers from source to target (optional setting)</li>
<li>deletions with a version ID are not replicated (to avoid malicious deletes)</li>
</ul>
</li>
<li>
<p>there is not chaining of replication</p>
<ul>
<li>if bucket one has replicatio into bucket two, which has replicatioin into bucket three</li>
<li>then objects created in bucket one are not replicated to bucket three</li>
</ul>
</li>
</ul>
<h2 id="s3-pre-signed-url"><a class="markdownIt-Anchor" href="#s3-pre-signed-url"></a> S3 Pre-signed URL</h2>
<ul>
<li>can generate pre-signed URLs using SDK or CLI</li>
<li>valid for a default of 3600 seconds</li>
<li>users given a pre-signed URL inherit the permissions of the person who generated the URL for GET / PUT</li>
</ul>
<h2 id="s3-storage-class"><a class="markdownIt-Anchor" href="#s3-storage-class"></a> S3 Storage Class</h2>
<h3 id="standard-general-purpose"><a class="markdownIt-Anchor" href="#standard-general-purpose"></a> Standard - General Purpose</h3>
<ul>
<li>High durability of objects across multiple AZ</li>
<li>99.99% availability over a given year</li>
<li>sustain 2 concurrent facility failure</li>
<li>use case: big data analytics, mobile and gaming applications, content distribution…</li>
</ul>
<h3 id="standard-ia"><a class="markdownIt-Anchor" href="#standard-ia"></a> Standard - IA</h3>
<ul>
<li>suitable for data that is less frequently accessed, but requires rapid access when needed</li>
<li>99.9% availability</li>
<li>low cost compared to GP</li>
<li>use cases: as a data store for disater recovery, backups</li>
</ul>
<h3 id="one-zone-ia"><a class="markdownIt-Anchor" href="#one-zone-ia"></a> One Zone - IA</h3>
<ul>
<li>Same as IA but data is stored in a single AZ</li>
<li>99.5% availability</li>
<li>low latency and high throughput performance</li>
<li>supports SSL for data at transit and encryption at rest</li>
<li>low cost compared to IA</li>
<li>use cases: storing secondary backup copies of on-premise data, or storing data you can re-create</li>
</ul>
<h3 id="intelligent-tiering"><a class="markdownIt-Anchor" href="#intelligent-tiering"></a> Intelligent Tiering</h3>
<ul>
<li>same low latency and high throughput performance of S3 standard</li>
<li>small monthly monitoring and auto-tiering fee</li>
<li>automatically moves objects between two access tiers based on changing access patterns</li>
<li>resilient against events that impact an entire AZ</li>
</ul>
<h3 id="amazon-glacier"><a class="markdownIt-Anchor" href="#amazon-glacier"></a> Amazon Glacier</h3>
<ul>
<li>low cost object storage meant for archiving / backup</li>
<li>data is retained for the longer term (10+ years)</li>
<li>alternative to on-premise magnetic tape storage</li>
<li>cost per storage per month + retrieval cost</li>
<li>each item in glacier is called archive</li>
<li>archives are stored in Vaults</li>
</ul>
<h3 id="amazon-glacier-and-glacier-deep-archive"><a class="markdownIt-Anchor" href="#amazon-glacier-and-glacier-deep-archive"></a> Amazon Glacier and Glacier Deep Archive</h3>
<ul>
<li>Amazon Glacier - 3 retrieval options
<ul>
<li>expedited (1 to 5 minues)</li>
<li>standard (3 to 5 hours)</li>
<li>bulk (5 to 12 hours)</li>
<li>minimum storage duration of 90 days</li>
</ul>
</li>
<li>Amazon Glacier Deep Archive
<ul>
<li>Standard (12 hours)</li>
<li>Bulk (48 hours)</li>
<li>Minimum storage duration of 180 days</li>
</ul>
</li>
</ul>
<h2 id="s3-lifecycle-rules"><a class="markdownIt-Anchor" href="#s3-lifecycle-rules"></a> S3 Lifecycle Rules</h2>
<ul>
<li>Transition actions
<ul>
<li>it defines when objects are transitioned to another storage class</li>
<li>e.g. move objects to Standard IA class 60 days after creation</li>
<li>e.g. move to Glacier for archiving after 6 months</li>
</ul>
</li>
<li>Expiration actions
<ul>
<li>configure to expire (delete) after some time</li>
<li>e.g. access log files can be set to delete after a 365 days</li>
<li>e.g. can be used to delete old versions of files (if versioning is enabled)</li>
<li>e.g. can be used to delete incomplete multi-part uploads</li>
</ul>
</li>
</ul>
<h3 id="s3-analytics-storage-class-analysis"><a class="markdownIt-Anchor" href="#s3-analytics-storage-class-analysis"></a> S3 Analytics - Storage Class Analysis</h3>
<ul>
<li>You can setup S3 analytics to help determine when to transit objects from Standard to Standard IA</li>
<li>does not work for One Zone - IA or Glacier</li>
</ul>
<h2 id="s3-select-and-glacier-select"><a class="markdownIt-Anchor" href="#s3-select-and-glacier-select"></a> S3 Select and Glacier Select</h2>
<ul>
<li>retrieve less data using SQL by performing server side filtering</li>
<li>can filter by rows and columns</li>
<li>less network transfer, less CPU cost client-side</li>
</ul>
<h2 id="s3-event-notifications"><a class="markdownIt-Anchor" href="#s3-event-notifications"></a> S3 Event notifications</h2>
<ul>
<li>can create as many events as desired
<ul>
<li>SNS</li>
<li>SQS</li>
<li>Lambda function</li>
</ul>
</li>
<li>S3 event notifications typically deliver events in seconds but can sometimes take a minute or longer</li>
<li>if two writes are made to a single non-versioned object at the same time, it is possible that only a single event notification will be sent</li>
<li>if you want to ensure that an event notification is sent for every successful write, you can enable versioning on your bucket.</li>
<li>Your S3 bucket needs to have permission to send message to SQS queue</li>
</ul>
<h2 id="s3-requester-pays"><a class="markdownIt-Anchor" href="#s3-requester-pays"></a> S3 Requester Pays</h2>
<ul>
<li>in general, bucket owners pay for all S3 storage and data transfer costs associated with their buckets</li>
<li>with Requester Pays buckets, the requester instead of the bucket owner pays the cost of the request and the data download from the bucket</li>
<li>helpful when you want to share large datasets with other accounts</li>
<li>the requester must be authenticated in AWS (cannot be anonymous)</li>
</ul>
<h2 id="glacier-vault-lock"><a class="markdownIt-Anchor" href="#glacier-vault-lock"></a> Glacier Vault Lock</h2>
<ul>
<li>Adopt a WORM (Write Once Read Many) model</li>
<li>lock the policy for future edits (can no longer be changed)</li>
<li>helpful for compliance and data retention</li>
</ul>
<h2 id="s3-object-lock-versioning-must-be-enabled"><a class="markdownIt-Anchor" href="#s3-object-lock-versioning-must-be-enabled"></a> S3 Object Lock (versioning must be enabled)</h2>
<ul>
<li>adopt a WORM (Write Once Read Many) model</li>
<li>block an object version deletion for a specified amount of time</li>
<li>object retention
<ul>
<li>retention period: specifies a fixed period</li>
<li>legal hold: same protection, no expiry date</li>
</ul>
</li>
<li>Modes
<ul>
<li>Governance mode: users can’t overwrite or delete an object version or alter its lock settings unless they have special permissions</li>
<li>Compliance mode: a protected object version can’t be overwritten or deleted by any user, including the root user. When an object is locked in compliance mode, its retention mode can’t be changed and its retention period can’t be shortened.</li>
</ul>
</li>
</ul>
<h1 id="aws-athena"><a class="markdownIt-Anchor" href="#aws-athena"></a> AWS Athena</h1>
<ul>
<li>serverless service to perform analytics directly against S3 files</li>
<li>uses SQL language to query the files</li>
<li>has a JDBC / ODBC driver (for BI tools)</li>
<li>charged per query and amount of data scanned</li>
<li>supports CSV, JSON, ORC, Avro, and Parquet (built on Presto)</li>
<li>use cases: BI / Analytics / reporting / Logs / CloudTrail trails etc…</li>
</ul>
<h1 id="aws-cloudfront"><a class="markdownIt-Anchor" href="#aws-cloudfront"></a> AWS CloudFront</h1>
<ul>
<li>CDN</li>
<li>improves read performance, content is cached at the edge loctions</li>
<li>216 point of presence globally (edge locations)</li>
<li>DDoS protection, integration with Shield, AWS web application firewall</li>
<li>can expose external HTTPS and can talk to internal HTTPS backends</li>
</ul>
<h2 id="origins"><a class="markdownIt-Anchor" href="#origins"></a> Origins</h2>
<ul>
<li>S3 bucket
<ul>
<li>for distributing files and caching them at the edge</li>
<li>enahnced security with CloudFront OAI (Origin Access Identity), this can block access directly to S3</li>
<li>CloudFront can be used as an ingress (to upload files to S3)</li>
</ul>
</li>
<li>Custom Origin (HTTP)
<ul>
<li>Application Load Balancer</li>
<li>EC2 instance</li>
<li>S3 Website (must first enable the bucket as a static S3 website)</li>
<li>Any HTTP backend you want</li>
</ul>
</li>
</ul>
<h3 id="cloudfront-vs-s3-cross-region-replication"><a class="markdownIt-Anchor" href="#cloudfront-vs-s3-cross-region-replication"></a> CloudFront vs S3 Cross Region Replication</h3>
<ul>
<li>CloudFront
<ul>
<li>Global Edge Network</li>
<li>files are cached for a TTL</li>
<li>great for static content that must be available everywhere, maybe outdated for a while</li>
</ul>
</li>
<li>S3 Cross Region Replication
<ul>
<li>must be setup for each region you want replication to happen</li>
<li>files are updated in near real time</li>
<li>read only</li>
<li>great for dynamic content that needs to be available at low latency in few regions</li>
</ul>
</li>
</ul>
<h2 id="cloudfront-signed-url-signed-cookies"><a class="markdownIt-Anchor" href="#cloudfront-signed-url-signed-cookies"></a> CloudFront Signed URL / Signed Cookies</h2>
<ul>
<li>you want to distribute paid share content to premium users over the world</li>
<li>we can use CloudFront Signed URL / Cookie, we attach a policy with
<ul>
<li>includes URL expiration</li>
<li>includes IP ranges to access the data from</li>
<li>Trusted Signers (which AWS accounts can create signed URLs)</li>
</ul>
</li>
<li>Signed URL: access to individual files (one signed URL per file)</li>
<li>Signed Cookies: access to multiple files (one signed Cookie for many files)</li>
</ul>
<h3 id="process"><a class="markdownIt-Anchor" href="#process"></a> Process</h3>
<ol>
<li>user authenticate and authorized to the application</li>
<li>the application send request to CloudFront to generate Signed URL / Cookie</li>
<li>the application send the signed URL / Cookie back to user</li>
<li>user use the signed URL / Cookie to access the file in CloudFront</li>
<li>CloudFront fetch the file from S3 to the user</li>
</ol>
<h3 id="cloudfront-signed-url-vs-s3-pre-signed-url"><a class="markdownIt-Anchor" href="#cloudfront-signed-url-vs-s3-pre-signed-url"></a> CloudFront Signed URL vs S3 Pre-signed URL</h3>
<ul>
<li>CloudFront Signed URL
<ul>
<li>Allow access to a path, no matter the origin</li>
<li>account wide key pair, only the root can manage it</li>
<li>can filter by IP, path, date, expiration</li>
<li>can leverage caching features</li>
</ul>
</li>
<li>S3 Pre-signed URL
<ul>
<li>issue a request as the person who pre-signed the URL</li>
<li>uses the IAM key of the signing IAM principal</li>
<li>limited lifetime</li>
</ul>
</li>
</ul>
<h2 id="cloudfront-price-class"><a class="markdownIt-Anchor" href="#cloudfront-price-class"></a> CloudFront - Price Class</h2>
<ul>
<li>You can reduce the number of edge locations for cost reduction</li>
<li>3 price classes
<ul>
<li>price class all: all regions</li>
<li>price class 200: most regions, but excludes the most expensive regions</li>
<li>price class 100: only the least expensive regions</li>
</ul>
</li>
</ul>
<h2 id="cloudfront-multiple-origins"><a class="markdownIt-Anchor" href="#cloudfront-multiple-origins"></a> CloudFront - Multiple Origins</h2>
<ul>
<li>to route to different kind of origins based on the content type</li>
<li>e.g. one origin is from ALB and another origin is from S3 bucket</li>
</ul>
<h3 id="based-on-the-path-pattern"><a class="markdownIt-Anchor" href="#based-on-the-path-pattern"></a> Based on the path pattern</h3>
<ul>
<li><code>/images/*</code></li>
<li><code>/api/*</code></li>
<li><code>/*</code></li>
</ul>
<h2 id="cloudfront-origin-groups"><a class="markdownIt-Anchor" href="#cloudfront-origin-groups"></a> CloudFront - Origin Groups</h2>
<ul>
<li>to increase high availability and do failover</li>
<li>Origin Groups: one primary and one secondary origin</li>
<li>if the primary origin fails, the second one is used (CloudFront will send the same request to the secondary origin)</li>
</ul>
<h2 id="cloudfront-field-level-encryption"><a class="markdownIt-Anchor" href="#cloudfront-field-level-encryption"></a> CloudFront - Field Level Encryption</h2>
<ul>
<li>protect user sensitive information through application stack</li>
<li>adds an additional layer of security along with HTTPS</li>
<li>sensitive information encrypted at the edge close to the user</li>
<li>uses asymmetric encryption (public private key pair)</li>
<li>usage
<ol>
<li>client send sensitive information to the edge location</li>
<li>edge location use public key to encrypt the information</li>
<li>edge location send encrypted information to CloudFront</li>
<li>CloudFront send information all the way to (CloudFront =&gt; ALB =&gt; Web Servers) Web server</li>
<li>Web server uses the private key to decrypt the information</li>
</ol>
</li>
</ul>
<h1 id="aws-global-accelerator"><a class="markdownIt-Anchor" href="#aws-global-accelerator"></a> AWS Global Accelerator</h1>
<h2 id="global-users-for-our-application"><a class="markdownIt-Anchor" href="#global-users-for-our-application"></a> Global users for our application</h2>
<ul>
<li>you have deployed an application and have global users who want to access it directly</li>
<li>they go over the public internet, which can add a lot of latency due to many hops</li>
<li>we wish to go as fast as possible through AWS network to minimize latency</li>
</ul>
<h2 id="unicast-ip-vs-anycast-ip"><a class="markdownIt-Anchor" href="#unicast-ip-vs-anycast-ip"></a> Unicast IP vs Anycast IP</h2>
<ul>
<li>Unicast IP
<ul>
<li>one server holds one IP address</li>
</ul>
</li>
<li>Anycast IP
<ul>
<li>all servers hold the same IP address and the client is routed to the nearest one</li>
</ul>
</li>
</ul>
<h2 id="aws-global-accelerator-2"><a class="markdownIt-Anchor" href="#aws-global-accelerator-2"></a> AWS Global Accelerator</h2>
<ul>
<li>leverage the AWS internal network to route to your application</li>
<li>2 Anycast IP are created for your application</li>
<li>the Anycast IP send traffic directly to Edge locations</li>
<li>the edge locations send the traffic to your application (through AWS private network)</li>
</ul>
<h2 id="global-accelerator-vs-cloudfront"><a class="markdownIt-Anchor" href="#global-accelerator-vs-cloudfront"></a> Global Accelerator vs CloudFront</h2>
<ul>
<li>
<p>they both use the AWS global network and its edge locations around the world</p>
</li>
<li>
<p>both services integrate with AWS shield for DDoS protection</p>
</li>
<li>
<p>CloutFront</p>
<ul>
<li>improves performance for both cacheable content (images / videos)</li>
<li>Dynamic content (such as API acceleration and dynamic site delivery)</li>
<li>content is served at the edge location</li>
</ul>
</li>
<li>
<p>Global Accelerator</p>
<ul>
<li>improves performance for a wide range of applications over TCP or UDP</li>
<li>proxying packets at the edge to applications running in one or more AWS regions</li>
<li>good fit for non-HTTP use cases: such as gaming (UDP), IoT (MQTT) or Voice Over IP</li>
<li>good for HTTP use cases that require static IP (if use Route 53 Geo location, client browser will cache the IP address and redirect user to the old IP for a TTL)</li>
<li>good for HTTP use cases that require deterministic, fast regional failover</li>
</ul>
</li>
</ul>
<h1 id="aws-snow-family"><a class="markdownIt-Anchor" href="#aws-snow-family"></a> AWS Snow Family</h1>
<ul>
<li>Highly-secure, portable devices to collect and process data at the edge, and migrate data into and out of AWS</li>
</ul>
<h2 id="snowball-edge-for-data-transfers"><a class="markdownIt-Anchor" href="#snowball-edge-for-data-transfers"></a> Snowball Edge (for data transfers)</h2>
<ul>
<li>physical data transport solution</li>
<li>alternative to moving data over the network</li>
<li>pay per data transfer job</li>
<li>provide block storage and Amazon S3 compatible object storage</li>
<li>Snowball Edge Storage Optimzied</li>
<li>Snowball Edge Compute Optimized</li>
</ul>
<h2 id="snowcore"><a class="markdownIt-Anchor" href="#snowcore"></a> Snowcore</h2>
<ul>
<li>small, portable computing, anywhere, rugged and secure, withstands harsh environements</li>
<li>light, 2.1 kg</li>
<li>device used for edge computing, storage, and data transfer</li>
<li>8 TB usable storage</li>
<li>must provide your own battery and cables</li>
<li>can be sent back to AWS offline, or connect it to internet and use AWS datasync to send data</li>
</ul>
<h2 id="snowmobile"><a class="markdownIt-Anchor" href="#snowmobile"></a> Snowmobile</h2>
<ul>
<li>transfer exabytes of data (1 EB = 1000 PB = 1,000,000 TB)</li>
<li>each snowmobile has 100 PB of capacity</li>
<li>high security</li>
<li>better than snowball if you transfer more then 10 PB</li>
</ul>
<h2 id="edge-computing"><a class="markdownIt-Anchor" href="#edge-computing"></a> Edge computing</h2>
<ul>
<li>process data while its being created on an edge location
<ul>
<li>A truck on the road, a ship on the sea, a mining station underground (no internet access)</li>
</ul>
</li>
<li>these locations may have
<ul>
<li>limited / no internet access</li>
<li>limited / no easy access to computing power</li>
</ul>
</li>
<li>we setup a snowball / snowcone device to do edge computing</li>
<li>eventually we can ship back the device to AWS</li>
</ul>
<h2 id="aws-opshub"><a class="markdownIt-Anchor" href="#aws-opshub"></a> AWS OpsHub</h2>
<ul>
<li>Historically, to use Snow Family devices, you need a CLI</li>
<li>today, you can use AWS OpsHub (a software you install on your computer / laptop) to manage your snow family devices
<ul>
<li>unlocking and configuring single or clustered devices</li>
<li>transferring files</li>
<li>launching and managing instances running on Snow family devices</li>
<li>monitor device metrics (storage capacity, active instances)</li>
<li>launch compatible AWS services on your devices</li>
</ul>
</li>
</ul>
<h3 id="snowball-into-glacier"><a class="markdownIt-Anchor" href="#snowball-into-glacier"></a> Snowball into Glacier</h3>
<ul>
<li>Snowball cannot import to Glacier directly</li>
<li>you must use Amazon S3 first, in combination with an S3 lifecycle policy</li>
</ul>
<h1 id="aws-storage-gateway"><a class="markdownIt-Anchor" href="#aws-storage-gateway"></a> AWS Storage Gateway</h1>
<ul>
<li>Bridge between on-premises data and cloud data in S3</li>
<li>use cases: disaster recovery, backup and restore, tiered storage</li>
</ul>
<h2 id="file-gateway"><a class="markdownIt-Anchor" href="#file-gateway"></a> File Gateway</h2>
<ul>
<li>configured S3 buckets are accessible using the NFS and SMB protocol</li>
<li>supports S3 standard, S3 IA, S3 One Zone IA</li>
<li>bucket access using IAM roles for each File Gateway</li>
<li>most recently used ata is cached in the file Gateway</li>
<li>can be mounted on many servers</li>
<li>integrated with AD (Active Directory) for user authentication</li>
</ul>
<ol>
<li>On-premises server communicate with File Gateway (optionally with Authentication)</li>
<li>File Gateway communicate with S3 buckets</li>
</ol>
<h2 id="volume-gateway"><a class="markdownIt-Anchor" href="#volume-gateway"></a> Volume Gateway</h2>
<ul>
<li>block storage using iSCSI protocol backed by S3</li>
<li>backed by EBS snapshot which can help restore on-premises volumes</li>
<li>cached volumes: low latency access to most recent data</li>
<li>stored volumes: entire dataset is on premises, scheduled backups to S3</li>
</ul>
<ol>
<li>On-premises server communicate with Volume Gateway using iSCSI protocol</li>
<li>Volume Gateway communicate with S3 bucket to create EBS snapshots</li>
</ol>
<ul>
<li>Volume Gateway is often used as data backup</li>
</ul>
<h2 id="tape-gateway"><a class="markdownIt-Anchor" href="#tape-gateway"></a> Tape Gateway</h2>
<ul>
<li>some companies have backup processes using physical tapes</li>
<li>with tape gateway, companies use the same processes but, in the cloud</li>
<li>Virtual Tape Library (VTL) backed by Amazon S3 and Glacier</li>
<li>backup data using existing tape-based processes</li>
</ul>
<h2 id="storage-gateway-hardware-appliance"><a class="markdownIt-Anchor" href="#storage-gateway-hardware-appliance"></a> Storage Gateway - Hardware appliance</h2>
<ul>
<li>if you don’t have on-premises virtual server, you can buy from Amazon</li>
</ul>
<h1 id="aws-fsx"><a class="markdownIt-Anchor" href="#aws-fsx"></a> AWS FSx</h1>
<h2 id="aws-fsx-for-windows"><a class="markdownIt-Anchor" href="#aws-fsx-for-windows"></a> AWS FSx for Windows</h2>
<ul>
<li>EFS is a shared POSIX system for Linux system</li>
<li>FSx is a fully managed Windows file system share drive</li>
<li>supports SMB protocol and Windows NTFS</li>
<li>Microsoft Active Directory integration, ACLs, user quotas</li>
<li>can be accessed from your on-premises infrastructure</li>
<li>can be configured to be Multi-AZ</li>
<li>data is backed up daily to S3</li>
</ul>
<h2 id="amazon-fsx-for-lustre"><a class="markdownIt-Anchor" href="#amazon-fsx-for-lustre"></a> Amazon FSx for Lustre</h2>
<ul>
<li>Lustre is a type of parallel distributed file system, for large scale computing</li>
<li>the name Lustre is derived from Linux and Cluster</li>
<li>Machine Learning, High Performance Computing</li>
<li>Video processing, Financial Modeling and Electronic Design Automation</li>
<li>Seamless integration with S3</li>
<li>can be used from on-premises servers</li>
</ul>
<h3 id="fsx-file-system-deployment-options"><a class="markdownIt-Anchor" href="#fsx-file-system-deployment-options"></a> FSx File System Deployment Options</h3>
<ul>
<li>Scratch file system
<ul>
<li>temporary storage</li>
<li>data is not replicated</li>
<li>high burst</li>
<li>usage: short-term processing, optimize costs</li>
</ul>
</li>
<li>Persistent File System
<ul>
<li>long-term storage</li>
<li>data is replicated within same AZ</li>
<li>replace failed files within minutes</li>
<li>usage: long-term processing, sensitive data</li>
</ul>
</li>
</ul>
<h1 id="aws-transfer-family"><a class="markdownIt-Anchor" href="#aws-transfer-family"></a> AWS Transfer Family</h1>
<ul>
<li>a fully managed service for file transfers into and out of Amazon S3 or Amazon EFS using the FTP protocol</li>
<li>supported protocols
<ul>
<li>AWS Transfer for FTP (File Transfer Protocol)</li>
<li>AWS Transfer for FTPS (File Transfer Protocol over SSL)</li>
<li>AWS Transfer for SFTP (Secure File Transfer Protocol)</li>
</ul>
</li>
<li>Managed infrastructure, scalable, reliable, highly available</li>
<li>pay per provisioned endpoint per hour + data transfers in GB</li>
<li>store and manage users’ credentials within the services</li>
<li>integrate with existing authentication systems (Microsoft Active Directory, LDAP, Okta…)</li>
</ul>
<h1 id="aws-storage-comparison"><a class="markdownIt-Anchor" href="#aws-storage-comparison"></a> AWS Storage Comparison</h1>
<ul>
<li>S3: Object Storage
<ul>
<li>S3 is going to be an object storage, it’s going to be serverless, you don’t have to prove incapacity ahead of time. It has some deep integration with so many database services.</li>
</ul>
</li>
<li>Glacier: Object Archival
<ul>
<li>Glacier is going to be for object archival. So this is when we want to store objects for a long period of time. Retrieve it very very rarely, and when we retrieve these objects, they’re going to be taking a lot of time to get back to us because they are archived.</li>
</ul>
</li>
<li>EFS: Network File System for Linux instances, POSIX file system
<ul>
<li>EFS is Elastic File System, and this is a network file system for Linux instances. It is a POSIX file system so that means for Linux again. And it is accessible from all your EC2 instances at once. So it is something that is going to be shared and across AZ.</li>
</ul>
</li>
<li>FSx for Windows: Network File System for Windows servers
<ul>
<li>FSx for Windows is the same thing as EFS, but for Windows. So it’s a network file system for your Windows servers.</li>
</ul>
</li>
<li>FSx for Lustre: High performance computing Linux file system
<ul>
<li>FSx for Lustre is Linux and cluster, so it’s for High Performance Computing Linux file system. This is where you’re going to do your HPC running. You only have insanely high IOPS, insanely big capacity. And it has integration with S3 in the back end.</li>
</ul>
</li>
<li>EBS volume: network storage for one EC2 instance at a time
<ul>
<li>EBS volumes is your network storage for one EC2 instance at a time only. And it is bound to a specific availability zone that you create it in. And in case you wanted to change the AZ, you will need to create a snapshot, move that snapshot over, and create a volume from it.</li>
</ul>
</li>
<li>Instance Storage: physical storage for your EC2 instance (high IOPS)
<ul>
<li>Instance Storage is going to be physical storage for your EC2 instance. And so, because it’s attached from the hardware, then it’s going to have a much higher IOPS than EBS. EBS volumes, as we remember, it is up to 16,000 IOPS or 64,000 IOPS for io1. But for Instance Storage, because it is physically attached to your EC2 instance, you can get, for some, millions of IOPS. Um, it’s going to be very high. But the risk is that if your EC2 instance goes down, then you will lose that storage permanently.</li>
</ul>
</li>
<li>Storage Gateway: file gateway, volume gateway, tape gateway
<ul>
<li>Storage Gateway is going to be transporting files from on premise to AWS. So we have File Gateway, Volume Gateway for cache and stored, and Tape Gateway. Each with their use cases.</li>
</ul>
</li>
<li>Snowball / Snowmobile: to move large amount of data to the cloud, physically
<ul>
<li>And then finally, Snowball/Snowmobile to move large amount of data to the cloud physically into S3.</li>
</ul>
</li>
<li>database: for specific workloads, usually with indexing and querying</li>
</ul>
<h1 id="amazon-sqs-simple-queuing-service"><a class="markdownIt-Anchor" href="#amazon-sqs-simple-queuing-service"></a> Amazon SQS (Simple Queuing Service)</h1>
<ul>
<li>Fully managed service, used to decouple applications</li>
<li>attributes
<ul>
<li>unlimited throughput, unlimited number of messages in queue</li>
<li>default retention of messages: 4 days, to maximum 14 days</li>
<li>low latency</li>
<li>limitation of 256KB per message sent</li>
</ul>
</li>
<li>can have duplicate messages (at least once delivery, occasionally)</li>
<li>can have out of order message (best effort ordering)</li>
</ul>
<h2 id="producing-messages"><a class="markdownIt-Anchor" href="#producing-messages"></a> Producing Messages</h2>
<ul>
<li>Produced to SQS using the SDK (SendMessage API)</li>
<li>the message is persisted in SQS until a concumer deletes it</li>
</ul>
<h2 id="consuming-messages"><a class="markdownIt-Anchor" href="#consuming-messages"></a> Consuming Messages</h2>
<ul>
<li>consumers (running on EC2 instances, servers, or AWS lambda)</li>
<li>Poll SQS for messages (receive up to 10 message at a time)</li>
<li>process the messages (example: insert the message into an RDS database)</li>
<li>delete the messages using the DeleteMessage API</li>
</ul>
<h2 id="multiple-ec2-instances-consumers"><a class="markdownIt-Anchor" href="#multiple-ec2-instances-consumers"></a> Multiple EC2 instances consumers</h2>
<ul>
<li>consumers receive and process messages in parallel</li>
<li>at least once delivery (another consumer will receive the message if the first consumer didn’t process it fast enough)</li>
<li>best-effort message ordering</li>
<li>consumers delete messages after processing them</li>
<li>we can scale consumers horizontally to improve throughput of processing</li>
</ul>
<h2 id="sqs-with-auto-scaling-group"><a class="markdownIt-Anchor" href="#sqs-with-auto-scaling-group"></a> SQS with Auto Scaling Group</h2>
<ol>
<li>CloudWatch is monitoring the SQS length</li>
<li>if SQS length is too long, CloudWatch will trigger an alarm</li>
<li>Auto Scaling group will increase the number of EC2 instances if the alarm is triggered</li>
</ol>
<h2 id="sqs-security"><a class="markdownIt-Anchor" href="#sqs-security"></a> SQS Security</h2>
<ul>
<li>encryption
<ul>
<li>in flight encryption using HTTPS API</li>
<li>at rest encryption using KMS keys</li>
<li>client side encryption if the client wants to perform encryption / decryption itself</li>
</ul>
</li>
<li>Access control: IAM policies to regulate access to the SQS API</li>
<li>SQS access policies (similar to S3 bucket policies)</li>
</ul>
<h2 id="sqs-queue-access-policy"><a class="markdownIt-Anchor" href="#sqs-queue-access-policy"></a> SQS Queue Access Policy</h2>
<ul>
<li>Cross Account Access
<ul>
<li>if other accounts want to poll message from the SQS queue, we could add policy to the SQS specify which account and allow it to call receiveMessage API</li>
</ul>
</li>
<li>publish S3 event notifications to SQS queue
<ol>
<li>we upload an object to a S3 bucket</li>
<li>S3 bucket triggered an event message to be sent to SQS queue</li>
</ol>
<ul>
<li>we need to add a policy to SQS queue allowing the bucket to call SendMessage API to the queue</li>
</ul>
</li>
</ul>
<h2 id="sqs-message-visibility-timeout"><a class="markdownIt-Anchor" href="#sqs-message-visibility-timeout"></a> SQS - Message Visibility Timeout</h2>
<ul>
<li>
<p>after a message is polled by a consumer, it becomes invisible to other consumers</p>
</li>
<li>
<p>by default, the message visibility timeout is 30 seconds</p>
</li>
<li>
<p>that means the message has 30 seconds to be processed and deleted from the queue</p>
</li>
<li>
<p>after the message visibility timeout is over, the message is visible in SQS for other consumers to receive</p>
</li>
<li>
<p>if a message is not processed within the visiblity timeout, it will be processed again by other consumers</p>
</li>
<li>
<p>a consumer could call the ChangeMessageVisibility API to get more time</p>
</li>
<li>
<p>if visibility timeout is high (hours), and consumer crashes, re-processing will take time</p>
</li>
<li>
<p>if visibility timeout is too low (seconds), we may get duplicates</p>
</li>
</ul>
<h2 id="sqs-dead-letter-queue"><a class="markdownIt-Anchor" href="#sqs-dead-letter-queue"></a> SQS - Dead Letter Queue</h2>
<ul>
<li>if a consumer fails to process a message within the visibility timeout, the message goes back to the queue</li>
<li>we can set a threshold of how many times a message can go back to the queue</li>
<li>after the MaximumReceives threshold is exceeded, the message goes into a dead letter queue (DLQ)</li>
<li>useful for debugging</li>
<li>make sure to process the messages in the DLQ before they expire</li>
<li>good to set a retention of 14 days in the DLQ</li>
</ul>
<h2 id="sqs-request-response-systems"><a class="markdownIt-Anchor" href="#sqs-request-response-systems"></a> SQS - Request - Response Systems</h2>
<ol>
<li>producer send request with the reply-to queue ID to the Request queue</li>
<li>responders receive the request from the Request queue and process it</li>
<li>after processing, responders send the response to the corrent Response queue using the queue ID in the request</li>
</ol>
<ul>
<li>to implement this pattern: use the SQS Temporary Queue Client</li>
<li>it leverages virtual queues instead of creating / deleting SQS queues (cost effective)</li>
</ul>
<h2 id="sqs-delay-queue"><a class="markdownIt-Anchor" href="#sqs-delay-queue"></a> SQS - Delay Queue</h2>
<ul>
<li>delay a message (consumers don’t see it immediately) up to 15 minutes</li>
<li>default is 0 seconds (message is avaialble right away)</li>
<li>can set a default at queue level</li>
<li>can override the default on send using the DelaySeconds parameter</li>
</ul>
<h2 id="sqs-fifo-queue"><a class="markdownIt-Anchor" href="#sqs-fifo-queue"></a> SQS - FIFO queue</h2>
<ul>
<li>Frist In First Out</li>
<li>limited throughput</li>
<li>exactly once send capability (by removing duplicates), the message that failed to be processed will be insert at the end of the queue</li>
<li>messages are processed in order by the consumer</li>
</ul>
<h1 id="amazon-sns"><a class="markdownIt-Anchor" href="#amazon-sns"></a> Amazon SNS</h1>
<ul>
<li>the event producer only sends message to one SNS topic</li>
<li>as many event receivers (subscriptions) as we want to listen to the SNS topic notifications</li>
<li>each subscriber to the topic will get all the messages (note: new feature to filter messages)</li>
<li>subscribers can be
<ul>
<li>SQS</li>
<li>HTTP / HTTPS</li>
<li>lambda</li>
<li>Emails</li>
<li>SMS messages</li>
<li>Mobile notifications</li>
</ul>
</li>
</ul>
<h2 id="sns-integrates-with-a-lot-of-aws-services"><a class="markdownIt-Anchor" href="#sns-integrates-with-a-lot-of-aws-services"></a> SNS integrates with a lot of AWS services</h2>
<ul>
<li>many AWS services can send data directly to SNS for notifications</li>
<li>CloudWatch (for alarms)</li>
<li>Auto Scaling Groups notifications</li>
<li>Amazon S3 (on bucket events)</li>
<li>CloudFormation (upon state changes =&gt; failed to build etc…)</li>
<li>etc…</li>
</ul>
<h2 id="how-to-publish"><a class="markdownIt-Anchor" href="#how-to-publish"></a> How to publish</h2>
<ul>
<li>topic publish (using SDK)
<ul>
<li>create a topic</li>
<li>create a subscription</li>
<li>publish to the topic</li>
</ul>
</li>
<li>direct publish (for mobile apps SDK)
<ul>
<li>create a platform application</li>
<li>create a platform endpoint</li>
<li>publish to the platform endpoint</li>
<li>works with Google GCM, Apple APNS, Amazon ADM…</li>
</ul>
</li>
</ul>
<h2 id="security-2"><a class="markdownIt-Anchor" href="#security-2"></a> Security</h2>
<ul>
<li>Encryption
<ul>
<li>in flight encryption using HTTPS / API</li>
<li>at rest encryption using KMS keys</li>
<li>Client side encryption if the client wants to perform encryption / decryption itself</li>
</ul>
</li>
<li>Access Control: IAM policies to regulate access to the SNS API</li>
<li>SNS access policies (similar to S3 bucket policies)
<ul>
<li>useful for cross account access to SNS topics</li>
<li>useful for allowing other services (S3…) to write to an SNS topic</li>
</ul>
</li>
</ul>
<h2 id="sns-sqs-fan-out"><a class="markdownIt-Anchor" href="#sns-sqs-fan-out"></a> SNS + SQS: Fan Out</h2>
<ul>
<li>Push once in SNS, receive in all SQS queues that are subscribers</li>
<li>fully decoupled, no data loss</li>
<li>SQS allows for: data persistence, delayed processing and retries of work</li>
<li>ability to add more SQS subscribers over time</li>
<li>make sure your SQS queue access policy allows for SNS to write</li>
</ul>
<h3 id="eg-s3-events-to-multiple-queues-or-lambda-functions"><a class="markdownIt-Anchor" href="#eg-s3-events-to-multiple-queues-or-lambda-functions"></a> e.g. S3 Events to multiple queues or lambda functions</h3>
<ul>
<li>if you want to send the same S3 event to many SQS queues, or optionally lambda functions, use fan out pattern</li>
</ul>
<h2 id="sns-fifo-topic"><a class="markdownIt-Anchor" href="#sns-fifo-topic"></a> SNS FIFO topic</h2>
<ul>
<li>similar features as SQS FIFO
<ul>
<li>ordering by message group ID (all messages in the same group are ordered)</li>
<li>deduplication using a deduplication ID or Content Based Deduplication</li>
</ul>
</li>
<li>can only have SQS FIFO queue as subscribers</li>
<li>limited throughput (same throughput as SQS FIFO)</li>
</ul>
<h2 id="message-filtering"><a class="markdownIt-Anchor" href="#message-filtering"></a> Message Filtering</h2>
<ul>
<li>JSON policy used to filter messages sent to SNS topic’s subscriptions</li>
<li>if a subscription doesn’t have a filter policy, it receives every message</li>
</ul>
<h1 id="aws-kinesis"><a class="markdownIt-Anchor" href="#aws-kinesis"></a> AWS Kinesis</h1>
<ul>
<li>make it easy to collect, process and analyze streaming data in real time</li>
<li>ingest real time data such as application logs, Metrics, website clickstreams, IoT telemetry data…</li>
</ul>
<h2 id="kinesis-data-streams"><a class="markdownIt-Anchor" href="#kinesis-data-streams"></a> Kinesis Data Streams</h2>
<ul>
<li>billing is per shard provisioned, can have as many shards as you want</li>
<li>retention between 1 day (default) to 365 days</li>
<li>ability to reprocess (replay) data</li>
<li>once data is inserted in Kinesis, it can’t be deleted (immutability)</li>
<li>data that shares the same partition goes to the same shard (ordering)</li>
<li>producers: AWS SDK, Kinesis Producer Library (KPL), Kinesis Agent</li>
<li>consumers:
<ul>
<li>write your own: Kinesis Client Library (KCL), AWS SDK</li>
<li>managed: AWS Lambda, Kinesis Data Firehose, Kinesis Data Analytics</li>
</ul>
</li>
</ul>
<h2 id="kinesis-firehose"><a class="markdownIt-Anchor" href="#kinesis-firehose"></a> Kinesis Firehose</h2>
<ul>
<li>fully managed service, no administration, automatic scaling, serverless
<ul>
<li>AWS redshift / Amazon S3 / ElasticSearch</li>
</ul>
</li>
<li>pay for data going through firehose</li>
<li>near real time
<ul>
<li>60 seconds latency minimum for non full batches</li>
<li>or minimum 32 MB of data at a time</li>
</ul>
</li>
<li>supports many data formats, conversions, transformations, compression</li>
<li>supports custom data transformations, using AWS Lambda</li>
<li>can send failed or all data to a backup S3 bucket</li>
</ul>
<table>
<thead>
<tr>
<th>Kinesis Data Streams</th>
<th>Kinesis Data Firehos</th>
</tr>
</thead>
<tbody>
<tr>
<td>Streaming service for ingest at scale</td>
<td>load streaming data into S3 / redshift / ES / Thrid party / custom HTTP</td>
</tr>
<tr>
<td>write custom code (producer, consumer)</td>
<td>fully managed</td>
</tr>
<tr>
<td>real time (~200ms)</td>
<td>near real time (buffer time min 60 seconds)</td>
</tr>
<tr>
<td>manage scaling (shard splitting / merging)</td>
<td>automatic scaling</td>
</tr>
<tr>
<td>data storage for 1 to 365 days</td>
<td>no data storage</td>
</tr>
<tr>
<td>support replay capability</td>
<td>doesn’t support replay capability</td>
</tr>
</tbody>
</table>
<h2 id="kinesis-data-analytics-sql-application"><a class="markdownIt-Anchor" href="#kinesis-data-analytics-sql-application"></a> Kinesis Data Analytics (SQL application)</h2>
<ul>
<li>perform real time analytics on Kinesis Streams using SQL</li>
<li>fully managed, no servers to provision</li>
<li>automatic scaling</li>
<li>real time analytics</li>
<li>pay for actual consumtion rate</li>
<li>can create streams out of the real time queries</li>
<li>use cases
<ul>
<li>time series analytics</li>
<li>real time dashboards</li>
<li>real time metrics</li>
</ul>
</li>
</ul>
<h2 id="kinesis-vs-sqs-ordering"><a class="markdownIt-Anchor" href="#kinesis-vs-sqs-ordering"></a> Kinesis vs SQS ordering</h2>
<ul>
<li>let’s assume we have 100 trucks, 5 Kinesis shards, 1 SQS FIFO</li>
<li>Kinesis data streams
<ul>
<li>on average you will have 20 trucks per shard</li>
<li>trucks will have their data ordered within each shard</li>
<li>the maximum amount of consumer in parallel we can have is 5</li>
<li>can receive up to 5MB/s of data</li>
</ul>
</li>
<li>SQS FIFO
<ul>
<li>you only have one SQS FIFO queue</li>
<li>you will have 100 group ID</li>
<li>you can have up to 100 consumers (due to the 100 group ID)</li>
<li>you have up to 300 messages per second (or 3000 if using batching)</li>
<li>better to use if you have a dynamic number of consumers</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>SQS</th>
<th>SNS</th>
<th>Kinesis</th>
</tr>
</thead>
<tbody>
<tr>
<td>consumer pull data</td>
<td>push data to many subscribers</td>
<td>standard: pull data (2MB per shard), enhanced-fan out: push data (2MB per shard per consumer)</td>
</tr>
<tr>
<td>data is deleted after being consumed</td>
<td>data is not persisted (lost if not delivered)</td>
<td>possibility to replay data</td>
</tr>
<tr>
<td>can have as many workers as we want</td>
<td>up to 12,500,000 subscribers</td>
<td>-</td>
</tr>
<tr>
<td>no need to provision throughput</td>
<td>no need to provision throughput</td>
<td>must provision throughput</td>
</tr>
<tr>
<td>ordering guearantees only on FIFO queues</td>
<td>FIFO capability for SQS FIFO</td>
<td>ordering at shard level</td>
</tr>
<tr>
<td>individual message delay capability</td>
<td>integrates with SQS for fan out architecture pattern</td>
<td>data expires after X days</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>meant for real time big data analytics and ETL</td>
</tr>
</tbody>
</table>
<h2 id="amazon-mq"><a class="markdownIt-Anchor" href="#amazon-mq"></a> Amazon MQ</h2>
<ul>
<li>SQS, SNS are cloud native serviecs, and they are using proprietary protocols from AWS</li>
<li>traditional applications running from on-premises may use open protocols such as MQTT, AMQP, STOMP, OpenWire, WSS</li>
<li>when migrating to the cloud, instead of re-engineering the application to use SQS, SNS, we can use Amazon MQ</li>
</ul>
<h1 id="container"><a class="markdownIt-Anchor" href="#container"></a> Container</h1>
<h2 id="docker"><a class="markdownIt-Anchor" href="#docker"></a> Docker</h2>
<ul>
<li>Docker is a software development platform to deploy apps</li>
<li>apps are packaged in containers that can be run on any OS</li>
<li>apps run the same, regardless of where they are run
<ul>
<li>any machine</li>
<li>no compatibility issues</li>
<li>predictable behavior</li>
<li>less work</li>
<li>easier to maintain and deploy</li>
<li>works with any language, any OS, any techonology</li>
</ul>
</li>
</ul>
<h2 id="where-are-docker-images-stored"><a class="markdownIt-Anchor" href="#where-are-docker-images-stored"></a> Where are Docker images stored</h2>
<ul>
<li>Docker images are stored in Docker repositories</li>
<li>public: Docker hub: <a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/</a></li>
<li>private: Amazon ECR (Elastic Container Registry)</li>
<li>Public: Amazon ECR public</li>
</ul>
<h2 id="docker-containers-management"><a class="markdownIt-Anchor" href="#docker-containers-management"></a> Docker Containers Management</h2>
<ul>
<li>to manage containers, we need a container managemenet platform
<ul>
<li>ECS (Amazon’s own container platform)</li>
<li>Fargate: Amazon’s own serverless container platform</li>
<li>EKS: Amazon’s managed Kubernetes (open source)</li>
</ul>
</li>
</ul>
<h2 id="ecs-elastic-container-service"><a class="markdownIt-Anchor" href="#ecs-elastic-container-service"></a> ECS (Elastic Container Service)</h2>
<ul>
<li>Launch Docker containers on AWS</li>
<li>you must provision and maintain the infrastructrue (the EC2 instance)</li>
<li>AWS takes care of starting and stopping the containers</li>
<li>has integrations with the Application Load Balancer</li>
<li>ECS agent will be installed on the EC2 instances for ECS to know who to manage</li>
</ul>
<h2 id="fargate"><a class="markdownIt-Anchor" href="#fargate"></a> Fargate</h2>
<ul>
<li>launch Docker containers on AWS</li>
<li>you do not provision the infrastructure (no EC2 instances to manage)</li>
<li>serverless offering</li>
<li>AWS just runs containers for you based on the CPU / RAM you need</li>
<li>for each container in Fargate it needs an ENI for the public to access it</li>
</ul>
<h2 id="iam-roles-for-ecs-tasks"><a class="markdownIt-Anchor" href="#iam-roles-for-ecs-tasks"></a> IAM roles for ECS tasks</h2>
<ul>
<li>EC2 instance profile
<ul>
<li>used by the ECS agent</li>
<li>makes API calls to ECS service</li>
<li>send container logs to CloudWatch logs</li>
<li>pull docker image from ECR</li>
<li>reference sensitive data in Secret Manager or SSM Parameter store</li>
</ul>
</li>
<li>ECS task role
<ul>
<li>allow each task to have a specific role</li>
<li>use different roles for the different ECS services you run</li>
<li>task role is defined in the task definition</li>
</ul>
</li>
</ul>
<h2 id="ecs-data-volumes-efs-file-systems"><a class="markdownIt-Anchor" href="#ecs-data-volumes-efs-file-systems"></a> ECS data volumes - EFS file systems</h2>
<ul>
<li>works for both EC2 tasks and Fargate tasks</li>
<li>ability to mount EFS volumes onto tasks</li>
<li>tasks launched in any AZ will be able to share the same data in the EFS volume</li>
<li>Fargate + EFS = serverless  + data storage without managing servers</li>
<li>use case: persistent multi-AZ shared storage for your containers</li>
</ul>
<h2 id="load-balancing-for-ec2-launch-type"><a class="markdownIt-Anchor" href="#load-balancing-for-ec2-launch-type"></a> Load Balancing for EC2 Launch type</h2>
<ul>
<li>we get a dynamic port mapping</li>
<li>the ALB supports finding the right port on your EC2 instances</li>
<li>you must allow on the EC2 instnace’s security group any port from the ALB security group</li>
</ul>
<h2 id="load-balancing-for-fargate"><a class="markdownIt-Anchor" href="#load-balancing-for-fargate"></a> Load Balancing for Fargate</h2>
<ul>
<li>each task has a unique IP (because of ENI)</li>
<li>you must allow on the ENI’s security group the task port from the ALB security group</li>
</ul>
<h2 id="event-bridge"><a class="markdownIt-Anchor" href="#event-bridge"></a> Event Bridge</h2>
<ol>
<li>user upload object to S3</li>
<li>S3 triggers event to Amazon Event Bridge</li>
<li>Event Bridge triggers the container task to run</li>
<li>the task will have the role to access S3 and DynamoDB</li>
<li>task will get the object from S3 and save it to DynamoDB</li>
</ol>
<h2 id="ecs-rolling-updates"><a class="markdownIt-Anchor" href="#ecs-rolling-updates"></a> ECS Rolling updates</h2>
<ul>
<li>when updating from v1 to v2, we can control how many tasks can be started and stopped, and in which order, by specifying the minimum and maximum healthy percent</li>
</ul>
<h2 id="ecr-elastic-container-registry"><a class="markdownIt-Anchor" href="#ecr-elastic-container-registry"></a> ECR (Elastic Container Registry)</h2>
<ul>
<li>store, manage and deploy containers on AWS, pay for what you use</li>
<li>fully integrated with ECS and IAM for security, backed by Amazon S3</li>
<li>supports image vulnerability scanning, version, tag, image lifecycle</li>
<li>but if we wanted to automate the whole process, we could be using a CICD, so Continuous Integration Continuous Deployment platform and for example, CodeBuild could help us with this to automate building a Docker image and then pushing it onto Amazon ECR to finally trigger an ECS update.</li>
</ul>
<h2 id="eks-elastic-kubernetes-service"><a class="markdownIt-Anchor" href="#eks-elastic-kubernetes-service"></a> EKS (Elastic Kubernetes Service)</h2>
<ul>
<li>it is a way to launch managed Kubernetes clusters on AWS</li>
<li>Kubernetes is an open source system for automatic deployment, scaling and management of containerized application</li>
<li>it is an alternative to ECS, similar goal but different API</li>
<li>EKS supports
<ul>
<li>EC2 if you want to deploy worker nodes</li>
<li>Fargate to deploy serverless containers</li>
</ul>
</li>
<li>use case: if your company is already using Kunernetes on-premises or in another cloud, and wants to migrate to AWS using Kubernetes</li>
<li>Kubernetes is cloud agnostic (can be used in any cloud, Azure, GCP…)</li>
</ul>
<h1 id="serverless"><a class="markdownIt-Anchor" href="#serverless"></a> Serverless</h1>
<ul>
<li>serverless is a new paradigm in which the developers don’t have to manage servers anymore</li>
<li>Serverless was pioneered by AWS lambda but now also includes anything that’s managed: database, messaging, storage</li>
<li>serverless does not mean there are no servers, it means that you just don’t need to manage / provision / see them</li>
</ul>
<h2 id="lambda"><a class="markdownIt-Anchor" href="#lambda"></a> Lambda</h2>
<ul>
<li>easy pricing
<ul>
<li>pay per request and compute time</li>
</ul>
</li>
<li>integrated with the whole AWS suite of services</li>
<li>integrated with many programming languages
<ul>
<li>Node.js</li>
<li>Python</li>
<li>Java</li>
<li>C# (.NET Core)</li>
<li>Golang</li>
<li>C# / Powershell</li>
<li>Ruby</li>
<li>Lambda container image
<ul>
<li>the container image must implement the lambda runtime API</li>
<li>ECS / Fargate is perferred for running arbitrary Docker images</li>
</ul>
</li>
</ul>
</li>
<li>easy monitoring through AWS CloudWatch</li>
<li>easy to get more resources per functions</li>
</ul>
<h3 id="lambda-limits"><a class="markdownIt-Anchor" href="#lambda-limits"></a> Lambda Limits</h3>
<ul>
<li>Execution
<ul>
<li>Memory allocation: 128MB - 10GB (64 MB increments)</li>
<li>Maximum execution time: 15 minutes</li>
<li>Environment variables (4 KB)</li>
<li>disk capacity in the function container (in /tmp): 512 MB</li>
<li>concurrency executions: 1000 (can be increased)</li>
</ul>
</li>
<li>Deployment
<ul>
<li>lambda function deployment size (compressed zip): 50 MB</li>
<li>size of uncompressed deployment (code + dependencies): 250 MB</li>
<li>can use the /tmp directory to load other files at startup</li>
<li>size of environment variables: 4KB</li>
</ul>
</li>
</ul>
<h3 id="lambdaedge"><a class="markdownIt-Anchor" href="#lambdaedge"></a> Lambda@Edge</h3>
<ul>
<li>
<p>you have deployed a CDN using CloudFront</p>
</li>
<li>
<p>what if you wanted to run a global AWS lambda alongside?</p>
</li>
<li>
<p>or how to implement request filtering before reaching your application?</p>
</li>
<li>
<p>for this, you can use Lambda@Edge</p>
<ul>
<li>build more responsive applications</li>
<li>you don’t manage servers, lambda is deployed globally</li>
<li>customize the CDN content</li>
<li>pay only for what you use</li>
</ul>
</li>
<li>
<p>you can use lambda to change CloudFront requests and responses</p>
<ul>
<li>after cloudfront receives a request from a viewer (viewer request)</li>
<li>before cloudfront forwards the request to the origin (origin request)</li>
<li>after cloudfront receives the response from the origin (origin response)</li>
<li>before cloudfront forwards the response to the viewer (viewer response)</li>
</ul>
</li>
<li>
<p>you can also generate responses to viewers without ever sending the request to the origin</p>
</li>
</ul>
<h2 id="dynamodb"><a class="markdownIt-Anchor" href="#dynamodb"></a> DynamoDB</h2>
<ul>
<li>fully managed, hgihly available with replication across 3 AZ</li>
<li>NoSQL database, not a relational database</li>
<li>scales to massive workloads, distributed database</li>
<li>millions of requests per seconds, trillions of row, 100s of TB of storage</li>
<li>fast and consistent in performance (low latency on retrieval)</li>
<li>integrated with IAM for security, authorization and administration</li>
<li>enables event driven programming with DynamoDB streams</li>
<li>low cost and auto scaling capabilities</li>
</ul>
<h3 id="dynamodb-basics"><a class="markdownIt-Anchor" href="#dynamodb-basics"></a> DynamoDB - basics</h3>
<ul>
<li>DynamoDB is made of tables</li>
<li>each table has a primary key (must be decided at creation time)</li>
<li>each table can have an infinite number of items (rows)</li>
<li>each item has attributes (can be added over time - can be null)</li>
<li>maximum size of a item is 400KB</li>
<li>data types supported are
<ul>
<li>Scalar Type: string, number, binary, booelan, null</li>
<li>Document type: list, map</li>
<li>set types: string set, number set, binary set</li>
</ul>
</li>
</ul>
<h3 id="provisioned-throughput"><a class="markdownIt-Anchor" href="#provisioned-throughput"></a> Provisioned Throughput</h3>
<ul>
<li>table must have provisioned read and write capacity units</li>
<li>read capacity units (RCU), throughput for reads
<ul>
<li>1 RCU = 1 strongly consistent read of 4 KB per second</li>
<li>1 RCU = 2 eventually consistent read of 4 KB per second</li>
</ul>
</li>
<li>write capacity units (WCU), throughput for writes
<ul>
<li>1 WCU = 1 write of 1 KB per second</li>
</ul>
</li>
<li>option to setup auto scaling of throughput to meet demand</li>
<li>throughput can be exceeded temporarily using burst credit</li>
<li>if burst credit are empty, you will get a ProvisionedThroughputExeception</li>
<li>it is then advised to do an exponential back off retry</li>
</ul>
<h3 id="dynamodb-dax"><a class="markdownIt-Anchor" href="#dynamodb-dax"></a> DynamoDB - DAX</h3>
<ul>
<li>DynamoDB accelerator</li>
<li>seamless cache for DynamoDB, no application re-write</li>
<li>writes go through DAX to DynamoDB</li>
<li>micro second latency for cached reads and queries</li>
<li>solves the Hot Key problem (too many reads)</li>
<li>5 minutes TTL for cache by default</li>
<li>up to 10 nodes in the cluster</li>
<li>multi AZ (3 nodes minumum recommended for production)</li>
<li>secure (encryption at rest with KMS, VPC, IAM, CloudTrail…)</li>
</ul>
<h3 id="dynamodb-streams"><a class="markdownIt-Anchor" href="#dynamodb-streams"></a> DynamoDB Streams</h3>
<ul>
<li>changes in DynamoDB (create, update, delete) can end up in a DynamoDB stream</li>
<li>this stream can be read by AWS lambda and we can then do
<ul>
<li>react to changes in real time (welcome email to new users)</li>
<li>analytics</li>
<li>create derivative tables/ views</li>
<li>insert into elasticSearch</li>
</ul>
</li>
<li>cloud implement cross region replication using Streams</li>
<li>Stream has 24 hours of data retention</li>
</ul>
<h3 id="transactions-new-from-nov-2018"><a class="markdownIt-Anchor" href="#transactions-new-from-nov-2018"></a> Transactions (new from Nov 2018)</h3>
<ul>
<li>all or nothing type of operations</li>
<li>coordinated insert, update and delete across multiple tables</li>
<li>include up to 10 unique items or up to 4MB of data</li>
</ul>
<h3 id="on-demand-new-from-nov-2018"><a class="markdownIt-Anchor" href="#on-demand-new-from-nov-2018"></a> On Demand (new from Nov 2018)</h3>
<ul>
<li>no capacity planning needed (WCU / RCU) - scales automatically</li>
<li>2.5x more expensive than provisioned capacity</li>
<li>helpful when spikes are un-predicatable or the application is very low throughput</li>
</ul>
<h3 id="dynamodb-security-and-other-features"><a class="markdownIt-Anchor" href="#dynamodb-security-and-other-features"></a> DynamoDB - Security and other features</h3>
<ul>
<li>Security
<ul>
<li>VPC endpoints available to access DynamoDB without internet</li>
<li>access fully controlled by IAM</li>
<li>encryption at rest using KMS</li>
<li>encryption in transit using SSL / TLS</li>
</ul>
</li>
<li>backup and restore feature available
<ul>
<li>point in time restore like RDS</li>
<li>no performance impact</li>
</ul>
</li>
<li>Global Tables (cross region replication)
<ul>
<li>multi region, fully replicated, high performance</li>
<li>active active replication (data will be replicated to other tables no matter which table gets the data first)</li>
<li>must enable DynamoDB Streams</li>
<li>useful for low latency, Disater Recovery purposes</li>
</ul>
</li>
<li>Amazon DMS (Data Migration Service) can be used to migrate to DynamoDB (from Mongo, Oracle, MySQL, S3, etc…)</li>
<li>you can launch a local DynamoDB on your computer for development purposes</li>
</ul>
<h2 id="api-gateway"><a class="markdownIt-Anchor" href="#api-gateway"></a> API Gateway</h2>
<ul>
<li>AWS lambda + API gateway</li>
<li>support for the webSocket Protocol</li>
<li>handle API versioning</li>
<li>handle different environments (dev, test, prod)</li>
<li>handle security (authentication, authorization)</li>
<li>create API keys, handle request throttling</li>
<li>Swagger / Open API import to quickly define APIs</li>
<li>Transform and validate requests and responses</li>
<li>generate SDK and API specifications</li>
<li>cache API responses</li>
</ul>
<h3 id="api-gateway-endpoint-types"><a class="markdownIt-Anchor" href="#api-gateway-endpoint-types"></a> API Gateway - Endpoint Types</h3>
<ul>
<li>Edge Optimized (default): for global clients
<ul>
<li>requests are routed through the CloudFront edge locations (improves latency)</li>
<li>the API gateway still lives in only one region</li>
</ul>
</li>
<li>Regional
<ul>
<li>for clients within the same region</li>
<li>could manually combine with CloudFront (more control over the caching strategies and the distribution)</li>
</ul>
</li>
<li>private
<ul>
<li>can only by accessed from your VPC using an interface VPC endpoint (ENI)</li>
<li>use a resource policy to define access</li>
</ul>
</li>
</ul>
<h3 id="security-3"><a class="markdownIt-Anchor" href="#security-3"></a> Security</h3>
<h4 id="iam-permissions-2"><a class="markdownIt-Anchor" href="#iam-permissions-2"></a> IAM Permissions</h4>
<ul>
<li>create an IAM policy authorization and attach to User / Role</li>
<li>API gateway verfies IAM permissions passed by the calling application</li>
<li>good to provide access within your own infrastructure</li>
<li>leverage Sig v4 capability where IAM credential are in headers</li>
</ul>
<h4 id="lambda-authorizer"><a class="markdownIt-Anchor" href="#lambda-authorizer"></a> Lambda authorizer</h4>
<ul>
<li>users AWS lambda to validate the token in header being passed</li>
<li>option to cache result of authentication</li>
<li>helps to use OAuth / SAML / third party type of authentication</li>
<li>lamdba (authorizer) must return an IAM policy for the user</li>
</ul>
<h4 id="cognito-user-pools"><a class="markdownIt-Anchor" href="#cognito-user-pools"></a> Cognito User Pools</h4>
<ul>
<li>cognito fully manages user lifecycle</li>
<li>API gateway verifies identity automatically from AWS cognito</li>
<li>no custom implementation required</li>
<li>Cognito only helps with authentication, not authorization</li>
</ul>
<h2 id="aws-cognito"><a class="markdownIt-Anchor" href="#aws-cognito"></a> AWS Cognito</h2>
<ul>
<li>we want to give our users an identity so that they can interact with our application</li>
</ul>
<h3 id="aws-cognito-user-pools"><a class="markdownIt-Anchor" href="#aws-cognito-user-pools"></a> AWS Cognito User Pools</h3>
<ul>
<li>create a serverless database of user for your mobile apps</li>
<li>simple login: username or email  / password combination</li>
<li>possibility to verify emails / phone numbers and add MFA</li>
<li>can enable federated identities (Facebook, Google, SAML…)</li>
<li>sends back a JSON web tokens (JWT)</li>
<li>can be integrated with API gateway for authentication</li>
</ul>
<h3 id="aws-cognito-federated-identity-pools"><a class="markdownIt-Anchor" href="#aws-cognito-federated-identity-pools"></a> AWS Cognito - Federated Identity Pools</h3>
<ul>
<li>goal
<ul>
<li>provide direct access to AWS resources from the client side</li>
</ul>
</li>
<li>How
<ul>
<li>login to federated identity provider - or remain anonymous</li>
<li>get temporary AWS credentials back from the federated identity pool</li>
<li>these credentials come with a pre-defined IAM policy stating their permissions</li>
</ul>
</li>
<li>example
<ul>
<li>provide (temporary) access to write to S3 bucket using Facebook login</li>
</ul>
</li>
</ul>
<h3 id="aws-cognito-sync"><a class="markdownIt-Anchor" href="#aws-cognito-sync"></a> AWS Cognito Sync</h3>
<ul>
<li>deprecated - use AWS AppSync now</li>
<li>store preferneces, configuration, state of app</li>
<li>cross device synchronization</li>
<li>offline capability (synchronization when back online)</li>
<li>requires federated identity pool in Cognito</li>
<li>store data in datasets</li>
</ul>
<h2 id="aws-sam-serverless-application-model"><a class="markdownIt-Anchor" href="#aws-sam-serverless-application-model"></a> AWS SAM - Serverless Application Model</h2>
<ul>
<li>framework for developing and deploying serverless applications</li>
<li>all the configurations is YAML code
<ul>
<li>lambda functions</li>
<li>DynamoDB tables</li>
<li>API Gateway</li>
<li>Cognito User Pool</li>
</ul>
</li>
<li>SAM can help you to run Lambda, API Gateway, DynamoDB locally</li>
<li>SAM can use CodeDeploy to deploy lambda functions</li>
</ul>
<h1 id="databases-comparison"><a class="markdownIt-Anchor" href="#databases-comparison"></a> Databases Comparison</h1>
<h2 id="rds-2"><a class="markdownIt-Anchor" href="#rds-2"></a> RDS</h2>
<ul>
<li>managed postgreSQL / MySQL / Oracle / SQL server</li>
<li>must provision an EC2 instance and EBS volume type and size</li>
<li>support for read replicas and multi AZ</li>
<li>security through IAM, security groups, KMS, SSL in transit</li>
<li>backup / snapshot / point in time restore</li>
<li>managed and scheduled maintenance</li>
<li>monitoring through CloudWatch</li>
<li>use case: store relational datasets (RDBMS / OLTP (online transactional processing)), perform SQL queries, transactional inserts / update / delete is available</li>
</ul>
<h2 id="aurora"><a class="markdownIt-Anchor" href="#aurora"></a> Aurora</h2>
<ul>
<li>compatible API for PostgreSQL / MySQL</li>
<li>Data is held in 6 replicas, 3 AZ</li>
<li>auto healing capability</li>
<li>multi AZ, auto scaling read replicas</li>
<li>read replicas can be global</li>
<li>Aurora database can be global for DR or latency purpose</li>
<li>define EC2 instance type for Aurora instances</li>
<li>same security / monitoring / maintenance features as RDS</li>
<li>Aurora Serverless - for unpredicatble / intermittent workloads</li>
<li>Aurora multi-master - for continuous write failover</li>
<li>no need to provision</li>
<li>use case: same as RDS, but with less maintenance / more flexibility / more performance</li>
</ul>
<h2 id="elasticcache"><a class="markdownIt-Anchor" href="#elasticcache"></a> ElasticCache</h2>
<ul>
<li>managed Redis / Memcached (similar offering as RDS, but for caches)</li>
<li>in memory data store, sub-millisecond latency</li>
<li>must provision an EC2 instance type</li>
<li>support for Clustering (Redis), and Multi AZ, read replicas (sharding)</li>
<li>security through IAM, security groups, KMS, Redis Auth</li>
<li>backup / snapshot / point in time restore</li>
<li>managed and scheduled maintenance</li>
<li>monitoring through CloudWatch</li>
<li>use case: key value store, frequent reads, less writes, cache results for DB queries, store session data for websites, cannot use SQL</li>
</ul>
<h2 id="dynamodb-2"><a class="markdownIt-Anchor" href="#dynamodb-2"></a> DynamoDB</h2>
<ul>
<li>AWS proprietary technology, managed NoSQL database</li>
<li>serverless, provisioned capacity, auto scaling, on demand capacity</li>
<li>can replace ElastiCache as a key value store</li>
<li>highly available, multi AZ by default, read and writes are decoupled, DAX for read cache</li>
<li>reads can be eventually consistent (occasional old data) or strongly consistent (always latest data)</li>
<li>security, authentication and authorization is done through IAM</li>
<li>DynamoDB Streams to integrate with AWS lambda</li>
<li>backup and restore feature, global table feature</li>
<li>monitoring through CloudWatch</li>
<li>can only query on primay key, sort key, or indexes</li>
<li>use case: serverless applications development, distributed serverless cache, doesn’t have SQL query language available, has transactions capability from Nov 2018</li>
</ul>
<h2 id="s3-2"><a class="markdownIt-Anchor" href="#s3-2"></a> S3</h2>
<ul>
<li>great for big objects, not so great for small objects (because of latency)</li>
<li>serverless, scales infinitely, max object size is 5TB</li>
<li>strong consistency</li>
<li>Tiers: S3 standard, S3 IA, S3 One Zone IA, Glacier, for backups</li>
<li>features: versioning, encryption, cross region replication etc…</li>
<li>security: IAM, bucket policy, ACL</li>
<li>encryption: SSE-S3, SSE-KMS, SSE-C, client side encryption, SSL in transit</li>
<li>use case: static files, key value store for big files, website hosting</li>
</ul>
<h2 id="athena"><a class="markdownIt-Anchor" href="#athena"></a> Athena</h2>
<ul>
<li>fully serverless query engine with SQL capabilities</li>
<li>used to query data in S3</li>
<li>pay per query</li>
<li>output results back to S3</li>
<li>secured through IAM</li>
<li>use case: one time SQL queries, serverless queries on S3, log analytics</li>
</ul>
<h2 id="redshift"><a class="markdownIt-Anchor" href="#redshift"></a> RedShift</h2>
<ul>
<li>
<p>Redshift is based on PostgreSQL, but it is not used for OLTP</p>
</li>
<li>
<p>its OLAP - online analytical processing (analytics and data warehousing)</p>
</li>
<li>
<p>Columnar storage of data (instead of row based)</p>
</li>
<li>
<p>massively parallel query execution</p>
</li>
<li>
<p>pay as you go based on the instances provisioned</p>
</li>
<li>
<p>has a SQL interface for performing the queries</p>
</li>
<li>
<p>BI tools such as AWS quicksight or Tableau integrate with it</p>
</li>
<li>
<p>data is loaded from S3 / DynamoDB, DMS, other DBs</p>
</li>
<li>
<p>from 1 node to 128 nodes, up to 160 GB of space per node</p>
</li>
<li>
<p>leader node: for query planning, results aggregation</p>
</li>
<li>
<p>compute node: for performing the queries, send results to leader</p>
</li>
<li>
<p>Redshift Spectrum: perform queries directly against S3 (no need to load)</p>
</li>
<li>
<p>backup and restore, security VPC / IAM / KMS, monitoring</p>
</li>
<li>
<p>Redshift enhanced VPC routing: COPY / UNLOAD goes through VPC</p>
</li>
</ul>
<h3 id="snapshots-dr"><a class="markdownIt-Anchor" href="#snapshots-dr"></a> Snapshots / DR</h3>
<ul>
<li>Redshift has no multi AZ mode</li>
<li>snapshots are point in time backups of a cluster, stored internally in S3</li>
<li>snapshots are incremental (only what has changed is saved)</li>
<li>you can restore a snapshot into a new cluster</li>
<li>automated: every 8 hours, every 5 GB, or on schedule, set retention</li>
<li>manual: snapshot is retained until you delete it</li>
<li>you can configure Amazon Redshift to automatically copy snapshots (automated or manual) of a cluster to another AWS region</li>
</ul>
<h3 id="redshift-specturm"><a class="markdownIt-Anchor" href="#redshift-specturm"></a> Redshift Specturm</h3>
<ul>
<li>query data that is already in S3 without loading it</li>
<li>must have a Redshift cluster available to start the query</li>
<li>the query is then submitted to thousands of Redshift Spectrum nodes</li>
<li>data doesn’t need to be loaded into Redshift first</li>
</ul>
<h2 id="aws-glue"><a class="markdownIt-Anchor" href="#aws-glue"></a> AWS Glue</h2>
<ul>
<li>managed extract, transform, and load (ETL) service</li>
<li>useful to prepare and transform data for analytics</li>
<li>fully serverless service</li>
</ul>
<h3 id="glue-data-catalog"><a class="markdownIt-Anchor" href="#glue-data-catalog"></a> Glue Data Catalog</h3>
<ul>
<li>Glue data catalog: catalog of datasets (metadata)</li>
<li>S3 =&gt; AWS Glue Data Crawler =&gt; AWS Glue Data Catalog =&gt; Amazon Athena</li>
</ul>
<h2 id="neptune"><a class="markdownIt-Anchor" href="#neptune"></a> Neptune</h2>
<ul>
<li>fully managed graph database</li>
<li>when do we use graphs?
<ul>
<li>high relationship data</li>
<li>social networking: users friends with users, replied to comment on post of user and likes other comments</li>
<li>knowledge graphs (Wikipedia)</li>
</ul>
</li>
<li>highly available across 3 AZ, with up to 15 read replicas</li>
<li>point in time recovery, continuous backup to Amazon S3</li>
<li>support for KMS encryption at rest + HTTPS</li>
</ul>
<h2 id="elasticsearch"><a class="markdownIt-Anchor" href="#elasticsearch"></a> ElasticSearch</h2>
<ul>
<li>example: in dynamoDB, you can only find by primary key or indexes</li>
<li>with ElasticSearch you can search any field, even partially matches</li>
<li>it is common to use ElasticSearch as a complement to another database</li>
<li>ElasticSearch also has some usage for Big Data applications</li>
<li>you can provision a cluster of instances</li>
<li>built in integrations: Amazon Kinesis data Firehose, SSL and VPC</li>
<li>comes with Kibana (visulization) and Logstash (log ingestion) - ELK stack</li>
</ul>
<h1 id="aws-cloudwatch"><a class="markdownIt-Anchor" href="#aws-cloudwatch"></a> AWS CloudWatch</h1>
<h2 id="cloudwatch-metrics"><a class="markdownIt-Anchor" href="#cloudwatch-metrics"></a> CloudWatch Metrics</h2>
<ul>
<li>CloudWatch provides metrics for every servcies in AWS</li>
<li>Metric is a variable to monitor (CPU Utilization, Network In…)</li>
<li>metrics belong to namespaces</li>
<li>dimension is an attribute of a metric (instance id, environment, etc…)</li>
<li>up to 10 dimensions per metric</li>
<li>metrics have timestamps</li>
<li>can create CloudWatch dashboards of metrics</li>
</ul>
<h2 id="ec2-detailed-monitoring"><a class="markdownIt-Anchor" href="#ec2-detailed-monitoring"></a> EC2 Detailed monitoring</h2>
<ul>
<li>EC2 instance metrics have metrics every 5 minutes</li>
<li>with detailed monitoring (for a cost), you get data every 1 minute</li>
<li>use detailed monitoring if you want to scale faster for your ASG</li>
<li>the AWS free tier allows us to have 10 detailed monitoring metrics</li>
<li>Note: EC2 memory usage is by default not pushed (must be pushed from inside the instance as a custom metric)</li>
</ul>
<h2 id="cloudwatch-custom-metrics"><a class="markdownIt-Anchor" href="#cloudwatch-custom-metrics"></a> CloudWatch Custom Metrics</h2>
<ul>
<li>possiblity to define and send your own custom metrics to CloudWatch</li>
<li>example: memory usage, disk space, number of logged in users…</li>
<li>use API call PutMetricData</li>
<li>ability to use dimensions (attributes) to segment metrics
<ul>
<li><a target="_blank" rel="noopener" href="http://instance.id">instance.id</a></li>
<li><a target="_blank" rel="noopener" href="http://environment.name">environment.name</a></li>
</ul>
</li>
<li>metric resolution (StorageResolution API parameter - two possible values)
<ul>
<li>Standard: 1 minute</li>
<li>high resolution: 1 / 5 / 10 / 30 seconds - higher cost</li>
</ul>
</li>
<li>important: accepts metric data points two weeks in the past and two hours in the future (make sure to configure your EC2 instance time correctly)</li>
</ul>
<h2 id="cloudwatch-dashboards"><a class="markdownIt-Anchor" href="#cloudwatch-dashboards"></a> CloudWatch Dashboards</h2>
<ul>
<li>great way to setup custom dashboards for quick access to key metrics and alarms</li>
<li>dashboards are global</li>
<li>dashboards can include graphs from different AWS accounts and regions</li>
<li>you can change the time zone and time range of the dashboards</li>
<li>you can setup automatic refresh (10s, 1m, 2m, 5m, 15m)</li>
<li>dashboards can be shared with people who don’t have an AWS account (public, email address…)</li>
<li>pricing
<ul>
<li>3 dashboards (up to 50 metrics) for free</li>
<li>$3 dollar / dashboard / month after</li>
</ul>
</li>
</ul>
<h2 id="cloudwatch-logs"><a class="markdownIt-Anchor" href="#cloudwatch-logs"></a> CloudWatch Logs</h2>
<ul>
<li>
<p>applications can send logs to CloudWatch using the SDK</p>
</li>
<li>
<p>CloudWatch can collect log from</p>
<ul>
<li>elastic beanstalk: collection of log from application</li>
<li>ECS: collection from containers</li>
<li>AWS lambda: collection from function logs</li>
<li>VPC flow logs: VPC specific logs</li>
<li>API Gateway</li>
<li>CloudTrail based on filter</li>
<li>CloudWatch log agents: for example on EC2 machines</li>
<li>Route53: log DNS queries</li>
</ul>
</li>
<li>
<p>CloudWatch Logs can go to</p>
<ul>
<li>batch exporter to S3 for archival</li>
<li>Stream to ElasticSearch cluster for further analytics</li>
</ul>
</li>
<li>
<p>Logs storage architecture</p>
<ul>
<li>log groups: arbitrary name, usually representing an application</li>
<li>log stream: instances within application / log files / containers</li>
</ul>
</li>
<li>
<p>can define log expiration policies (never expire, 30 days, etc…)</p>
</li>
<li>
<p>using the AWS CLI we can tail CloudWatch logs</p>
</li>
<li>
<p>to send logs to CloudWatch, make sure IAM permissions are correct</p>
</li>
<li>
<p>security: encryption of logs using KMS at the group level</p>
</li>
</ul>
<h2 id="cloudwatch-logs-for-ec2"><a class="markdownIt-Anchor" href="#cloudwatch-logs-for-ec2"></a> CloudWatch Logs for EC2</h2>
<ul>
<li>by default, no logs from your EC2 machine will go to CloudWatch</li>
<li>you need to run a CloudWatch agent on EC2 to push the log files you want</li>
<li>make sure IAM permissions are correct</li>
<li>the CloudWatch log agent can be setup on-premises too</li>
</ul>
<h3 id="cloudwatch-logs-agent-vs-unified-agent"><a class="markdownIt-Anchor" href="#cloudwatch-logs-agent-vs-unified-agent"></a> CloudWatch Logs Agent vs Unified Agent</h3>
<ul>
<li>CloudWatch Logs Agent
<ul>
<li>old version of the agent</li>
<li>can only send to CloudWatch logs</li>
</ul>
</li>
<li>CloudWatch unified agent
<ul>
<li>collect additional system-level metrics such as RAM, processors,etc…</li>
<li>collect logs to send to CloudWatch logs</li>
<li>centralized configuration using SSM Parameter Store</li>
</ul>
</li>
</ul>
<h2 id="cloudwatch-alarms"><a class="markdownIt-Anchor" href="#cloudwatch-alarms"></a> CloudWatch Alarms</h2>
<ul>
<li>Alarms are used to trigger notifications for any metric</li>
<li>various options (sampling, percentage, max, min, etc…)</li>
<li>alarm status
<ul>
<li>OK</li>
<li>INSUFFICIENT_DATA</li>
<li>ALARM</li>
</ul>
</li>
<li>period
<ul>
<li>length of time in seconds to evaluate the metric</li>
<li>high resolution custom metrics: 10 / 30 or multiples of 60 seconds</li>
</ul>
</li>
</ul>
<h3 id="alarm-targets"><a class="markdownIt-Anchor" href="#alarm-targets"></a> Alarm Targets</h3>
<ul>
<li>Stop, terminate, reboot or recover an EC2 instance</li>
<li>trigger auto scaling action</li>
<li>send notification to SNS (from which you can do pretty much anything)</li>
</ul>
<h3 id="ec2-instance-recovery"><a class="markdownIt-Anchor" href="#ec2-instance-recovery"></a> EC2 instance recovery</h3>
<ul>
<li>status check
<ul>
<li>instance status = check the EC2 VM</li>
<li>system status = check the underlying hardware</li>
</ul>
</li>
<li>recovery
<ul>
<li>same private, public, elastic IP, metadata, placement group</li>
</ul>
</li>
</ul>
<h3 id="cloudwatch-alarm-good-to-know"><a class="markdownIt-Anchor" href="#cloudwatch-alarm-good-to-know"></a> CloudWatch Alarm: good to know</h3>
<ul>
<li>alarms can be created based on CloudWatch Logs Metrics Filters</li>
<li>to test alarms and notifications, set the alarm state to alarm using CLI</li>
</ul>
<h2 id="cloudwatch-events"><a class="markdownIt-Anchor" href="#cloudwatch-events"></a> CloudWatch Events</h2>
<ul>
<li>event pattern: intercept events from AWS services (sources)
<ul>
<li>example soruces: EC2 instance start, codebuild failure, S3 trsuted advisor</li>
<li>can intercept any API call with CloudTrail integration</li>
</ul>
</li>
<li>schedule or Cron (example: create an event every 4 hours)</li>
<li>A JSON payload is created from the event and passed to a target
<ul>
<li>compute: lambda, batch, ECS task</li>
<li>integration: SQS, SNS, Kinesis data streams, Kinesis data firehose</li>
<li>Orchestration: step functions, codepipeline, codebuild</li>
<li>maintenance: SSM, EC2 actions</li>
</ul>
</li>
</ul>
<h2 id="amazon-eventbridge"><a class="markdownIt-Anchor" href="#amazon-eventbridge"></a> Amazon EventBridge</h2>
<ul>
<li>
<p>eventbridge is the next evolution of CloudWatch Events</p>
</li>
<li>
<p>default event bus: generated by AWS services (CloudWatch events)</p>
</li>
<li>
<p>partner event bus: receive events from SaaS service or applications</p>
</li>
<li>
<p>custom event buses: for your own applications</p>
</li>
<li>
<p>event buses can be accessed by other AWS accounts</p>
</li>
<li>
<p>Rules: how to process the events (similar to CloudWatch Events)</p>
</li>
<li>
<p>Amazon EventBridge builds upon and extends CloudWatch events</p>
</li>
<li>
<p>it uses the same service API and endpoint, and the same underlying service infrastructure</p>
</li>
<li>
<p>eventbridge allows extension to add event buses for your custom applications and your thrid party SaaS apps</p>
</li>
<li>
<p>event bridge has the schema registry capability</p>
</li>
<li>
<p>eventbridge has a different name to mark the new capabilities</p>
</li>
<li>
<p>over time, the CloudWatch events name will be replaced with eventbridge</p>
</li>
</ul>
<h2 id="aws-cloudtrail"><a class="markdownIt-Anchor" href="#aws-cloudtrail"></a> AWS CloudTrail</h2>
<ul>
<li>provides governance, compliancen and audit for your AWS account</li>
<li>CloudTrail is enabled by default</li>
<li>get an history of events / API calls made within your AWS account by
<ul>
<li>console</li>
<li>SDK</li>
<li>CLI</li>
<li>AWS Service</li>
</ul>
</li>
<li>can put logs from CloudTrail into CloudWatch logs or S3</li>
<li>a trail can be applied to all regions (default) or a single region</li>
<li>if a resource is deleted in AWS, investigate CloudTrail first</li>
</ul>
<h2 id="cloudtrail-insights"><a class="markdownIt-Anchor" href="#cloudtrail-insights"></a> CloudTrail Insights</h2>
<ul>
<li>enable CloudTrail insights to detect unusual activity in your account
<ul>
<li>inaccurate resource provisioning</li>
<li>hitting service limits</li>
<li>bursts of AWS IAM actions</li>
<li>gaps in periodic maintenance activity</li>
</ul>
</li>
<li>CloudTrail insights analyzes normal management events to create a baseline</li>
<li>and then continuously analyzes write events to detect unusual patterns
<ul>
<li>anomalies appear in the CloudTrail console</li>
<li>event is sent to Amazon S3</li>
<li>an eventbridge event is generated (for automation needs)</li>
</ul>
</li>
</ul>
<h3 id="cloudtrail-events-retention"><a class="markdownIt-Anchor" href="#cloudtrail-events-retention"></a> CloudTrail Events retention</h3>
<ul>
<li>events are stored for 90 days in CloudTrail</li>
<li>to keep events beyond this period, log them to S3 and use Athena</li>
</ul>
<h1 id="aws-config"><a class="markdownIt-Anchor" href="#aws-config"></a> AWS Config</h1>
<ul>
<li>helps with auditing and recording compliance of your AWS resources</li>
<li>helps record configurations and changes over time</li>
<li>questions that can be solved by AWS Config
<ul>
<li>is there unrestricted SSH access to my security groups</li>
<li>do my buckets have any public access</li>
<li>how has my ALB configuration changed over time</li>
</ul>
</li>
<li>you can receive alerts (SNS notifications) for any changes</li>
<li>AWS Config is a per-region service</li>
<li>can be aggregated across regions and accounts</li>
</ul>
<h2 id="config-rules-remediations"><a class="markdownIt-Anchor" href="#config-rules-remediations"></a> Config Rules - remediations</h2>
<ul>
<li>automate remediation of non-compliant resources using SSM automation documents</li>
<li>use AWS-managed automation documents or create custom automation documents
<ul>
<li>tip: you can create custom automation documents that invokes lambda function</li>
</ul>
</li>
<li>you can set remediation retries if the resource is still non-compliant after auto-remediation</li>
</ul>
<h2 id="config-rules-notifications"><a class="markdownIt-Anchor" href="#config-rules-notifications"></a> Config Rules - notifications</h2>
<ul>
<li>use eventbridge to trigger notifications when AWS resources are non-compliant</li>
<li>ability to send configuration changes and compliance state notifications to SNS (all events - use SNS filtering or filter at client-side)</li>
</ul>
<h2 id="cloudwatch-vs-cloudtrail-vs-config"><a class="markdownIt-Anchor" href="#cloudwatch-vs-cloudtrail-vs-config"></a> CloudWatch vs CloudTrail vs Config</h2>
<ul>
<li>CloudWatch
<ul>
<li>performance monitoring (metrics, CPU, network, etc…) and dashboards</li>
<li>event and alerting</li>
<li>log aggregation and analysis</li>
</ul>
</li>
<li>CloudTrail
<ul>
<li>record API calls made within your account by everyone</li>
<li>can define trails for specific resources</li>
<li>global service</li>
</ul>
</li>
<li>Config
<ul>
<li>record configuration changes</li>
<li>evaluate resources against comliance rules</li>
<li>get timeline of changes and compliance</li>
</ul>
</li>
</ul>
<h3 id="example-for-an-elastic-load-balancer"><a class="markdownIt-Anchor" href="#example-for-an-elastic-load-balancer"></a> Example for an Elastic Load Balancer</h3>
<ul>
<li>CloudWatch
<ul>
<li>monitoring incoming connections metric</li>
<li>visualize error codes as a percentage over time</li>
<li>make a dashboard to get an idea of your load balancer performance</li>
</ul>
</li>
<li>CloudTrail
<ul>
<li>track who made any changes to the load balancer with API calls</li>
</ul>
</li>
<li>Config
<ul>
<li>trakc security group rules for the load balancer</li>
<li>track configuration changes for the load balancer</li>
<li>ensure an SSL certificate is always assigned to the load balancer (compliance)</li>
</ul>
</li>
</ul>
<h1 id="aws-sts-security-token-service"><a class="markdownIt-Anchor" href="#aws-sts-security-token-service"></a> AWS STS (Security Token Service)</h1>
<ul>
<li>allows to grant limited and temporary access to AWS resources</li>
<li>token is valid for up to one hour (must be refreshed)</li>
<li>AssumeRole
<ul>
<li>within your own account: for enhanced security</li>
<li>cross account access: assume role in target account for perform actions there</li>
</ul>
</li>
<li>AssumeRoleWithSAML
<ul>
<li>return credentials for users logged with SAML</li>
</ul>
</li>
<li>AssumeRoleWithWebIdentity
<ul>
<li>return credentials for users logged with an IDP (facebook, google…)</li>
<li>AWS recommends against using this, and using Cognito instead</li>
</ul>
</li>
<li>GetSessionToken
<ul>
<li>for MFA, from a user or AWS account root user</li>
</ul>
</li>
</ul>
<ol>
<li>define an IAM role within your account or cross-account</li>
<li>define which principals can access this IAM role</li>
<li>use AWS STS to retrieve credentials and impersonate the IAM role you have access to (AssumeRole API)</li>
<li>temporary credentials can be valid between 15 minutes to 1 hour</li>
</ol>
<h2 id="identity-federation-in-aws"><a class="markdownIt-Anchor" href="#identity-federation-in-aws"></a> Identity Federation in AWS</h2>
<ul>
<li>federation lets users outside of AWS to assume temporary role for accessing AWS resources</li>
<li>these users assume identity provided access role</li>
<li>federations can have many flavors
<ul>
<li>SAML</li>
<li>Custom Identity Broker</li>
<li>Amazon Cognito</li>
<li>Single Sign On</li>
<li>Non-SAML with AWS Microsoft AD</li>
</ul>
</li>
<li>using federation, you don’t need to create IAM users (user management is outside of AWS)</li>
</ul>
<h2 id="saml-20-federation"><a class="markdownIt-Anchor" href="#saml-20-federation"></a> SAML 2.0 Federation</h2>
<ul>
<li>needs to setup a trust between AWS IAM and SAML (both ways)</li>
<li>SAML enables web based, cross domain SSO</li>
<li>uses the STS API: AssumeRoleWithSAML</li>
<li>note federation through SAML is the old way of doing things</li>
<li>Amazon SSO federation is the new managed and simpler way</li>
</ul>
<h2 id="aws-directory-services"><a class="markdownIt-Anchor" href="#aws-directory-services"></a> AWS Directory Services</h2>
<ul>
<li>AWS Managed Microsoft AD
<ul>
<li>create your own AD in AWS, manage users locally, supports MFA</li>
<li>establish trust connections with your on-premises AD</li>
</ul>
</li>
<li>AD Connector
<ul>
<li>Directory Gateway (proxy) to redirect to on-premises AD</li>
<li>users are managed on the on-premises AD (not on AWS)</li>
</ul>
</li>
<li>Simple AD
<ul>
<li>AD compatible managed directory on AWS</li>
<li>cannot be joined with on-premises AD (users managed on AWS only)</li>
</ul>
</li>
</ul>
<h2 id="aws-organizations"><a class="markdownIt-Anchor" href="#aws-organizations"></a> AWS Organizations</h2>
<ul>
<li>global service</li>
<li>allows to manage multiple AWS accounts</li>
<li>the main account is the master account - you can’t change it</li>
<li>other accounts are member accounts</li>
<li>member accounts can only be part of one organization</li>
<li>consolidated billing across all accounts - single payment method</li>
<li>pricing benefits from aggregated usage</li>
<li>API is available to automate AWS account creation</li>
</ul>
<h3 id="multi-account-strategies"><a class="markdownIt-Anchor" href="#multi-account-strategies"></a> Multi account strategies</h3>
<ul>
<li>create accounts per department, per cost center, per dev/test/prod, based on regulatory restrictions (using SCP), for better resource isolation, to have separate per-account service limits, isolated account for logging</li>
<li>multi account vs one account multi VPC</li>
<li>use tagging standards for billing purposes</li>
<li>enable CloudTrail on all accounts, send logs to central S3 account</li>
<li>send CloudWatch logs to central logging account</li>
<li>establish cross account roles for admin purpose</li>
</ul>
<h3 id="service-control-policies-scp"><a class="markdownIt-Anchor" href="#service-control-policies-scp"></a> Service Control Policies (SCP)</h3>
<ul>
<li>whitelist or blacklist IAM actions</li>
<li>applied at the OU or Account level</li>
<li>does not apply to the master account</li>
<li>SCP is applied to all the users and roles of the account, including Root</li>
<li>the SCP does not affect service linked roles
<ul>
<li>service linked roles enable other AWS services to integrate with AWS organizations and can’t be restricted by SCPs</li>
</ul>
</li>
<li>SCP must have an explicit Allow (does not allow anything by default)</li>
<li>use cases
<ul>
<li>restrict access to certain services (for example: can’t use EMR)</li>
<li>enforce PCI compliance by explicitly disabling services</li>
</ul>
</li>
</ul>
<h3 id="aws-organization-moving-accounts"><a class="markdownIt-Anchor" href="#aws-organization-moving-accounts"></a> AWS Organization - moving accounts</h3>
<ul>
<li>to migrate accounts from one organization to another
<ul>
<li>remove the member account from the old organization</li>
<li>send an invite to the new organization</li>
<li>accept the invite to the new organization from the member account</li>
</ul>
</li>
<li>if you want the master account of the old organization to also join the new organization
<ul>
<li>remove the member accounts from the organization using the procedure above</li>
<li>delete the old organization</li>
<li>repeat the process above to invite the old master account to the new org</li>
</ul>
</li>
</ul>
<h1 id="iam-advanced"><a class="markdownIt-Anchor" href="#iam-advanced"></a> IAM Advanced</h1>
<h2 id="iam-for-s3"><a class="markdownIt-Anchor" href="#iam-for-s3"></a> IAM for S3</h2>
<ul>
<li>ListBucket permission applies to
<ul>
<li><code>arn:aws:s3:::test</code></li>
<li>bucket level permission</li>
</ul>
</li>
<li>GetObject, PutObject, DeleteObject applies to
<ul>
<li><code>arn:aws:s3:::test/*</code></li>
<li>object level permission</li>
</ul>
</li>
</ul>
<h2 id="iam-roles-vs-resource-based-policies"><a class="markdownIt-Anchor" href="#iam-roles-vs-resource-based-policies"></a> IAM Roles vs Resource Based Policies</h2>
<ul>
<li>when you assume a role (user, application or service), you give up your original permissions and take the permissions assigned to the role</li>
<li>when using a resource based policy, the principal doesn’t have to give up his permissions</li>
</ul>
<h2 id="iam-permission-boundaries"><a class="markdownIt-Anchor" href="#iam-permission-boundaries"></a> IAM permission boundaries</h2>
<ul>
<li>IAM permission boundaries are supported for users and roles (not groups)</li>
<li>advanced feature to use a managed policy to set the maximum permissions an IAM entity can get</li>
<li>if a user has been assigned a permission boundary so that it can only access S3, then no matter what permission policies it has, it can only access to S3, nothing else.</li>
</ul>
<h2 id="aws-resource-access-manager-ram"><a class="markdownIt-Anchor" href="#aws-resource-access-manager-ram"></a> AWS Resource Access Manager (RAM)</h2>
<ul>
<li>share AWS resources that you own with other AWS accounts</li>
<li>share with any account or within your organization</li>
<li>avoid resource duplication</li>
<li>VPC subnets
<ul>
<li>allow to have all the resources launched in the same subnets</li>
<li>must be from the same AWS organization</li>
<li>cannot share security groups and default VPC</li>
<li>participants can manage their own resources in there</li>
<li>participants can’t view, modify, delete resources that belong to other participants or the owner</li>
</ul>
</li>
<li>AWS transit gateway</li>
<li>route53 resolver rules</li>
<li>license manager configurations</li>
</ul>
<h2 id="aws-sso"><a class="markdownIt-Anchor" href="#aws-sso"></a> AWS SSO</h2>
<ul>
<li>centrally manage single sign on to access multiple accounts and third party business applications</li>
<li>integrated with AWS organizations</li>
<li>support SAML 2.0 markup</li>
<li>integration with on-premises active directory</li>
<li>centralized permissioin management</li>
<li>centralized auditing with CloudTrail</li>
</ul>
<h1 id="aws-security"><a class="markdownIt-Anchor" href="#aws-security"></a> AWS Security</h1>
<h2 id="encryption-in-flight-ssl"><a class="markdownIt-Anchor" href="#encryption-in-flight-ssl"></a> Encryption in flight (SSL)</h2>
<ul>
<li>data is encrypted before sending and decrypted after receiving</li>
<li>SSL certificate help with encryption (HTTPS)</li>
<li>encryption in flight ensures no MITM (man in the middle) attach can happen</li>
</ul>
<h2 id="server-side-encryption-at-rest"><a class="markdownIt-Anchor" href="#server-side-encryption-at-rest"></a> Server side encryption at rest</h2>
<ul>
<li>data is encrypted after being received by the server</li>
<li>data is decrypted before being sent</li>
<li>it is stored in an encrypted form thanks to a key (usually a data key)</li>
<li>the encryption / decryption keys must be managed somewhere and the server must have access to it</li>
</ul>
<h2 id="client-side-encryption-2"><a class="markdownIt-Anchor" href="#client-side-encryption-2"></a> Client side encryption</h2>
<ul>
<li>data is encrypted by the client and never decrypted by the server</li>
<li>data will be decrypted by a receiving client</li>
<li>the server should not be able to decrypt the data</li>
</ul>
<h2 id="aws-kms-key-management-service"><a class="markdownIt-Anchor" href="#aws-kms-key-management-service"></a> AWS KMS (key management service)</h2>
<ul>
<li>anytime you hear encryption for an AWS service, it is most likely KMS</li>
<li>easy way to control access to your data, AWS manages keys for us</li>
<li>fully integrated with IAM authorization</li>
<li>seamlessly integrated into
<ul>
<li>EBS</li>
<li>S3</li>
<li>Redshift</li>
<li>RDS</li>
<li>SSM</li>
</ul>
</li>
<li>but you can also use the CLI / SDK</li>
</ul>
<h3 id="kms-customer-master-key-cmk-types"><a class="markdownIt-Anchor" href="#kms-customer-master-key-cmk-types"></a> KMS - Customer Master Key (CMK) Types</h3>
<ul>
<li>Symmetric (AES-256)
<ul>
<li>first offering of KMS, single encryption key that is used to encrypt and decrypt</li>
<li>AWS services that are integrated with KMS use Symmetric CMKs</li>
<li>you never get access to the key unencrypted (must call KMS API to use)</li>
</ul>
</li>
<li>Asymmetric (RSA and ECC key pairs)
<ul>
<li>public (Encrypt) and private (decrypt) key</li>
<li>used for encrypt / decrypt, or sign / verify operations</li>
<li>the public key ios downloadable, but you can’t access the private key unencrypted</li>
<li>use case: encryption outside of AWS by users who can’t call the KMS API</li>
</ul>
</li>
</ul>
<h3 id="pricing"><a class="markdownIt-Anchor" href="#pricing"></a> Pricing</h3>
<ul>
<li>able to fully manage the keys and policies
<ul>
<li>create</li>
<li>rotation policies</li>
<li>disable</li>
<li>enable</li>
</ul>
</li>
<li>able to audit key usage (using CloudTrail)</li>
<li>3 types of customer master keys (CMK)
<ul>
<li>AWS managed service default CMK: free</li>
<li>user keys created in KMS: $1 / month</li>
<li>user keys imported (must be 256-bit symmetric key): $1 / month</li>
</ul>
</li>
<li>plus pay for API call to KMS</li>
</ul>
<h3 id="kms-101"><a class="markdownIt-Anchor" href="#kms-101"></a> KMS 101</h3>
<ul>
<li>anytime you need to share sensitive information, use KMS
<ul>
<li>database passwords</li>
<li>credentials to external service</li>
<li>private key of SSL certificates</li>
</ul>
</li>
<li>the value in KMS is that the CMK used to encrypt data can never be retrieved by the user, and the CMK can be rotated for extra security</li>
<li>never ever store your secrets in plaintext, especially in your code</li>
<li>encrypted secrets can be stored in the code / environment variables</li>
<li>KMS can only help in encrypting up to 4 KB of data per call</li>
<li>if data &gt; 4KB, use envelope encryption</li>
</ul>
<h3 id="kms-key-policies"><a class="markdownIt-Anchor" href="#kms-key-policies"></a> KMS key policies</h3>
<ul>
<li>control access to KMS keys, similar to S3 bucket policies</li>
<li>different: you cannot control access without them</li>
<li>default KMS key policy
<ul>
<li>created if you don’t provide a specific KMS key policy</li>
<li>complete access to the key to the root user = entire AWS account</li>
<li>the root user can administer the key and all IAM accounts can use the key</li>
<li>gives access to the IAM policies to the KMS key</li>
</ul>
</li>
<li>custom KMS key policy
<ul>
<li>define users, roles that can access the KMS key</li>
<li>define who can administer the key</li>
<li>useful for cross-account access of your KMS key</li>
</ul>
</li>
</ul>
<h3 id="kms-automatic-key-rotation"><a class="markdownIt-Anchor" href="#kms-automatic-key-rotation"></a> KMS Automatic Key Rotation</h3>
<ul>
<li>for Costumer managed CMK (not AWS managed CMK)</li>
<li>if enabled: automatic key rotation heppens every 1 year</li>
<li>previous key is kept active so you can decrypt old data</li>
<li>new key has the same CMK ID (only the backing key is changed)</li>
</ul>
<h2 id="ssm-parameter-store"><a class="markdownIt-Anchor" href="#ssm-parameter-store"></a> SSM Parameter Store</h2>
<ul>
<li>secure storage for configuration and secrets</li>
<li>optional seamless encryption using KMS</li>
<li>serverless, scalable, durable, easy SDK</li>
<li>version tracking of configurations / secrets</li>
<li>configuration management using path and IAM</li>
<li>notifications with CloudWatch events</li>
<li>integration with CloudFormation</li>
</ul>
<h2 id="aws-secrets-manager"><a class="markdownIt-Anchor" href="#aws-secrets-manager"></a> AWS Secrets Manager</h2>
<ul>
<li>newer service, meant for storing secrets</li>
<li>capability to force rotation of secrets every X days</li>
<li>automate generation of secrets on rotation (uses lambda)</li>
<li>integration with Amazon RDS</li>
<li>secrets are encrypted using KMS</li>
</ul>
<h2 id="cloudhsm"><a class="markdownIt-Anchor" href="#cloudhsm"></a> CloudHSM</h2>
<ul>
<li>AWS provisions encryption hardware</li>
<li>dedicated hardware (HSM = Hardware Security Module)</li>
<li>you manage your own encryption keys entirely (not AWS)</li>
<li>HSM device is tamper resistant</li>
<li>supports both symmetric and asymmetric encryption (SSL/TLS keys)</li>
<li>no free tier available</li>
<li>must use the CloudHSM client software</li>
<li>refshift support CloudHSM for database encryption and key management</li>
<li>good option to use with SSE-C encryption</li>
</ul>
<h2 id="aws-shield"><a class="markdownIt-Anchor" href="#aws-shield"></a> AWS Shield</h2>
<ul>
<li>AWS shield standard
<ul>
<li>free service that is activated for every AWS customer</li>
<li>provides protection from attacks such as SYN/UDP floods, reflection attacks and other layer 3 / layer 4 attacks</li>
</ul>
</li>
<li>AWS Shield Advanced
<ul>
<li>optional DDoS mitigation service ($3000 per month per organization)</li>
<li>protect against more sophisticated attack on EC2, ELB, CloudFront, Global Accelerator, Route53</li>
</ul>
</li>
</ul>
<h2 id="aws-waf-web-application-firewall"><a class="markdownIt-Anchor" href="#aws-waf-web-application-firewall"></a> AWS WAF (Web Application Firewall)</h2>
<ul>
<li>protects your web applications from common web exploits (layer 7)</li>
<li>layer 7 is HTTP (vs layer 4 is TCP)</li>
<li>deploy on Application Load Balancer, API Gateway, CloudFront</li>
<li>define web ACL
<ul>
<li>rules can include: IP addresses, HTTP headers, HTTP body, URI strings</li>
<li>protects from common attack - SQL injection and cross-site scripting (XSS)</li>
<li>size constraints, geo-match</li>
<li>rate based rules (to count occurrences of events) - for DDoS protection</li>
</ul>
</li>
</ul>
<h2 id="aws-guardduty"><a class="markdownIt-Anchor" href="#aws-guardduty"></a> AWS GuardDuty</h2>
<ul>
<li>intelligent threat discovery to protect AWS account</li>
<li>uses machine learning algorithms, anomaly detection, third party data</li>
<li>one click to enable (30 days trial), no need to install software</li>
<li>input data includes
<ul>
<li>CloudTrail log: unusual API calls, unauthorized deployments</li>
<li>VPC flow logs: unusual internal traffic, unusual IP addresses</li>
<li>DNS logs: compromised EC2 instances sending encoded data within DNS queries</li>
</ul>
</li>
<li>can setup CloudWatch event rules to be notified in case of findings</li>
<li>CloudWatch events rules can target AWS lambda or SNS</li>
<li>can protect against CryptoCurrency attacks</li>
</ul>
<h2 id="aws-inspector"><a class="markdownIt-Anchor" href="#aws-inspector"></a> AWS Inspector</h2>
<ul>
<li>automated security assessments for EC2 instances</li>
<li>analyze the running OS against known vulnerabilities</li>
<li>analyze against unintended network accessibility</li>
<li>AWS Inspector agent must be installed on OS in EC2 instances</li>
<li>after the assessment, you get a report with a list of vulnerabilities</li>
<li>possibilitiy to send notifications to SNS</li>
</ul>
<h2 id="aws-macie"><a class="markdownIt-Anchor" href="#aws-macie"></a> AWS Macie</h2>
<ul>
<li>Amazon Macie is a fully managed data security and data privacy service that uses machine learning and pattern matching to discover and protect your sensitive data in AWS</li>
<li>Macie helps identify and alert you to sensitive data, such as personally identifiable information (PII)</li>
</ul>
<h1 id="aws-vpc"><a class="markdownIt-Anchor" href="#aws-vpc"></a> AWS VPC</h1>
<h2 id="understanding-cidr-classless-inter-domain-routing-ipv4"><a class="markdownIt-Anchor" href="#understanding-cidr-classless-inter-domain-routing-ipv4"></a> Understanding CIDR (Classless Inter-Domain Routing) - IPv4</h2>
<ul>
<li>
<p>CIDR are used for security groups rules, or AWS networking in general</p>
</li>
<li>
<p>they help to define an IP address range</p>
</li>
<li>
<p>a CIDR has two components</p>
<ul>
<li>the base IP</li>
<li>the subnet mask</li>
</ul>
</li>
<li>
<p>the base IP represents an IP contained in the range</p>
</li>
<li>
<p>the subnet masks defines how many bits can change in the IP</p>
</li>
<li>
<p>the subnet masks basically allows part of the underlying IP to get additional next values from the base IP</p>
<ul>
<li><code>/32</code> allow for 1 IP = <code>2^0</code></li>
<li><code>/31</code> allow for 1 IP = <code>2^1</code></li>
<li><code>/30</code> allow for 1 IP = <code>2^2</code></li>
<li><code>/29</code> allow for 1 IP = <code>2^3</code></li>
<li><code>/28</code> allow for 1 IP = <code>2^4</code></li>
<li><code>/27</code> allow for 1 IP = <code>2^5</code></li>
<li><code>/26</code> allow for 1 IP = <code>2^6</code></li>
<li><code>/25</code> allow for 1 IP = <code>2^7</code></li>
<li><code>/24</code> allow for 1 IP = <code>2^8</code></li>
<li><code>/16</code> allow for 1 IP = <code>2^16</code></li>
<li><code>/0</code> allow for 1 IP = <code>2^32</code></li>
</ul>
</li>
<li>
<p>quick memo</p>
<ul>
<li><code>/32</code> - no IP number can change</li>
<li><code>/24</code> - last IP number can change</li>
<li><code>/16</code> - last IP two numbers can change</li>
<li><code>/8</code> - last IP 3 numbers can change</li>
<li><code>/0</code> - all IP numbers can change</li>
</ul>
</li>
</ul>
<h2 id="private-vs-public-ip-allowed-ranges"><a class="markdownIt-Anchor" href="#private-vs-public-ip-allowed-ranges"></a> Private vs public IP allowed ranges</h2>
<ul>
<li>the internet assigned number authority established certain blocks of IPv4 addresses for the use of private (LAN) and public addresses</li>
<li>private IP can only allow certain values
<ul>
<li>10.0.0.0 - 10.255.255.255 (in big networks)</li>
<li>172.16.0.0 - 172.31.255.255 (default AWS one)</li>
<li>192.168.0.0 - 192.168.255.255 (home networks)</li>
</ul>
</li>
<li>all the rest of the IP on the internet are public IP</li>
</ul>
<h2 id="default-vpc-walkthrough"><a class="markdownIt-Anchor" href="#default-vpc-walkthrough"></a> Default VPC walkthrough</h2>
<ul>
<li>all new accounts have a default VPC</li>
<li>new instances are launched into default VPC if no subnet is specified</li>
<li>default VPC have internet connectivity and all instances have public IP</li>
<li>we also get a public and private DNS name</li>
</ul>
<h2 id="vpc-in-aws-ipv4"><a class="markdownIt-Anchor" href="#vpc-in-aws-ipv4"></a> VPC in AWS - IPv4</h2>
<ul>
<li>you can have multiple VPCs in a region (max 5 per region)</li>
<li>max CIDR per VPC is 5, for each CIDR
<ul>
<li>min size is <code>/28</code> = 16 IP addresses</li>
<li>max size is <code>/16</code> = 65536 IP addresses</li>
</ul>
</li>
<li>because VPC is private, only the private IP ranges are allowed</li>
<li>your VPC CIDR should not overlap with your other networks</li>
</ul>
<h2 id="subnets-ipv4"><a class="markdownIt-Anchor" href="#subnets-ipv4"></a> Subnets - IPv4</h2>
<ul>
<li>AWS reserves 5 IPs addresses (first 4 and last 1 IP address) in each subnet</li>
<li>these 5 IPs are not available for use and cannot be assigned to an instance</li>
<li>if CIDR block is 10.0.0.0/24, reserved IP are
<ul>
<li>10.0.0.1: network address</li>
<li>10.0.0.2: reserved by AWS for the VPC router</li>
<li>10.0.0.3: reserved by AWS for mapping to Amazon provided DNS</li>
<li>10.0.0.4: reserved by AWS for future use</li>
<li>10.0.0.255: network broadcast address, AWS does not support broadcast in a VPC, therefore the address is reserved</li>
</ul>
</li>
<li>exam tip
<ul>
<li>if you need 29 IP addresses for EC2 instances, you can’t choose a subnet of size /27 (32 IPs)</li>
<li>you need at least 64 IP, subnet size /26 (<code>64 - 5 &gt; 29</code>, but <code>32 - 5 &lt;= 29</code>)</li>
</ul>
</li>
</ul>
<h2 id="internet-gateways"><a class="markdownIt-Anchor" href="#internet-gateways"></a> Internet Gateways</h2>
<ul>
<li>internet gateways helps our VPC instances connect with the internet</li>
<li>it scales horizontally and is HA and redundant</li>
<li>must be created separately from VPC</li>
<li>one VPC can only be attached to one IGW and vice versa</li>
<li>internet gateway is also a NAT for the instances that have a public IPv4</li>
<li>internet gateways on their own do not allow internet access</li>
<li>route tables must also be edited</li>
</ul>
<p>If you launch an EC2 instance, to give the instance public internet, you need to edit the route table.</p>
<ol>
<li>associate route table to the subnet</li>
<li>add a rule in route table, so that when instance is trying to access a public IP, it will route the traffic to the internet gateway</li>
</ol>
<p>For instances in private subnet, if they were to access it through the internet gateway, they would also be accessible from the internet (not we want). So we need NAT</p>
<h2 id="nat-instances-network-address-translation"><a class="markdownIt-Anchor" href="#nat-instances-network-address-translation"></a> NAT instances - network address translation</h2>
<ul>
<li>allows instances in the private subnets to connect to the internet</li>
<li>must be launched in a public subnet</li>
<li>must disable EC2 flag: source / destination check</li>
<li>must have elastic IP attached to it</li>
<li>route table must be configured to route traffic from private subnets to NAT instance</li>
</ul>
<p>NAT instance will then route traffic to the internet gateway because of the route table rules.</p>
<p><img src="/../images/AWS-SAA-Review/1.png" alt="" /></p>
<h2 id="nat-gateway"><a class="markdownIt-Anchor" href="#nat-gateway"></a> NAT Gateway</h2>
<ul>
<li>AWS managed NAT, higher bandwidth, better availability, no admin needed</li>
<li>pay by the hour for usage and bandwidth</li>
<li>NAT is created in a specified AZ, uses an EIP</li>
<li>cannot be used by an instance in the subnet (only from the other subnets)</li>
<li>requires an IGW (private subnet -&gt; NAT -&gt; IGW)</li>
<li>no security group to manage / required</li>
</ul>
<h3 id="nat-gateway-with-ha"><a class="markdownIt-Anchor" href="#nat-gateway-with-ha"></a> NAT Gateway with HA</h3>
<ul>
<li>NAT gateway is resilient within a single AZ</li>
<li>must create multiple NAT gateway in multiple AZ for fault-tolerance</li>
<li>there is no cross AZ failover needed because if an AZ goes down it doesn’t need NAT</li>
</ul>
<h2 id="dns-resolution-in-vpc"><a class="markdownIt-Anchor" href="#dns-resolution-in-vpc"></a> DNS Resolution in VPC</h2>
<ul>
<li>enableDnsSupport (DNS Resolution settings)
<ul>
<li>default is True</li>
<li>helps decide if DNS resolution is supported for the VPC</li>
<li>if True, queries the AWS DNS server at 169.254.169.253</li>
</ul>
</li>
<li>enableDnsHostname (DNS Hostname setting)
<ul>
<li>False by default for newly created VPC</li>
<li>True by default for default VPC</li>
<li>won’t do anything unless enableDnsSupport is True</li>
<li>if True, assign public hostname to EC2 instance if it has a public</li>
</ul>
</li>
<li>if you use custom DNS domain names in a private zone in Route 53, you must set both these attributes to true</li>
</ul>
<h2 id="network-acls-and-security-group"><a class="markdownIt-Anchor" href="#network-acls-and-security-group"></a> Network ACLs and Security Group</h2>
<ul>
<li>
<p>Security group is the firewall of EC2 Instances.</p>
</li>
<li>
<p>Network ACL is the firewall of the VPC Subnets.</p>
</li>
<li>
<p>Security groups are tied to an instance whereas Network ACLs are tied to the subnet.</p>
</li>
<li>
<p>Network ACLs are applicable at the subnet level, so any instance in the subnet with an associated NACL will follow rules of NACL. That’s not the case with security groups, security groups has to be assigned explicitly to the instance.</p>
</li>
<li>
<p>This means any instances within the subnet group gets the rule applied. With Security group, you have to manually assign a security group to the instances.</p>
</li>
<li>
<p>Security groups are stateful: This means any changes applied to an incoming rule will be automatically applied to the outgoing rule. e.g. If you allow an incoming port 80, the outgoing port 80 will be automatically opened.</p>
</li>
<li>
<p>Network ACLs are stateless: This means any changes applied to an incoming rule will not be applied to the outgoing rule. e.g. If you allow an incoming port 80, you would also need to apply the rule for outgoing traffic.</p>
</li>
</ul>
<h3 id="rules-allow-or-deny"><a class="markdownIt-Anchor" href="#rules-allow-or-deny"></a> Rules: Allow or Deny</h3>
<ul>
<li>Security group support allow rules only (by default all rules are denied). e.g. You cannot deny a certain IP address from establishing a connection.</li>
<li>Network ACL support allow and deny rules. By deny rules, you could explicitly deny a certain IP address to establish a connection example: Block IP address 123.201.57.39 from establishing a connection to an EC2 Instance.</li>
</ul>
<p><img src="/../images/AWS-SAA-Review/2.png" alt="" /></p>
<table>
<thead>
<tr>
<th>Security Group</th>
<th>Network ACL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Operates at the instance level</td>
<td>Operates at the subnet level</td>
</tr>
<tr>
<td>supports allow rules only</td>
<td>supports allow rules and deny rules</td>
</tr>
<tr>
<td>is stateful: return traffic is automatically allowed, regardless of any rules</td>
<td>is stateless: return traffic must be explicity allowed by rules</td>
</tr>
<tr>
<td>we evaluate all rules before deciding whether to allow traffic</td>
<td>we proces rules in number order when deciding whether to allow traffic</td>
</tr>
<tr>
<td>applies to an instance only if someone specifies the security group when launching the instance, or associates the security group with the instance later on</td>
<td>automatically applies to all instances in the subnets it’s associated with (therefore, you don’t have to rely on users to specify the security group)</td>
</tr>
</tbody>
</table>
<h2 id="vpc-peering"><a class="markdownIt-Anchor" href="#vpc-peering"></a> VPC Peering</h2>
<ul>
<li>connect 2 VPCs, privately using AWS network</li>
<li>make them behave as if they were in the same network</li>
<li>must not have overlapping CIDR</li>
<li>VPC peering connection is not transitive (must be established for each VPC that need to communicate with one another)<br />
e.g. if we connect VPC A to VPC B and also connect VPC B to VPC C, this doesn’t mean VPC A is connected to VPC C.</li>
<li>you can do VPC peering with another AWS account</li>
<li>you must update route tables in each VPC’s subnets to ensure instances can communicate</li>
</ul>
<h3 id="vpc-peering-good-to-know"><a class="markdownIt-Anchor" href="#vpc-peering-good-to-know"></a> VPC Peering - good to know</h3>
<ul>
<li>VPC peering can work inter region, cross account</li>
<li>you can reference a security group of a peered VPC (work cross account)</li>
</ul>
<h2 id="vpc-endpoint"><a class="markdownIt-Anchor" href="#vpc-endpoint"></a> VPC Endpoint</h2>
<ul>
<li>endpoints allow you to connect to AWS services using a private network instead of the public www network</li>
<li>they scale horizontally and are redundant</li>
<li>they remove the need of IGW, NAT, etc… to access AWS services</li>
<li>interface
<ul>
<li>provisions an ENI (private IP address) as an entry point (must attach security group) - most AWS services</li>
</ul>
</li>
<li>gateway
<ul>
<li>provisions a target and must be used in a route table - S3 and DynamoDB</li>
</ul>
</li>
</ul>
<h2 id="flow-logs"><a class="markdownIt-Anchor" href="#flow-logs"></a> Flow Logs</h2>
<ul>
<li>capture information about IP traffic going into your interfaces
<ul>
<li>VPC flow logs (includes the other two)</li>
<li>subnet flow logs</li>
<li>elastic network interface flow logs</li>
</ul>
</li>
<li>helps to monitor and troubleshoot connectivity issues</li>
<li>flow logs data can go to S3 / CloudWatch Logs</li>
<li>captures network information from AWS managed interfaces too: ELB, RDS, ElastiCache, Redshift, WorkSpaces</li>
</ul>
<h2 id="bastion-hosts"><a class="markdownIt-Anchor" href="#bastion-hosts"></a> Bastion Hosts</h2>
<ul>
<li>we can use a Bastion Host to SSH into our private instances</li>
<li>the bastion is in the public subnet which is then connected to all other private subnets</li>
<li>Bastion Host security group must be tightened</li>
<li>exam tip: make sure the bastion host only has port 22 traffic from the IP you need. not from the security groups of your other instances</li>
</ul>
<h2 id="site-to-site-vpn"><a class="markdownIt-Anchor" href="#site-to-site-vpn"></a> Site to Site VPN</h2>
<ul>
<li>Virtual Private Gateway
<ul>
<li>VPN concentrator on the AWS side of the VPN connection</li>
<li>VGW (VPC Gateway) is created and attached to the VPC from which you want to create the Site-to-Site VPN connection</li>
</ul>
</li>
<li>Customer Gateway
<ul>
<li>software application or physical device on customer side of the VPN connection</li>
<li>ip address
<ul>
<li>use static, internet-routable IP address for your customer gateway device</li>
<li>if behind a CGW (Cloud Gateway) behind a NAT, use the public IP address of the NAT</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="direct-connect-dx"><a class="markdownIt-Anchor" href="#direct-connect-dx"></a> Direct Connect (DX)</h2>
<ul>
<li>provides a dedicated private connection from a remote network to your VPC</li>
<li>dedicated connection must be setup between your data center and AWS direct connect locations</li>
<li>you need to setup a Virtual Private Gateway on your VPC</li>
<li>access public resources (S3), and private (EC2) on same connection</li>
<li>use cases
<ul>
<li>increase bandwidth throughput: working with large data sets - lower cost</li>
<li>more consistent network experience - applications using real time data feeds</li>
<li>hybrid environments (on premises + cloud)</li>
</ul>
</li>
<li>supports both IPv4 and IPv6</li>
</ul>
<h3 id="direct-connect-gateway"><a class="markdownIt-Anchor" href="#direct-connect-gateway"></a> Direct connect gateway</h3>
<ul>
<li>if you want to setup a direct connect to one or more VPC in many different regions (same account), you must use a direct connect gateway</li>
</ul>
<h3 id="connection-types"><a class="markdownIt-Anchor" href="#connection-types"></a> Connection types</h3>
<ul>
<li>dedicated connections
<ul>
<li>1 Gbps and 10 Gbps capacity</li>
<li>physical ethernet port dedicated to a customer</li>
<li>request made to AWS first, then completed by AWS direct connetion partners</li>
</ul>
</li>
<li>hosted connections
<ul>
<li>50 Mbps, 500 Mbps to 10 Gbps</li>
<li>connection requests are made via AWS direct connect partners</li>
<li>capacity can be added or removed on demand</li>
<li>1,2,5,10 Gbps available at select AWS direct connect partners</li>
</ul>
</li>
<li>lead times are often longer than 1 month to establish a new connection</li>
</ul>
<h3 id="encryption"><a class="markdownIt-Anchor" href="#encryption"></a> Encryption</h3>
<ul>
<li>data in transit is not encrypted but is private</li>
<li>AWS direct connect + VPN provides an IPsec-encrypted private connection</li>
<li>good for an extra level of security, but slightly more complex to put in place</li>
</ul>
<h3 id="resiliency"><a class="markdownIt-Anchor" href="#resiliency"></a> Resiliency</h3>
<ul>
<li>High resiliency for critical workloads
<ul>
<li>one connection at multiple locations</li>
</ul>
</li>
<li>maximum resiliency for critical workloads
<ul>
<li>maximum resilience is achieved by separate connections</li>
<li>terminating on separate devices in more than one location</li>
</ul>
</li>
</ul>
<h2 id="egress-outgoing-only-internet-gateway"><a class="markdownIt-Anchor" href="#egress-outgoing-only-internet-gateway"></a> Egress (outgoing) only internet gateway</h2>
<ul>
<li>Egress only internet gateway is for IPv6 only</li>
<li>similar function as a NAT, but a NAT is for IPv4</li>
<li>good to know: IPv6 are all public addresses</li>
<li>therefore all our instances with IPv6 are publicly accessible</li>
<li>Egress only internet gateway gives our IPv6 instances access to the internet, but they won’t be directly reachable by the internet</li>
<li>after creating an Egress only internet gateway, edit the route tables</li>
</ul>
<h2 id="aws-private-link-vpc-endpoint-service"><a class="markdownIt-Anchor" href="#aws-private-link-vpc-endpoint-service"></a> AWS Private Link - VPC Endpoint Service</h2>
<h3 id="how-to-expose-services-in-your-vpc-to-other-vpcs"><a class="markdownIt-Anchor" href="#how-to-expose-services-in-your-vpc-to-other-vpcs"></a> How to expose services in your VPC to other VPCs?</h3>
<ul>
<li>Option1: make it public
<ul>
<li>goes through the public www</li>
<li>tough to manage access</li>
</ul>
</li>
<li>Option2: VPC peering
<ul>
<li>must create many peering relations (peering relation is one-to-one)</li>
<li>opens the whole network(maybe you just want one of your services to be exposed, not the whole VPC)</li>
</ul>
</li>
</ul>
<h3 id="aws-private-link"><a class="markdownIt-Anchor" href="#aws-private-link"></a> AWS Private Link</h3>
<ul>
<li>most secure and scalable way to expose a service to 1000s of VPCs</li>
<li>does not require VPC peering, internet gateway, NAT, route tables</li>
<li>requires a network load balancer (service VPC) and ENI (customer VPC)
<ul>
<li>customer VPC =&gt; ENI =&gt; private link =&gt; NLB =&gt; service VPC</li>
</ul>
</li>
<li>if the NLB is in multiple AZ, and the ENI in multiple AZ, the solution is fault tolerant</li>
</ul>
<p><img src="/../images/AWS-SAA-Review/3.png" alt="" /></p>
<h2 id="ec2-classic-and-aws-classiclink-deprecated"><a class="markdownIt-Anchor" href="#ec2-classic-and-aws-classiclink-deprecated"></a> EC2 Classic and AWS ClassicLink (deprecated)</h2>
<ul>
<li>EC2 classic: instances run in a single network shared with other customers</li>
<li>Amazon VPC: your instances run logically isolated to your AWS account</li>
<li>classLink: allows you to link EC2 instances to a VPC in your account
<ul>
<li>must associate a security group</li>
<li>enables communication using private IPv4 addresses</li>
<li>removes the need to make use of public IPv4 addresses or Elastic IP addresses</li>
</ul>
</li>
<li>Likely to be distractors at the exam</li>
</ul>
<h2 id="aws-vpn-cloudhub"><a class="markdownIt-Anchor" href="#aws-vpn-cloudhub"></a> AWS VPN Cloudhub</h2>
<ul>
<li>provide secure communication between sites, if you have multiple VPN connections</li>
<li>low cost hub-and-spoke model for primary or secondary network connectivity between locations</li>
<li>it is a VPN connection so it goes over the public internet</li>
</ul>
<h2 id="transit-gateway"><a class="markdownIt-Anchor" href="#transit-gateway"></a> Transit Gateway</h2>
<ul>
<li>for having transitive peering between thousands of VPCs and on premises, hub-and-spoke(star) connection</li>
<li>regional resource, can work cross-region</li>
<li>share cross account using Resource Access Manager (RAM)</li>
<li>you can peer transit gateway across regions</li>
<li>route tables: limit which VPC can talk with other VPC</li>
<li>works with direct connect gateway, VPN connections</li>
<li>supports IP multicast (not supported by any other AWS service)</li>
<li>share direct connect between multiple accounts
<ul>
<li>VPCs =&gt; transite gateway -&gt; direct connect gateway =&gt; AWS direct connect endpoint =&gt; customer router</li>
</ul>
</li>
</ul>
<h3 id="transit-gateway-site-to-site-vpc-ecmp"><a class="markdownIt-Anchor" href="#transit-gateway-site-to-site-vpc-ecmp"></a> Transit Gateway: site-to-site VPC ECMP</h3>
<ul>
<li>ECMP = equal cost multi path routing</li>
<li>routing strategy to allow to forward a packet over multiple best path</li>
<li>use case: create multiple site-to-site VPN connections to increase the bandwidth of your connection to AWS</li>
</ul>
<h2 id="vpc-summary"><a class="markdownIt-Anchor" href="#vpc-summary"></a> VPC Summary</h2>
<p><img src="/../images/AWS-SAA-Review/4.png" alt="" /></p>
<ul>
<li>CIDR: IP range</li>
<li>VPC: Virtual Private Cloud =&gt; we define a list of IPv4 or IPv6 CIDR</li>
<li>Subnets: Tied to an AZ, we define a CIDR for a subnet</li>
<li>Internet gateway: at the VPC level, provide internet access</li>
<li>Route table: must be edited to add routes from subnets to the IGW, VPC peering connections, VPC endpoints, etc…</li>
<li>NAT Instances: gives internet access to the instances in private subsnets, old, must be setup in a public subnet, disable source / destination check flag</li>
<li>NAT gateway: managed by AWS, provides scalable internet access to private instances, IPv4 only</li>
<li>Private DNS + route 53: enable DNS resolution + DNS hostnames (VPC)</li>
<li>NACL: stateless, subnet rules for inbound and outbound, don’t forget ephemeral ports</li>
<li>Security groups: stateful, operate at the EC2 instance level</li>
<li>VPC Peering: connect two VPC with non overlapping CIDR, non transitive</li>
<li>VPC endpoints: provide private access to AWS services (S3, DynamoDB, CloudFormation, SSM) within VPC, no need to go through internet gateway</li>
<li>Bastion Host: public instance to SSH into, that has SSH connectivity to instances in private subnets</li>
<li>Site to Site VPN: setup a customer gateway on Data center, a Virtual Private Gateway on VPC, and site to site VPN over public internet</li>
<li>Direct Connect: setup a virtual private gateway on VPC, and establish a direct private connection to an AWS direct connection location</li>
<li>Direct Connect Gateway: setup a direct connect to many VPC in different regions</li>
<li>internet gateway Egress: like a NAT gateway, but for IPv6</li>
<li>Private Link / VPC endpoint services
<ul>
<li>connect services privately from your service VPC to customers VPC</li>
<li>doesn’t need VPC peering, public internet, NAT gateway, route tables</li>
<li>must be used with network load balancer and ENI</li>
</ul>
</li>
<li>ClassicLInk: connect EC2 classic instances privately to your VPC</li>
<li>VPC Cloudhub: hun and spoke VPN model to connect your sites</li>
<li>Transit gateway: transitive peering connections for VPC, VPN and DX</li>
</ul>
<h2 id="networking-cost-in-aws"><a class="markdownIt-Anchor" href="#networking-cost-in-aws"></a> Networking cost in AWS</h2>
<p><img src="/../images/AWS-SAA-Review/5.png" alt="" /></p>
<ul>
<li>use private IP instead of public IP for good savings and better network performance</li>
<li>use same AZ for maximum savings (at the cost of HA)</li>
</ul>
<p><img src="/../images/AWS-SAA-Review/6.png" alt="" /></p>
<p><img src="/../images/AWS-SAA-Review/7.png" alt="" /></p>
<p><img src="/../images/AWS-SAA-Review/8.png" alt="" /></p>
<h2 id="ipv6-for-vpc"><a class="markdownIt-Anchor" href="#ipv6-for-vpc"></a> IPv6 for VPC</h2>
<ul>
<li>IPv4 cannot be disabled for your VPC and subnets</li>
<li>you can enable IPv6 to operate in dual-stack mode</li>
<li>your EC2 instance would get at least a private internal IPv4 and a public IPv6</li>
<li>they can communicate using either IPv4 or IPv6</li>
</ul>
<h3 id="ipv6-troubleshooting"><a class="markdownIt-Anchor" href="#ipv6-troubleshooting"></a> IPv6 Troubleshooting</h3>
<ul>
<li>if you cannot launch an instance in your subnet
<ul>
<li>it is not because it cannot acquire an IPv6 (the space is very large)</li>
<li>it is because there are no available IPv4 in your subnet</li>
</ul>
</li>
<li>solution: create a new IPv4 CIDR in your subnet</li>
</ul>
<h1 id="disaster-recovery-overview"><a class="markdownIt-Anchor" href="#disaster-recovery-overview"></a> Disaster Recovery Overview</h1>
<ul>
<li>any event that has a negative impact on a company’s business continuity or finances is a disaster</li>
<li>disaster recovery is about preparing for and recovering from a disaster</li>
<li>what kind of disaster recovery
<ul>
<li>on premises =&gt; on premises: tranditional DR, very expensive</li>
<li>on premises =&gt; AWS Cloud: hybrid recovery</li>
<li>AWS Cloud Region A =&gt; AWS Cloud Region B</li>
</ul>
</li>
<li>need to define 2 terms
<ul>
<li>RPO: recovery point objective</li>
<li>RTO: recovery time objective</li>
</ul>
</li>
</ul>
<p><img src="/../images/AWS-SAA-Review/9.png" alt="" /></p>
<h2 id="backup-and-restore-high-rpo"><a class="markdownIt-Anchor" href="#backup-and-restore-high-rpo"></a> Backup and restore (High RPO)</h2>
<ul>
<li>needs more time to recover</li>
</ul>
<h2 id="pilot-light"><a class="markdownIt-Anchor" href="#pilot-light"></a> Pilot Light</h2>
<ul>
<li>a small version of the app is always running in the cloud</li>
<li>useful for the critical core (pilot light)</li>
<li>very similar to backup and restore</li>
<li>faster than backup and restore as critical systems are already up</li>
</ul>
<h2 id="warm-standby"><a class="markdownIt-Anchor" href="#warm-standby"></a> Warm Standby</h2>
<ul>
<li>full system is up and running but at minimum size</li>
<li>upon disaster, we can scale up to production load</li>
</ul>
<h2 id="multi-site-hot-site-approach"><a class="markdownIt-Anchor" href="#multi-site-hot-site-approach"></a> Multi Site / Hot Site Approach</h2>
<ul>
<li>very low RTO (minutes or seconds) - very expensive</li>
<li>full production scale is running AWS and on premises</li>
</ul>
<h2 id="disaster-recovery-tips"><a class="markdownIt-Anchor" href="#disaster-recovery-tips"></a> Disaster Recovery Tips</h2>
<ul>
<li>backup
<ul>
<li>EBS snapshots, RDS automated backups / snapshots, etc…</li>
<li>regular pushes to S3 / S3 IA / Glacier, Lifecycle policy, cross region replication</li>
<li>from on premises: snowball or storage gateway</li>
</ul>
</li>
<li>HA
<ul>
<li>use route 53 to migrate DNS over from region to region</li>
<li>RDS multi AZ, elastiCache multi AZ, EFS, S3</li>
<li>site to site VPN as a recovery from direct connect</li>
</ul>
</li>
<li>replication
<ul>
<li>RDS replication, AWS Aurora + global databases</li>
<li>database replication from on premises to RDS</li>
<li>storage gateway</li>
</ul>
</li>
<li>automation
<ul>
<li>cloudFormation / elastic beanstalk to re-create a whole new environment</li>
<li>recover / reboot EC2 instance with cloudwatch if alarms fails</li>
<li>AWS lambda functions for customized automations</li>
</ul>
</li>
<li>chans
<ul>
<li>Netflix has a simian-army randomly terminating EC2</li>
</ul>
</li>
</ul>
<h1 id="dms-database-migration-service"><a class="markdownIt-Anchor" href="#dms-database-migration-service"></a> DMS - Database Migration Service</h1>
<ul>
<li>quickly and securely migrate databases to AWS, resilient, self healing</li>
<li>the source database remains available during the migration</li>
<li>supports
<ul>
<li>homogeneous migrations: Oracle to Oracle</li>
<li>Heterogeneous: Microsoft SQL server to Aurora</li>
</ul>
</li>
<li>continuous Data replication using CDC</li>
<li>you must create an EC2 instance to perform the replication tasks</li>
</ul>
<h2 id="aws-schema-conversion-tool-sct"><a class="markdownIt-Anchor" href="#aws-schema-conversion-tool-sct"></a> AWS Schema Conversion Tool (SCT)</h2>
<ul>
<li>convert your database’s schema from one engine to another</li>
<li>example OLTP: sql server or Oracle =&gt; MySQL, PostgreSQL, Aurora</li>
<li>example OLAP: Teradata or Oracle =&gt; Amazon Redshift</li>
<li>you do not need to use SCT if you are migrating the same DB engine
<ul>
<li>on premise postgreSQL =&gt; RDS postgreSQL</li>
<li>the DB engine is still PostgreSQL (RDS is just a platform)</li>
</ul>
</li>
</ul>
<h2 id="on-premises-strategy-with-aws"><a class="markdownIt-Anchor" href="#on-premises-strategy-with-aws"></a> On Premises Strategy with AWS</h2>
<ul>
<li>ability to download Amazon Linux 2 AMI as a VM
<ul>
<li>use VMWare, KVM, VirtualBox to run VM</li>
</ul>
</li>
<li>VM import / Export
<ul>
<li>migrate existing applications into EC2</li>
<li>create a DR repository strategy for your on premises VMs</li>
<li>can export abck the VMs from EC2 to on premises</li>
</ul>
</li>
<li>AWS application discovery services
<ul>
<li>gather information about your on premises server to plan a migration</li>
<li>server utilization and dependency mappings</li>
<li>track with AWS migration hub</li>
</ul>
</li>
<li>AWS database migration server (DMS)
<ul>
<li>replicate on premise =&gt; AWS</li>
<li>AWS =&gt; AWS</li>
<li>AWS =&gt; on premises</li>
</ul>
</li>
<li>AWS server migration service (SMS)
<ul>
<li>incremental replication of on premises live servers to AWS</li>
</ul>
</li>
</ul>
<h2 id="aws-datasync"><a class="markdownIt-Anchor" href="#aws-datasync"></a> AWS DataSync</h2>
<ul>
<li>move large amount of data from on premise to AWS</li>
<li>can synchronize to: Amazon S3  (any storage class, including Glacier), Amazon EFS, FSx for Windows</li>
<li>move data from your NAS or file system via NFS or SMB</li>
<li>replication tasks can be scheduled hourly, daily or weekly</li>
<li>leverage the DataSync agent to connect to your systems</li>
<li>can setup a bandwidth limit</li>
</ul>
<h2 id="aws-backup"><a class="markdownIt-Anchor" href="#aws-backup"></a> AWS Backup</h2>
<ul>
<li>fully managed service</li>
<li>centrally manage and automate backups across AWS services</li>
<li>no need to create custom scripts and manual processes</li>
<li>supported services
<ul>
<li>FSx</li>
<li>EFS</li>
<li>DynamoDB</li>
<li>EC2</li>
<li>EBS</li>
<li>RDS</li>
<li>Aurora</li>
<li>AWS storage gateway (volume gateway)</li>
</ul>
</li>
<li>supports cross region backups</li>
<li>supports cross account backups</li>
<li>supports PITR (point in time recovery) for supported services</li>
<li>on demand and scheduled backups</li>
<li>tag based backup policies</li>
<li>you create backup policies known as Backup Plans
<ul>
<li>backup frequency</li>
<li>backup window</li>
<li>transition to cold storage</li>
<li>retention period</li>
</ul>
</li>
</ul>
<h1 id="more-solution-architectures"><a class="markdownIt-Anchor" href="#more-solution-architectures"></a> More Solution Architectures</h1>
<h2 id="compute-and-networking"><a class="markdownIt-Anchor" href="#compute-and-networking"></a> Compute and Networking</h2>
<ul>
<li>EC2 enhanced networking (SR-IOV)
<ul>
<li>higher bandwidth, higher PPS (packet per second), lower latency</li>
<li>option1: Elastic Network Adapter (ENA) up to 100 Gbps</li>
<li>option2: Intel, up to 10 Gbps, legacy</li>
</ul>
</li>
<li>Elastic Fabric Adapter (EFA)
<ul>
<li>improved ENA for HPC, only works for Linux</li>
<li>great for inter node communications, tightly coupled networks</li>
<li>leverages message passing interface (MPI) standard</li>
<li>bypasses the underlying linux OS to provide low latency, reliable transport</li>
</ul>
</li>
</ul>
<h2 id="cloudformation"><a class="markdownIt-Anchor" href="#cloudformation"></a> CloudFormation</h2>
<ul>
<li>a declarative way of outlining your AWS infrastructure, for any resources</li>
<li>for example, within a CloudFormation template, you say
<ul>
<li>I want a security group</li>
<li>2 EC2 instances using this security group</li>
<li>2 Elastic IPs for these EC2 machines</li>
<li>1 S3 bucket</li>
<li>a load balancer in front of these machines</li>
</ul>
</li>
<li>then cloudformation creates those for you, in the right order, with the exact configuration that you specify</li>
<li>templates have to be uploaded in S3 and then referenced in CloudFormation</li>
<li>to update a template, we can’t edit previous ones, we have to re-upload a new version of the template to AWS</li>
<li>stacks are identified by a name</li>
<li>deleting a stack deletes every single artifact that was created by CloudFormation</li>
</ul>
<h3 id="deploying-cloudformation-templates"><a class="markdownIt-Anchor" href="#deploying-cloudformation-templates"></a> Deploying CloudFormation templates</h3>
<ul>
<li>manual way
<ul>
<li>editing templates in the CloudFormation designer</li>
<li>using the console to input parameters, etc…</li>
</ul>
</li>
<li>automated way
<ul>
<li>editing templates in a YAML file</li>
<li>using the AWS CLI to deploy the templates</li>
<li>recommended way when you fully want to automate your flow</li>
</ul>
</li>
</ul>
<h3 id="cloudformation-stacksets"><a class="markdownIt-Anchor" href="#cloudformation-stacksets"></a> CloudFormation - stacksets</h3>
<ul>
<li>create, update, or delete stacks across multiple accounts and regions with a single operation</li>
<li>administrator account to create stacksets</li>
<li>trusted accounts to create, update, delete stack instances from stacksets</li>
<li>when you update a stackset, all associated stack instances are updated throughout all accounts and regions</li>
</ul>
<h2 id="aws-step-functions"><a class="markdownIt-Anchor" href="#aws-step-functions"></a> AWS Step Functions</h2>
<ul>
<li>build serverless visual workflow to orchestrate your lambda functions</li>
<li>represent flow as a JSON state machine</li>
<li>features: sequence, parallel, conditions, timeouts, error handling</li>
<li>can also integrate with EC2, ECS, on premise servers, API gateway</li>
<li>possiblity to implement human approval feature</li>
</ul>
<h2 id="aws-swf-simple-workflow-service"><a class="markdownIt-Anchor" href="#aws-swf-simple-workflow-service"></a> AWS SWF - simple workflow service</h2>
<ul>
<li>coordinate work amongst applications</li>
<li>code runs on EC2</li>
<li>concept of activity step and decision step</li>
<li>has built in human intervention step</li>
<li>step function is recommended to be used for new applications, except
<ul>
<li>if you need external signals to intervene in the processes</li>
<li>if you need child processes that return values to parent processes</li>
</ul>
</li>
</ul>
<h2 id="amazon-emr"><a class="markdownIt-Anchor" href="#amazon-emr"></a> Amazon EMR</h2>
<ul>
<li>EMR stands for Elastic Map Reduce</li>
<li>EMR helps creating Hadoop clusters (big data) to analyze and process vast amount of data</li>
<li>the clusters can be made of hundreds of EC2 instances</li>
<li>also supports Apache Spark, HBase, Presto, Flink</li>
<li>EMR takes care of all the provisioning and configuration</li>
<li>auto scaling and integrated with Spot instances</li>
<li>use cases: data processing, machine learning, web indexing, big data</li>
</ul>
<h2 id="aws-opsworks"><a class="markdownIt-Anchor" href="#aws-opsworks"></a> AWS Opsworks</h2>
<ul>
<li>
<p>Chef and Puppet help you perform server configuration automatically, or repetitive actions</p>
</li>
<li>
<p>they work great with EC2 and on premises VM</p>
</li>
<li>
<p>AWS Opsworks = managed Chef and Puppet</p>
</li>
<li>
<p>it is an alternative to AWS SSM</p>
</li>
<li>
<p>they help with managing configuration as code</p>
</li>
<li>
<p>helps in having consistent deployments</p>
</li>
<li>
<p>works with Linux and Windows</p>
</li>
</ul>
<h2 id="aws-elastic-transcoder"><a class="markdownIt-Anchor" href="#aws-elastic-transcoder"></a> AWS Elastic Transcoder</h2>
<ul>
<li>convert media files (video + music) stored in S3 into various formats for tablets, PC, smartphone, TV etc…</li>
<li>features: bit rate optimization, thumbnail, watermarks, captions, DRM, progressive download, encryption</li>
<li>4 components
<ul>
<li>jobs: what does the work of the transcoder</li>
<li>pipeline: queue that manages the transcoding job</li>
<li>presets: template for converting media from one format to another</li>
<li>notifications: SNS for exmaple</li>
</ul>
</li>
<li>pay for what you use, scales automatically, fully managed</li>
</ul>
<h2 id="aws-workspaces"><a class="markdownIt-Anchor" href="#aws-workspaces"></a> AWS WorkSpaces</h2>
<ul>
<li>managed, secure cloud desktop</li>
<li>great to eliminate management of on premise VDI (virtual desktop infrastructure)</li>
<li>on demand, pay per by usage</li>
<li>secure, encrypted, network isolation</li>
<li>integrated with Microsoft active directory</li>
</ul>
<h2 id="aws-appsync"><a class="markdownIt-Anchor" href="#aws-appsync"></a> AWS AppSync</h2>
<ul>
<li>store and sync data across mobile and web apps in real time</li>
<li>makes use of GraphQL (mobile technology from Facebook)</li>
<li>client code can be generated automatically</li>
<li>integrations with DynamoDB</li>
<li>real time subscriptions</li>
</ul>
<h2 id="cost-explorer"><a class="markdownIt-Anchor" href="#cost-explorer"></a> Cost Explorer</h2>
<ul>
<li>visualize, understand and manage your AWS costs and usage over time</li>
<li>create custom reports that analyze cost and usage data</li>
<li>analyze your data at a high level, total costs and usage across all accounts</li>
<li>choose an optimal savings plan</li>
<li>forecast usage up to 12 months based on previous usage</li>
</ul>
<h2 id="cheatsheet"><a class="markdownIt-Anchor" href="#cheatsheet"></a> CheatSheet</h2>
<ul>
<li>
<p>CodeCommit: service where you can store your code. Similar service is GitHub</p>
</li>
<li>
<p>CodeBuild: build and testing service in your CICD pipelines</p>
</li>
<li>
<p>CodeDeploy: deploy the packaged code onto EC2 and AWS Lambda</p>
</li>
<li>
<p>CodePipeline: orchestrate the actions of your CICD pipelines (build stages, manual approvals, many deploys, etc)</p>
</li>
<li>
<p>CloudFormation: Infrastructure as Code for AWS. Declarative way to manage, create and update resources.</p>
</li>
<li>
<p>ECS (Elastic Container Service): Docker container management system on AWS. Helps with creating micro-services.</p>
</li>
<li>
<p>ECR (Elastic Container Registry): Docker images repository on AWS. Docker Images can be pushed and pulled from there</p>
</li>
<li>
<p>Step Functions: Orchestrate / Coordinate Lambda functions and ECS containers into a workflow</p>
</li>
<li>
<p>SWF (Simple Workflow Service): Old way of orchestrating a big workflow.</p>
</li>
<li>
<p>EMR (Elastic Map Reduce): Big Data / Hadoop / Spark clusters on AWS, deployed on EC2 for you</p>
</li>
<li>
<p>Glue: ETL (Extract Transform Load) service on AWS</p>
</li>
<li>
<p>OpsWorks: managed Chef &amp; Puppet on AWS</p>
</li>
<li>
<p>ElasticTranscoder: managed media (video, music) converter service into various optimized formats</p>
</li>
<li>
<p>Organizations: hierarchy and centralized management of multiple AWS accounts</p>
</li>
<li>
<p>Workspaces: Virtual Desktop on Demand in the Cloud. Replaces traditional on-premise VDI infrastructure</p>
</li>
<li>
<p>AppSync: GraphQL as a service on AWS</p>
</li>
<li>
<p>SSO (Single Sign On): One login managed by AWS to log in to various business SAML 2.0-compatible applications (office 365 etc)</p>
</li>
</ul>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>Link：</strong>
      <a href="http://hellcy.github.io/2021/08/09/AWS-SAA-Review/" title="AWS SAA Review" target="_blank" rel="external">http://hellcy.github.io/2021/08/09/AWS-SAA-Review/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>Copyright： </strong> This article is using <a href="http://creativecommons.org/licenses/by/4.0" target="_blank" rel="external">CC BY 4.0 </a> license.
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/hellcy" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/hellcy" target="_blank"><span class="text-dark">Yuan Cheng</span><small class="ml-1x">Software Engineer</small></a></h3>
        <div>Wait and see</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
           
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/09/12/AWS-DVA-review/" title="AWS DVA review"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/08/02/Denodo-Data-Virtualization/" title="Denodo Data Virtualization"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="Catalogue" role="button">
        <span>[&nbsp;</span><span>Catalogue</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>Maybe you could buy me a cup of coffee.</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan" />
              </div>
              <p class="text-muted mv">Scan this qrcode</p>
              <p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan" />
              </div>
              <p class="text-muted mv">Scan this qrcode</p>
              <p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/hellcy" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
  <!-- <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"> -->
  <script src="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '974c65d45d0a581171ca',
    clientSecret: '57b8696778eef1373bd27067f78b50b9a5d4fc0c',
    repo: 'blog-comments',
    owner: 'hellcy',
    admin: ['hellcy'],
    id: md5(location.pathname),
    distractionFreeMode: true,
    proxy: 'https://netnr-proxy.cloudno.de/https://github.com/login/oauth/access_token'
  })
  gitalk.render('comments')
  </script>

      



  <script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.js"></script>
  <script>
  //利用 FancyBox 实现点击图片放大
  $(document).ready(function() {
    $('article img').not('[hidden]').not('.panel-body img').each(function() {
      var $image = $(this);
      var imageCaption = $image.attr('alt');
      var $imageWrapLink = $image.parent('a');
      if ($imageWrapLink.length < 1) {
        var src = this.getAttribute('src');
        var idx = src.lastIndexOf('?');
        if (idx != -1) {
          src = src.substring(0, idx);
        }
        $imageWrapLink = $image.wrap('<a href="' + src + '"></a>').parent('a');
      }
      $imageWrapLink.attr('data-fancybox', 'images');
      if (imageCaption) {
        $imageWrapLink.attr('data-caption', imageCaption);
      }
    });
    $().fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
    });
  });
  </script>





</body>
</html>